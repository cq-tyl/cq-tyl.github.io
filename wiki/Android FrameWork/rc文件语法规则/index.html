<!DOCTYPE html>
<html lang=en>
<head>
    <meta charset="utf-8">
 <meta name="referrer" content="no-referrer"/>
    
    <title>Rc文件语法规则 | TYL</title>
    
    
        <meta name="keywords" content="Rc文件语法规则" />
    
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    <meta name="description" content="解析init.rc脚本Android Init Languagerc文件，是用Android Init Language编写的特殊文件。用这种语法编写的文件，统一用”.rc”后缀 它的语法说明可以在aosp源码system&#x2F;core&#x2F;init&#x2F;README.md中找到: system&#x2F;core&#x2F;init&#x2F;README.md原文： 1234567891011121314">
<meta property="og:type" content="article">
<meta property="og:title" content="Rc文件语法规则">
<meta property="og:url" content="https://cq_tyl.gitee.io/wiki/Android%20FrameWork/rc%E6%96%87%E4%BB%B6%E8%AF%AD%E6%B3%95%E8%A7%84%E5%88%99/index.html">
<meta property="og:site_name" content="TYL">
<meta property="og:description" content="解析init.rc脚本Android Init Languagerc文件，是用Android Init Language编写的特殊文件。用这种语法编写的文件，统一用”.rc”后缀 它的语法说明可以在aosp源码system&#x2F;core&#x2F;init&#x2F;README.md中找到: system&#x2F;core&#x2F;init&#x2F;README.md原文： 1234567891011121314">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2023-11-28T02:54:07.543Z">
<meta property="article:modified_time" content="2023-11-28T06:21:47.529Z">
<meta property="article:author" content="cq_tyl">
<meta name="twitter:card" content="summary">
    

    
        <link rel="alternate" href="/atom.xml" title="TYL" type="application/atom+xml" />
    

    
        <link rel="icon" href="/favicon.ico" />
    

    
<link rel="stylesheet" href="/libs/font-awesome/css/font-awesome.min.css">

    
<link rel="stylesheet" href="/libs/open-sans/styles.css">

    
<link rel="stylesheet" href="/libs/source-code-pro/styles.css">


    
<link rel="stylesheet" href="/css/style.css">

    
<script src="/libs/jquery/2.1.3/jquery.min.js"></script>

    
<script src="/libs/jquery/plugins/cookie/1.4.1/jquery.cookie.js"></script>

    
    
        
<link rel="stylesheet" href="/libs/lightgallery/css/lightgallery.min.css">

    
    
        
<link rel="stylesheet" href="/libs/justified-gallery/justifiedGallery.min.css">

    
    
    
    


    
<meta name="generator" content="Hexo 6.3.0"></head>

<head></head>
<body>
    <div id="container">
        <header id="header">
    <div id="header-main" class="header-inner">
        <div class="outer">
            <a href="/" id="logo">
                <i class="logo"></i>
                <span class="site-title">TYL</span>
            </a>
            <nav id="main-nav">
                
                    <a class="main-nav-link" href="/">首页</a>
                
                    <a class="main-nav-link" href="/about">我的简历</a>
                
            </nav>
            
            <div id="search-form-wrap">

    <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit"> </button><input type="hidden" name="sitesearch" value="https://cq_tyl.gitee.io"></form>

</div>
        </div>
    </div>
    <div id="main-nav-mobile" class="header-sub header-inner">
        <table class="menu outer">
            <tr>
                
                    <td><a class="main-nav-link" href="/">首页</a></td>
                
                    <td><a class="main-nav-link" href="/about">我的简历</a></td>
                
                <td>
                    
    <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><input type="hidden" name="sitesearch" value="https://cq_tyl.gitee.io"></form>

                </td>
            </tr>
        </table>
    </div>
</header>

        <div class="outer">
            
            
                <aside id="sidebar">
   
        
    <div class="widget-wrap" id='categories'>
        <h3 class="widget-title">
            <span>categories</span>
            &nbsp;
            <a id='allExpand' href="#">
                <i class="fa fa-angle-double-down fa-2x"></i>
            </a>
        </h3>
        
        
        
         <ul class="unstyled" id="tree" > 
                    <li class="directory">
                        <a href="#" data-role="directory">
                            <i class="fa fa-folder"></i>
                            &nbsp;
                            Android Application
                        </a>
                         <ul class="unstyled" id="tree" > 
                    <li class="directory">
                        <a href="#" data-role="directory">
                            <i class="fa fa-folder"></i>
                            &nbsp;
                            AndroidStudio插件
                        </a>
                         <ul class="unstyled" id="tree" >  <li class="file"><a href="/wiki/Android%20Application/AndroidStudio%E6%8F%92%E4%BB%B6/Alibaba-Java-Coding-Guidelines%EF%BC%88%E9%98%BF%E9%87%8C%E4%BB%A3%E7%A0%81%E8%A7%84%E8%8C%83%E6%A3%80%E6%B5%8B%EF%BC%89/">Alibaba-Java-Coding-Guidelines（阿里代码规范检测）</a></li>  <li class="file"><a href="/wiki/Android%20Application/AndroidStudio%E6%8F%92%E4%BB%B6/Studio%E6%B1%89%E5%8C%96%E6%8F%92%E4%BB%B6/">Studio汉化插件</a></li>  <li class="file"><a href="/wiki/Android%20Application/AndroidStudio%E6%8F%92%E4%BB%B6/%E7%BF%BB%E8%AF%91%E6%8F%92%E4%BB%B6Translation/">翻译插件Translation</a></li>  <li class="file"><a href="/wiki/Android%20Application/AndroidStudio%E6%8F%92%E4%BB%B6/database-navigator%E6%9F%A5%E7%9C%8B%E6%95%B0%E6%8D%AE%E5%BA%93/">Database-Navigator查看数据库</a></li>  </ul> 
                    </li> 
                    
                    <li class="directory">
                        <a href="#" data-role="directory">
                            <i class="fa fa-folder"></i>
                            &nbsp;
                            Android兼容适配
                        </a>
                         <ul class="unstyled" id="tree" >  <li class="file"><a href="/wiki/Android%20Application/Android%E5%85%BC%E5%AE%B9%E9%80%82%E9%85%8D/%E8%99%9A%E6%8B%9F%E6%8C%89%E9%94%AE%E9%81%AE%E6%8C%A1%E5%B8%83%E5%B1%80-%E9%9A%90%E8%97%8F%E5%BA%95%E9%83%A8%E8%99%9A%E6%8B%9F%E6%8C%89%E9%94%AENavigation%E5%AE%9E%E7%8E%B0%E5%85%A8%E5%B1%8F/">虚拟按键遮挡布局-隐藏底部虚拟按键Navigation实现全屏</a></li>  <li class="file"><a href="/wiki/Android%20Application/Android%E5%85%BC%E5%AE%B9%E9%80%82%E9%85%8D/%E8%AE%BE%E7%BD%AEImageView%E5%9B%BE%E7%89%87%E6%97%B6,%E5%AE%BD%E5%BA%A6%E4%B8%BAmatch%E6%97%B6%E9%9C%80%E8%A6%81%E8%AE%BE%E7%BD%AEscaleType%E4%B8%BAfitXY/">设置ImageView图片时,宽度为match时需要设置scaleType为fitXY</a></li>  <li class="file"><a href="/wiki/Android%20Application/Android%E5%85%BC%E5%AE%B9%E9%80%82%E9%85%8D/%E9%80%82%E9%85%8D%E5%8D%8E%E4%B8%BA%E7%AD%89%E6%9C%89%E8%99%9A%E6%8B%9F%E6%8C%89%E9%94%AE%E7%9A%84%E5%B1%8F%E5%B9%95%E7%9A%84%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/">适配华为等有虚拟按键的屏幕的解决方案</a></li>  <li class="file"><a href="/wiki/Android%20Application/Android%E5%85%BC%E5%AE%B9%E9%80%82%E9%85%8D/%E5%A4%9A%E4%B8%AAfragment%E9%87%8D%E5%8F%A0%E6%97%B6%EF%BC%8C%E7%82%B9%E5%87%BB%E4%BA%8B%E4%BB%B6%E7%A9%BF%E9%80%8F%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95%EF%BC%88viewpager+fragment%EF%BC%89/">多个Fragment重叠时，点击事件穿透解决方法（viewpager+fragment）</a></li>  </ul> 
                    </li> 
                    
                    <li class="directory">
                        <a href="#" data-role="directory">
                            <i class="fa fa-folder"></i>
                            &nbsp;
                            Android动画
                        </a>
                         <ul class="unstyled" id="tree" >  <li class="file"><a href="/wiki/Android%20Application/Android%E5%8A%A8%E7%94%BB/LayoutTransition%EF%BC%88%E9%80%9A%E7%94%A8%E9%9A%90%E8%97%8F%E6%98%BE%E7%A4%BA%E5%8A%A8%E7%94%BB%EF%BC%89/">LayoutTransition（通用隐藏显示动画）</a></li>  <li class="file"><a href="/wiki/Android%20Application/Android%E5%8A%A8%E7%94%BB/%E5%85%B1%E4%BA%AB%E5%85%83%E7%B4%A0%EF%BC%88Shared-Element%EF%BC%89/">共享元素（Shared-Element）</a></li>  <li class="file"><a href="/wiki/Android%20Application/Android%E5%8A%A8%E7%94%BB/%E5%90%AF%E5%8A%A8%E9%A1%B5%E7%BC%A9%E6%94%BE%E5%8A%A8%E7%94%BB/">启动页缩放动画</a></li>  <li class="file"><a href="/wiki/Android%20Application/Android%E5%8A%A8%E7%94%BB/%E5%B8%A7%E5%8A%A8%E7%94%BB/">帧动画</a></li>  <li class="file"><a href="/wiki/Android%20Application/Android%E5%8A%A8%E7%94%BB/%E8%A1%A5%E9%97%B4%E5%8A%A8%E7%94%BB/">补间动画</a></li>  <li class="file"><a href="/wiki/Android%20Application/Android%E5%8A%A8%E7%94%BB/%E6%8F%AD%E9%9C%B2%E6%95%88%E6%9E%9C/">揭露效果</a></li>  </ul> 
                    </li> 
                    
                    <li class="directory">
                        <a href="#" data-role="directory">
                            <i class="fa fa-folder"></i>
                            &nbsp;
                            Android基础
                        </a>
                         <ul class="unstyled" id="tree" >  <li class="file"><a href="/wiki/Android%20Application/Android%E5%9F%BA%E7%A1%80/JAV%E7%BA%BF%E7%A8%8B%E6%B1%A0/">JAV线程池</a></li>  <li class="file"><a href="/wiki/Android%20Application/Android%E5%9F%BA%E7%A1%80/TCP%E5%8D%8F%E8%AE%AE%EF%BC%88Socket%EF%BC%89/">TCP协议（Socket）</a></li>  <li class="file"><a href="/wiki/Android%20Application/Android%E5%9F%BA%E7%A1%80/Notifaction/">Notifaction</a></li>  <li class="file"><a href="/wiki/Android%20Application/Android%E5%9F%BA%E7%A1%80/JAVA%E9%9B%86%E5%90%88/">JAVA集合</a></li>  <li class="file"><a href="/wiki/Android%20Application/Android%E5%9F%BA%E7%A1%80/android-%E8%AE%A1%E6%97%B6%E5%99%A8%EF%BC%88Handle+Runable-%E5%8F%AF%E9%87%8D%E7%BD%AE%E6%97%B6%E9%97%B4%E5%8F%AF%E6%9A%82%E5%81%9C%EF%BC%89/">Android-计时器（Handle+Runable-可重置时间可暂停）</a></li>  <li class="file"><a href="/wiki/Android%20Application/Android%E5%9F%BA%E7%A1%80/JAVA%E5%A4%9A%E7%BA%BF%E7%A8%8B%E4%B9%8B%E9%97%B4%E7%9A%84%E9%80%9A%E4%BF%A1/">JAVA多线程之间的通信</a></li>  <li class="file"><a href="/wiki/Android%20Application/Android%E5%9F%BA%E7%A1%80/JSON%E6%95%B0%E6%8D%AE%E8%A7%A3%E6%9E%90/">JSON数据解析</a></li>  <li class="file"><a href="/wiki/Android%20Application/Android%E5%9F%BA%E7%A1%80/Sevice%EF%BC%88%E6%9C%8D%E5%8A%A1%EF%BC%89/">Sevice（服务）</a></li>  <li class="file"><a href="/wiki/Android%20Application/Android%E5%9F%BA%E7%A1%80/%E7%B1%BB%E5%8A%A0%E8%BD%BD%E5%99%A8%EF%BC%88%E5%9F%BA%E7%A1%80%EF%BC%89/">类加载器（基础）</a></li>  <li class="file"><a href="/wiki/Android%20Application/Android%E5%9F%BA%E7%A1%80/new-Random()--%E7%94%9F%E6%88%90%E9%9A%8F%E6%9C%BA%E6%95%B0/">New-Random()--生成随机数</a></li>  <li class="file"><a href="/wiki/Android%20Application/Android%E5%9F%BA%E7%A1%80/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/">正则表达式</a></li>  <li class="file"><a href="/wiki/Android%20Application/Android%E5%9F%BA%E7%A1%80/SharedPreferences%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8/">SharedPreferences数据存储</a></li>  <li class="file"><a href="/wiki/Android%20Application/Android%E5%9F%BA%E7%A1%80/android-popwind/">Android-Popwind</a></li>  <li class="file"><a href="/wiki/Android%20Application/Android%E5%9F%BA%E7%A1%80/%E5%90%8C%E6%AD%A5%E9%94%81Synchronized%E5%92%8CLock/">同步锁Synchronized和Lock</a></li>  <li class="file"><a href="/wiki/Android%20Application/Android%E5%9F%BA%E7%A1%80/Android-ConstraintLayout-%E4%BD%BF%E7%94%A8%E8%AF%A6%E8%A7%A3/">Android-ConstraintLayout-使用详解</a></li>  <li class="file"><a href="/wiki/Android%20Application/Android%E5%9F%BA%E7%A1%80/EditText%E7%84%A6%E7%82%B9%E5%8A%A8%E6%80%81%E6%8E%A7%E5%88%B6/">EditText焦点动态控制</a></li>  <li class="file"><a href="/wiki/Android%20Application/Android%E5%9F%BA%E7%A1%80/StringBuffer%E5%92%8CStringBuilder/">StringBuffer和StringBuilder</a></li>  <li class="file"><a href="/wiki/Android%20Application/Android%E5%9F%BA%E7%A1%80/ANR/">ANR</a></li>  <li class="file"><a href="/wiki/Android%20Application/Android%E5%9F%BA%E7%A1%80/android-ImageView-scaleType%E7%9A%84%E5%B1%9E%E6%80%A7%E7%90%86%E8%A7%A3/">Android-ImageView-scaleType的属性理解</a></li>  <li class="file"><a href="/wiki/Android%20Application/Android%E5%9F%BA%E7%A1%80/android%E4%BA%8B%E4%BB%B6%E5%88%86%E5%8F%91/">Android事件分发</a></li>  <li class="file"><a href="/wiki/Android%20Application/Android%E5%9F%BA%E7%A1%80/%E9%80%BB%E8%BE%91%E8%BF%90%E7%AE%97%E7%AC%A6/">逻辑运算符</a></li>  <li class="file"><a href="/wiki/Android%20Application/Android%E5%9F%BA%E7%A1%80/Android-%E5%80%92%E8%AE%A1%E6%97%B6/">Android-倒计时</a></li>  <li class="file"><a href="/wiki/Android%20Application/Android%E5%9F%BA%E7%A1%80/Android%E4%B8%AD%E6%8E%A5%E5%8F%A3%E5%9B%9E%E8%B0%83-%E6%96%B9%E6%B3%95%E5%9B%9E%E8%B0%83/">Android中接口回调-方法回调</a></li>  <li class="file"><a href="/wiki/Android%20Application/Android%E5%9F%BA%E7%A1%80/android-6-0%E5%8A%A8%E6%80%81%E6%9D%83%E9%99%90/">Android-6-0动态权限</a></li>  <li class="file"><a href="/wiki/Android%20Application/Android%E5%9F%BA%E7%A1%80/Android-M-%E6%9C%80%E7%AE%80%E5%8D%95%E7%9A%84%E6%9D%83%E9%99%90%E8%AF%B7%E6%B1%82/">Android-M-最简单的权限请求</a></li>  <li class="file"><a href="/wiki/Android%20Application/Android%E5%9F%BA%E7%A1%80/Toast%EF%BC%88%E8%87%AA%E5%AE%9A%E4%B9%89Toast%EF%BC%89/">Toast（自定义Toast）</a></li>  <li class="file"><a href="/wiki/Android%20Application/Android%E5%9F%BA%E7%A1%80/android-6-0%E6%96%B0%E7%89%B9%E6%80%A7/">Android-6-0新特性</a></li>  <li class="file"><a href="/wiki/Android%20Application/Android%E5%9F%BA%E7%A1%80/%E5%BC%82%E6%AD%A5%E4%BB%BB%E5%8A%A1-AsyncTask/">异步任务-AsyncTask</a></li>  <li class="file"><a href="/wiki/Android%20Application/Android%E5%9F%BA%E7%A1%80/AndroidManifest-xml/">AndroidManifest-Xml</a></li>  <li class="file"><a href="/wiki/Android%20Application/Android%E5%9F%BA%E7%A1%80/Java-Character-%E7%B1%BB%EF%BC%88%E5%8D%95%E4%B8%AA%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%B1%BB%E5%9E%8B-%E5%AD%97%E6%AF%8D-%E6%95%B0%E5%AD%97-%E5%A4%A7%E5%B0%8F%E5%86%99%E5%88%A4%E6%96%AD%EF%BC%89/">Java-Character-类（单个字符串类型-字母-数字-大小写判断）</a></li>  <li class="file"><a href="/wiki/Android%20Application/Android%E5%9F%BA%E7%A1%80/BroadCastReceiver(%E5%B9%BF%E6%92%AD)/">BroadCastReceiver(广播)</a></li>  <li class="file"><a href="/wiki/Android%20Application/Android%E5%9F%BA%E7%A1%80/Iterator%E8%BF%AD%E4%BB%A3%E5%99%A8/">Iterator迭代器</a></li>  <li class="file"><a href="/wiki/Android%20Application/Android%E5%9F%BA%E7%A1%80/UDP%E5%8D%8F%E8%AE%AE/">UDP协议</a></li>  <li class="file"><a href="/wiki/Android%20Application/Android%E5%9F%BA%E7%A1%80/Activity%E5%90%91Fragment%E4%BC%A0%E5%80%BC/">Activity向Fragment传值</a></li>  <li class="file"><a href="/wiki/Android%20Application/Android%E5%9F%BA%E7%A1%80/android%E5%AD%97%E9%97%B4%E8%B7%9D%E5%92%8C%E8%A1%8C%E9%97%B4%E8%B7%9D/">Android字间距和行间距</a></li>  </ul> 
                    </li> 
                    
                    <li class="directory">
                        <a href="#" data-role="directory">
                            <i class="fa fa-folder"></i>
                            &nbsp;
                            Android工具类
                        </a>
                         <ul class="unstyled" id="tree" >  <li class="file"><a href="/wiki/Android%20Application/Android%E5%B7%A5%E5%85%B7%E7%B1%BB/Android%E5%8A%A8%E6%80%81%E4%BF%AE%E6%94%B9%E6%A1%8C%E9%9D%A2%E5%9B%BE%E6%A0%87%E5%8F%8A%E5%BA%94%E7%94%A8%E6%A1%8C%E9%9D%A2%E5%BA%94%E7%94%A8%E5%90%8D%E7%A7%B0/">Android动态修改桌面图标及应用桌面应用名称</a></li>  <li class="file"><a href="/wiki/Android%20Application/Android%E5%B7%A5%E5%85%B7%E7%B1%BB/Android%E5%8F%91%E5%B8%83%E8%87%AA%E5%AE%9A%E4%B9%89%E5%BA%93%E5%88%B0JitPack%E4%B8%8A/">Android发布自定义库到JitPack上</a></li>  <li class="file"><a href="/wiki/Android%20Application/Android%E5%B7%A5%E5%85%B7%E7%B1%BB/JAVA%E5%86%85%E5%AD%98%E5%88%92%E5%88%86/">JAVA内存划分</a></li>  <li class="file"><a href="/wiki/Android%20Application/Android%E5%B7%A5%E5%85%B7%E7%B1%BB/android-studio-mac-%E8%8E%B7%E5%8F%96MD5-SHA1-SHA256%E8%AF%81%E4%B9%A6%E6%8C%87%E7%BA%B9/">Android-Studio-Mac-获取MD5-SHA1-SHA256证书指纹</a></li>  <li class="file"><a href="/wiki/Android%20Application/Android%E5%B7%A5%E5%85%B7%E7%B1%BB/android-textview%E7%A9%BA%E6%A0%BC%E5%8D%A0%E4%BD%8D%E7%AC%A6%E4%BB%A5%E5%8F%8A%E4%B8%80%E4%BA%9B%E5%85%B6%E4%BB%96%E5%8D%A0%E4%BD%8D%E7%AC%A6%E6%B1%87%E6%80%BB/">Android-Textview空格占位符以及一些其他占位符汇总</a></li>  <li class="file"><a href="/wiki/Android%20Application/Android%E5%B7%A5%E5%85%B7%E7%B1%BB/github%E5%9B%BE%E7%89%87%E5%8A%A0%E8%BD%BD%E5%A4%B1%E8%B4%A5/">Github图片加载失败</a></li>  <li class="file"><a href="/wiki/Android%20Application/Android%E5%B7%A5%E5%85%B7%E7%B1%BB/%E5%88%A4%E6%96%AD%E6%9F%90%E4%B8%AAactivity%E6%98%AF%E5%90%A6%E5%AD%98%E5%9C%A8%E6%A0%88%E5%A0%86%E4%B8%AD/">判断某个Activity是否存在栈堆中</a></li>  <li class="file"><a href="/wiki/Android%20Application/Android%E5%B7%A5%E5%85%B7%E7%B1%BB/Androd-%E5%BC%80%E6%9C%BA%E8%87%AA%E5%90%AF%E5%8A%A8/">Androd-开机自启动</a></li>  <li class="file"><a href="/wiki/Android%20Application/Android%E5%B7%A5%E5%85%B7%E7%B1%BB/Android-%E5%9C%A8%E6%B2%A1%E6%9C%89usb%E8%BF%9E%E6%8E%A5%E7%BA%BF%E7%9A%84%E6%83%85%E5%86%B5%E4%B8%8B%E5%A6%82%E4%BD%95%E8%BF%9E%E6%8E%A5%E6%89%8B%E6%9C%BA%E8%AE%BE%E5%A4%87/">Android-在没有Usb连接线的情况下如何连接手机设备</a></li>  <li class="file"><a href="/wiki/Android%20Application/Android%E5%B7%A5%E5%85%B7%E7%B1%BB/Android%E4%BF%9D%E6%B4%BB/">Android保活</a></li>  <li class="file"><a href="/wiki/Android%20Application/Android%E5%B7%A5%E5%85%B7%E7%B1%BB/Android%E5%B0%86String%E5%88%86%E5%89%B2%E8%BD%AC%E5%8C%96%E4%B8%BAArrayList/">Android将String分割转化为ArrayList</a></li>  <li class="file"><a href="/wiki/Android%20Application/Android%E5%B7%A5%E5%85%B7%E7%B1%BB/Android%E8%87%AA%E5%AE%9A%E4%B9%89%E5%9B%9B%E4%B8%AA%E6%96%B9%E5%90%91%E6%BB%9A%E5%8A%A8%E7%9A%84%E8%B7%91%E9%A9%AC%E7%81%AFMarqueeViewLibrary/">Android自定义四个方向滚动的跑马灯MarqueeViewLibrary</a></li>  <li class="file"><a href="/wiki/Android%20Application/Android%E5%B7%A5%E5%85%B7%E7%B1%BB/Android%E7%AC%AC%E4%B8%89%E6%96%B9%E5%B8%B8%E7%94%A8%E5%AE%89%E5%85%A8%E6%BC%8F%E6%B4%9E%E6%A3%80%E6%B5%8B/">Android第三方常用安全漏洞检测</a></li>  <li class="file"><a href="/wiki/Android%20Application/Android%E5%B7%A5%E5%85%B7%E7%B1%BB/EventBus/">EventBus</a></li>  <li class="file"><a href="/wiki/Android%20Application/Android%E5%B7%A5%E5%85%B7%E7%B1%BB/Glide%E8%AE%BE%E7%BD%AE%E5%9C%86%E8%A7%92%E3%80%81%E5%9C%86%E5%BD%A2%E5%9B%BE%E7%89%87%EF%BC%88%E6%97%A0%E9%9C%80%E5%86%8D%E5%88%9B%E5%BB%BA%E5%B7%A5%E5%85%B7%E7%B1%BB%E4%BA%86%EF%BC%89/">Glide设置圆角、圆形图片（无需再创建工具类了）</a></li>  <li class="file"><a href="/wiki/Android%20Application/Android%E5%B7%A5%E5%85%B7%E7%B1%BB/GreenDao/">GreenDao</a></li>  <li class="file"><a href="/wiki/Android%20Application/Android%E5%B7%A5%E5%85%B7%E7%B1%BB/RxJava-RxAndroid/">RxJava-RxAndroid</a></li>  <li class="file"><a href="/wiki/Android%20Application/Android%E5%B7%A5%E5%85%B7%E7%B1%BB/Sentry-Android%E9%9B%86%E6%88%90-%E4%BD%BF%E7%94%A8-%E6%B7%B7%E6%B7%86/">Sentry-Android集成-使用-混淆</a></li>  <li class="file"><a href="/wiki/Android%20Application/Android%E5%B7%A5%E5%85%B7%E7%B1%BB/Svn%E5%BF%BD%E7%95%A5Android%E9%A1%B9%E7%9B%AE%E4%B8%8A%E4%BC%A0%E6%96%87%E4%BB%B6-%E6%96%87%E4%BB%B6%E5%A4%B9/">Svn忽略Android项目上传文件-文件夹</a></li>  <li class="file"><a href="/wiki/Android%20Application/Android%E5%B7%A5%E5%85%B7%E7%B1%BB/android-RadioButton-drawableTop%E5%9B%BE%E7%89%87%E5%8F%98%E5%9E%8B/">Android-RadioButton-drawableTop图片变型</a></li>  <li class="file"><a href="/wiki/Android%20Application/Android%E5%B7%A5%E5%85%B7%E7%B1%BB/android-%E6%9C%AC%E5%9C%B0%E6%97%A5%E5%8E%86%E6%8F%92%E5%85%A5%E4%BA%8B%E4%BB%B6/">Android-本地日历插入事件</a></li>  <li class="file"><a href="/wiki/Android%20Application/Android%E5%B7%A5%E5%85%B7%E7%B1%BB/android-%E8%8E%B7%E5%8F%96assets%E5%86%85%E7%9A%84%E6%96%87%E4%BB%B6%E8%BD%ACFile/">Android-获取assets内的文件转File</a></li>  <li class="file"><a href="/wiki/Android%20Application/Android%E5%B7%A5%E5%85%B7%E7%B1%BB/android-%E8%BD%AF%E9%94%AE%E7%9B%98%E5%B7%A5%E5%85%B7%E7%B1%BB/">Android-软键盘工具类</a></li>  <li class="file"><a href="/wiki/Android%20Application/Android%E5%B7%A5%E5%85%B7%E7%B1%BB/android-%E9%80%8F%E6%98%8E%E5%BA%A6%E6%95%B0%E5%80%BC%E8%AE%B0%E5%BD%95%E8%A1%A8/">Android-透明度数值记录表</a></li>  <li class="file"><a href="/wiki/Android%20Application/Android%E5%B7%A5%E5%85%B7%E7%B1%BB/android%E6%98%8E%E8%BF%9B%E5%BA%B75-1%E7%9B%92%E5%AD%90%E5%AE%9A%E6%97%B6%E5%BC%80%E5%85%B3%E6%9C%BA/">Android明进康5-1盒子定时开关机</a></li>  <li class="file"><a href="/wiki/Android%20Application/Android%E5%B7%A5%E5%85%B7%E7%B1%BB/android%E8%B0%83%E8%AF%95%E8%BE%93%E5%87%BAlog%E6%89%93%E5%8D%B0%E4%BF%A1%E6%81%AF%E5%88%B0%E6%9C%AC%E5%9C%B0%E6%96%87%E4%BB%B6/">Android调试输出log打印信息到本地文件</a></li>  <li class="file"><a href="/wiki/Android%20Application/Android%E5%B7%A5%E5%85%B7%E7%B1%BB/app%E6%98%AF%E5%90%A6%E6%AD%A3%E5%9C%A8%E8%BF%90%E8%A1%8C-%E8%BF%90%E8%A1%8C%E7%8A%B6%E6%80%81/">App是否正在运行-运行状态</a></li>  <li class="file"><a href="/wiki/Android%20Application/Android%E5%B7%A5%E5%85%B7%E7%B1%BB/%E5%9C%A8%E7%BA%BF%E5%9B%BE%E7%89%87%E5%8E%BB%E5%BA%95%E5%B7%A5%E5%85%B7---%E5%B0%86%E7%BA%AF%E8%89%B2%E8%83%8C%E6%99%AF%E7%9A%84%E5%9B%BE%E7%89%87%E8%BD%AC%E6%8D%A2%E4%B8%BA%E8%83%8C%E6%99%AF%E9%80%8F%E6%98%8E%E7%9A%84%E5%9B%BE%E7%89%87/">在线图片去底工具---将纯色背景的图片转换为背景透明的图片</a></li>  <li class="file"><a href="/wiki/Android%20Application/Android%E5%B7%A5%E5%85%B7%E7%B1%BB/%E8%87%AA%E5%AE%9A%E4%B9%89%E5%9C%86%E5%BD%A2%E5%A4%B4%E5%83%8FCircleImageView%E7%9A%84%E4%BD%BF%E7%94%A8/">自定义圆形头像CircleImageView的使用</a></li>  <li class="file"><a href="/wiki/Android%20Application/Android%E5%B7%A5%E5%85%B7%E7%B1%BB/Android-Gps-%E4%BD%8D%E7%BD%AE%E4%BF%A1%E6%81%AF%E5%BC%80%E5%85%B3%E6%A3%80%E6%B5%8B/">Android-Gps-位置信息开关检测</a></li>  <li class="file"><a href="/wiki/Android%20Application/Android%E5%B7%A5%E5%85%B7%E7%B1%BB/android-eclpse%E5%BF%AB%E6%8D%B7%E9%94%AE%E5%A4%A7%E5%85%A8/">Android-Eclpse快捷键大全</a></li>  <li class="file"><a href="/wiki/Android%20Application/Android%E5%B7%A5%E5%85%B7%E7%B1%BB/java-android-%E9%93%B6%E8%A1%8C%E5%8D%A1%E5%8F%B7%E6%9F%A5%E8%AF%A2%E9%93%B6%E8%A1%8C%E5%8D%A1%E7%B1%BB%E5%9E%8B%E5%8F%8A%E5%90%8D%E7%A7%B0/">Java-Android-银行卡号查询银行卡类型及名称</a></li>  <li class="file"><a href="/wiki/Android%20Application/Android%E5%B7%A5%E5%85%B7%E7%B1%BB/Android-RecyclerView%E5%AE%9E%E7%8E%B0%E6%A8%AA%E5%90%91%E6%BB%91%E5%8A%A8%E7%BF%BB%E9%A1%B5/">Android-RecyclerView实现横向滑动翻页</a></li>  <li class="file"><a href="/wiki/Android%20Application/Android%E5%B7%A5%E5%85%B7%E7%B1%BB/VAPTCHA-ANDROID-SDK%E9%83%A8%E7%BD%B2%E6%96%87%E6%A1%A3/">VAPTCHA-ANDROID-SDK部署文档</a></li>  <li class="file"><a href="/wiki/Android%20Application/Android%E5%B7%A5%E5%85%B7%E7%B1%BB/Android-Jenkins%E8%87%AA%E5%8A%A8%E6%89%93%E5%8C%85/">Android-Jenkins自动打包</a></li>  <li class="file"><a href="/wiki/Android%20Application/Android%E5%B7%A5%E5%85%B7%E7%B1%BB/Android%E5%88%A4%E6%96%ADUrl%E6%A0%BC%E5%BC%8F%E6%98%AF%E5%90%A6%E6%AD%A3%E7%A1%AE/">Android判断Url格式是否正确</a></li>  <li class="file"><a href="/wiki/Android%20Application/Android%E5%B7%A5%E5%85%B7%E7%B1%BB/marktext/">Marktext</a></li>  <li class="file"><a href="/wiki/Android%20Application/Android%E5%B7%A5%E5%85%B7%E7%B1%BB/%E8%87%AA%E5%88%B6-9%E5%9B%BE%E5%AE%9E%E7%8E%B0%E5%92%8C%E8%AE%BE%E8%AE%A1%E5%9B%BE%E4%B8%80%E8%87%B4%E7%9A%84%E9%98%B4%E5%BD%B1%E6%95%88%E6%9E%9C/">自制-9图实现和设计图一致的阴影效果</a></li>  <li class="file"><a href="/wiki/Android%20Application/Android%E5%B7%A5%E5%85%B7%E7%B1%BB/Android-pcm%E8%BD%AC%E7%A0%81wav/">Android-Pcm转码wav</a></li>  <li class="file"><a href="/wiki/Android%20Application/Android%E5%B7%A5%E5%85%B7%E7%B1%BB/Android-%E8%8E%B7%E5%8F%96%E5%BD%93%E5%89%8D%E5%B1%8F%E5%B9%95%E7%9A%84%E6%97%8B%E8%BD%AC%E8%A7%92%E5%BA%A6/">Android-获取当前屏幕的旋转角度</a></li>  <li class="file"><a href="/wiki/Android%20Application/Android%E5%B7%A5%E5%85%B7%E7%B1%BB/android-%E4%BF%9D%E5%AD%98%E5%9B%BE%E7%89%87%E5%88%B0%E6%9C%AC%E5%9C%B0%E7%9B%B8%E5%86%8C%E5%B9%B6%E5%8F%8A%E6%97%B6%E6%9B%B4%E6%96%B0%E6%98%BE%E7%A4%BA/">Android-保存图片到本地相册并及时更新显示</a></li>  <li class="file"><a href="/wiki/Android%20Application/Android%E5%B7%A5%E5%85%B7%E7%B1%BB/android-%E5%A4%9A%E8%AF%AD%E8%A8%80%E5%88%87%E6%8D%A2/">Android-多语言切换</a></li>  <li class="file"><a href="/wiki/Android%20Application/Android%E5%B7%A5%E5%85%B7%E7%B1%BB/adb%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/">Adb常用命令</a></li>  <li class="file"><a href="/wiki/Android%20Application/Android%E5%B7%A5%E5%85%B7%E7%B1%BB/adb%E9%85%8D%E7%BD%AE/">Adb配置</a></li>  <li class="file"><a href="/wiki/Android%20Application/Android%E5%B7%A5%E5%85%B7%E7%B1%BB/Android%20SildingMenu%EF%BC%88%E4%BE%A7%E6%BB%91%E8%8F%9C%E5%8D%95%EF%BC%89%E5%B8%B8%E7%94%A8%E5%B1%9E%E6%80%A7/">Android SildingMenu（侧滑菜单）常用属性</a></li>  <li class="file"><a href="/wiki/Android%20Application/Android%E5%B7%A5%E5%85%B7%E7%B1%BB/Android%E5%9B%BE%E7%89%87%E6%89%8B%E5%8A%BF%E6%8E%A7%E4%BB%B6/">Android图片手势控件</a></li>  <li class="file"><a href="/wiki/Android%20Application/Android%E5%B7%A5%E5%85%B7%E7%B1%BB/DeBug%E8%B0%83%E8%AF%95/">DeBug调试</a></li>  <li class="file"><a href="/wiki/Android%20Application/Android%E5%B7%A5%E5%85%B7%E7%B1%BB/EditText%E5%BC%B9%E5%87%BA%E9%94%AE%E7%9B%98%E6%97%B6%E6%BB%9A%E5%8A%A8%E5%88%B0%E7%95%8C%E9%9D%A2%E6%8C%87%E5%AE%9A%E4%BD%8D%E7%BD%AE/">EditText弹出键盘时滚动到界面指定位置</a></li>  <li class="file"><a href="/wiki/Android%20Application/Android%E5%B7%A5%E5%85%B7%E7%B1%BB/%E6%97%A0%E9%9A%9C%E7%A2%8D%E5%8D%87%E7%BA%A7/">无障碍升级</a></li>  <li class="file"><a href="/wiki/Android%20Application/Android%E5%B7%A5%E5%85%B7%E7%B1%BB/%E5%88%A4%E6%96%AD%E5%BD%93%E5%89%8D%E5%BA%94%E7%94%A8%E6%98%AF%E5%90%A6%E9%80%80%E5%88%B0%E5%90%8E%E5%8F%B0/">判断当前应用是否退到后台</a></li>  </ul> 
                    </li> 
                    
                    <li class="directory">
                        <a href="#" data-role="directory">
                            <i class="fa fa-folder"></i>
                            &nbsp;
                            Android日常记录
                        </a>
                         <ul class="unstyled" id="tree" >  <li class="file"><a href="/wiki/Android%20Application/Android%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/Activity%E7%9A%84%E5%9B%9B%E7%A7%8D%E5%90%AF%E5%8A%A8%E6%A8%A1%E5%BC%8F/">Activity的四种启动模式</a></li>  <li class="file"><a href="/wiki/Android%20Application/Android%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/Android-Elevation/">Android-Elevation</a></li>  <li class="file"><a href="/wiki/Android%20Application/Android%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/Android-%E6%A0%B9%E6%8D%AE%E9%80%97%E5%8F%B7%E5%88%86%E9%9A%94String/">Android-根据逗号分隔String</a></li>  <li class="file"><a href="/wiki/Android%20Application/Android%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/Android%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/">Android内存管理</a></li>  <li class="file"><a href="/wiki/Android%20Application/Android%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/Android%E5%B8%B8%E7%94%A8%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/">Android常用设计模式</a></li>  <li class="file"><a href="/wiki/Android%20Application/Android%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/Android%E8%87%AA%E5%AE%9A%E4%B9%89View/">Android自定义View</a></li>  <li class="file"><a href="/wiki/Android%20Application/Android%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/Anroid-%E8%87%AA%E5%AE%9A%E4%B9%89%E5%AD%97%E4%BD%93%E6%A0%B7%E5%BC%8F/">Anroid-自定义字体样式</a></li>  <li class="file"><a href="/wiki/Android%20Application/Android%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/EditText%E4%B8%8D%E8%87%AA%E5%8A%A8%E8%8E%B7%E5%8F%96%E7%84%A6%E7%82%B9/">EditText不自动获取焦点</a></li>  <li class="file"><a href="/wiki/Android%20Application/Android%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/GlidePalette%E8%8E%B7%E5%8F%96%E5%9B%BE%E7%89%87%E8%83%8C%E6%99%AF%E8%89%B2/">GlidePalette获取图片背景色</a></li>  <li class="file"><a href="/wiki/Android%20Application/Android%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/Handler/">Handler</a></li>  <li class="file"><a href="/wiki/Android%20Application/Android%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/Java%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%BC%96%E7%A8%8B%E5%AE%89%E5%85%A8%E9%80%80%E5%87%BA%E7%BA%BF%E7%A8%8B%E6%96%B9%E6%B3%95/">Java多线程编程安全退出线程方法</a></li>  <li class="file"><a href="/wiki/Android%20Application/Android%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/android-MultiDex%E5%88%86%E5%8C%85/">Android-MultiDex分包</a></li>  <li class="file"><a href="/wiki/Android%20Application/Android%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/android-textview%E5%8A%A8%E6%80%81%E4%BF%AE%E6%94%B9%E6%8C%87%E5%AE%9A%E6%96%87%E5%AD%97%E9%A2%9C%E8%89%B2/">Android-Textview动态修改指定文字颜色</a></li>  <li class="file"><a href="/wiki/Android%20Application/Android%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/android-%E6%A0%B9%E6%8D%AE%E4%B8%89%E7%82%B9%E5%9D%90%E6%A0%87%E6%B1%82%E4%B8%89%E8%A7%92%E5%BD%A2%E9%9D%A2%E7%A7%AF/">Android-根据三点坐标求三角形面积</a></li>  <li class="file"><a href="/wiki/Android%20Application/Android%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/android-%E8%8B%B1%E6%96%87%E5%8D%95%E8%AF%8D%E5%8D%87%E5%BA%8F%E6%8E%92%E5%BA%8F%EF%BC%88Collections-sort()%EF%BC%89/">Android-英文单词升序排序（Collections-Sort()）</a></li>  <li class="file"><a href="/wiki/Android%20Application/Android%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/android%E4%B8%AD%E6%9B%B4%E6%96%B0UI%E7%9A%84%E5%87%A0%E7%A7%8D%E6%96%B9%E5%BC%8F/">android中更新UI的几种方式</a></li>  <li class="file"><a href="/wiki/Android%20Application/Android%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/viewpager%E8%87%AA%E5%AE%9A%E4%B9%89%E6%BB%91%E5%8A%A8%E9%80%9F%E5%BA%A6/">Viewpager自定义滑动速度</a></li>  <li class="file"><a href="/wiki/Android%20Application/Android%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/%E6%95%B0%E6%8D%AE%E5%BA%8F%E5%88%97%E5%8C%96%E6%96%B9%E6%A1%88/">数据序列化方案</a></li>  <li class="file"><a href="/wiki/Android%20Application/Android%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/%E7%A8%8B%E5%BA%8F%E5%91%98%E5%BF%85%E7%9F%A5%E7%9A%846%E7%82%B9%E7%BC%96%E7%A8%8B%E7%A7%98%E8%AF%80/">程序员必知的6点编程秘诀</a></li>  <li class="file"><a href="/wiki/Android%20Application/Android%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/%E7%B3%BB%E7%BB%9F%E6%97%A5%E5%8E%86-%E6%8F%92%E5%85%A5%E9%87%8D%E5%A4%8D%E4%BA%8B%E4%BB%B6%E8%A7%84%E5%88%99-(android-java)/">系统日历-插入重复事件规则-(Android-Java)</a></li>  </ul> 
                    </li> 
                    
                    <li class="directory">
                        <a href="#" data-role="directory">
                            <i class="fa fa-folder"></i>
                            &nbsp;
                            Android日常问题
                        </a>
                         <ul class="unstyled" id="tree" >  <li class="file"><a href="/wiki/Android%20Application/Android%E6%97%A5%E5%B8%B8%E9%97%AE%E9%A2%98/Android-9-0-P-http-%E7%BD%91%E7%BB%9C%E8%AF%B7%E6%B1%82%E7%9A%84%E9%97%AE%E9%A2%98/">Android-9-0-P-Http-网络请求的问题</a></li>  <li class="file"><a href="/wiki/Android%20Application/Android%E6%97%A5%E5%B8%B8%E9%97%AE%E9%A2%98/Android-FaceBook%E7%99%BB%E5%BD%95-%E5%88%86%E4%BA%AB%E8%8E%B7%E5%8F%96HashKey%EF%BC%88%E5%AF%86%E9%92%A5%E6%95%A3%E5%88%97%EF%BC%89%E7%9A%84%E7%AE%80%E5%8D%95%E6%96%B9%E6%B3%95/">Android-FaceBook登录-分享获取HashKey（密钥散列）的简单方法</a></li>  <li class="file"><a href="/wiki/Android%20Application/Android%E6%97%A5%E5%B8%B8%E9%97%AE%E9%A2%98/Android-studio-%E7%82%B9%E5%87%BB%E8%BF%90%E8%A1%8C%E6%80%BB%E6%98%AF%E8%BF%9B%E5%85%A5Debug%E6%A8%A1%E5%BC%8F/">Android-Studio-点击运行总是进入Debug模式</a></li>  <li class="file"><a href="/wiki/Android%20Application/Android%E6%97%A5%E5%B8%B8%E9%97%AE%E9%A2%98/Android%E8%BF%9B%E7%A8%8B%E4%BF%9D%E6%B4%BB-%E6%81%AF%E5%B1%8F%E5%90%8E%E5%90%8E%E5%8F%B0%E4%BF%9D%E6%8C%81%E5%AE%9A%E4%BD%8D%E3%80%81%E7%BD%91%E7%BB%9C%E8%BF%90%E8%A1%8C/">Android进程保活-息屏后后台保持定位、网络运行</a></li>  <li class="file"><a href="/wiki/Android%20Application/Android%E6%97%A5%E5%B8%B8%E9%97%AE%E9%A2%98/DatePickerDialog--setMinDate-setMaxDate%E5%90%8E%E6%A0%87%E9%A2%98%E9%9A%8F%E7%9D%80%E5%8F%98%E5%8C%96-%EF%BC%88%E5%8E%BB%E6%8E%89%E6%A0%87%E9%A2%98%EF%BC%89/">DatePickerDialog--setMinDate-setMaxDate后标题随着变化-（去掉标题）</a></li>  <li class="file"><a href="/wiki/Android%20Application/Android%E6%97%A5%E5%B8%B8%E9%97%AE%E9%A2%98/recyclerview-smoothScrollToPosition()%E5%B9%B3%E6%BB%91%E5%A4%B1%E6%95%88-%E6%9C%AA%E8%B5%B7%E6%95%88%E6%9E%9C/">Recyclerview-smoothScrollToPosition()平滑失效-未起效果</a></li>  <li class="file"><a href="/wiki/Android%20Application/Android%E6%97%A5%E5%B8%B8%E9%97%AE%E9%A2%98/%E8%BD%AF%E9%94%AE%E7%9B%98%E5%BC%B9%E5%87%BA%E5%90%8E%E5%B8%83%E5%B1%80%E4%B8%8A%E7%A7%BB/">软键盘弹出后布局上移</a></li>  <li class="file"><a href="/wiki/Android%20Application/Android%E6%97%A5%E5%B8%B8%E9%97%AE%E9%A2%98/studio%E6%8F%92%E4%BB%B6%E4%B8%8B%E8%BD%BD%E6%85%A2%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95/">Studio插件下载慢解决方法</a></li>  </ul> 
                    </li> 
                    
                    <li class="directory">
                        <a href="#" data-role="directory">
                            <i class="fa fa-folder"></i>
                            &nbsp;
                            Material-Design新控件
                        </a>
                         <ul class="unstyled" id="tree" >  <li class="file"><a href="/wiki/Android%20Application/Material-Design%E6%96%B0%E6%8E%A7%E4%BB%B6/AppbarLayout/">AppbarLayout</a></li>  <li class="file"><a href="/wiki/Android%20Application/Material-Design%E6%96%B0%E6%8E%A7%E4%BB%B6/Chronometer%E8%AE%A1%E6%97%B6%E5%99%A8/">Chronometer计时器</a></li>  <li class="file"><a href="/wiki/Android%20Application/Material-Design%E6%96%B0%E6%8E%A7%E4%BB%B6/FloatingActionButton(%E6%82%AC%E6%B5%AE%E6%8C%89%E9%92%AE)/">FloatingActionButton(悬浮按钮)</a></li>  <li class="file"><a href="/wiki/Android%20Application/Material-Design%E6%96%B0%E6%8E%A7%E4%BB%B6/Snackbar/">Snackbar</a></li>  <li class="file"><a href="/wiki/Android%20Application/Material-Design%E6%96%B0%E6%8E%A7%E4%BB%B6/SwitchCompat/">SwitchCompat</a></li>  <li class="file"><a href="/wiki/Android%20Application/Material-Design%E6%96%B0%E6%8E%A7%E4%BB%B6/TabLayout/">TabLayout</a></li>  <li class="file"><a href="/wiki/Android%20Application/Material-Design%E6%96%B0%E6%8E%A7%E4%BB%B6/TextInputLayout/">TextInputLayout</a></li>  </ul> 
                    </li> 
                    
                    <li class="directory">
                        <a href="#" data-role="directory">
                            <i class="fa fa-folder"></i>
                            &nbsp;
                            android-https双向验证
                        </a>
                         <ul class="unstyled" id="tree" >  <li class="file"><a href="/wiki/Android%20Application/android-https%E5%8F%8C%E5%90%91%E9%AA%8C%E8%AF%81/Glide-okhttps%E8%AF%81%E4%B9%A6%E9%AA%8C%E8%AF%81%E5%85%A8%E5%B1%80%E9%85%8D%E7%BD%AE/">Glide-Okhttps证书验证全局配置</a></li>  <li class="file"><a href="/wiki/Android%20Application/android-https%E5%8F%8C%E5%90%91%E9%AA%8C%E8%AF%81/P12%E8%AF%81%E4%B9%A6%E8%BD%ACBKS%E8%AF%81%E4%B9%A6/">P12证书转BKS证书</a></li>  <li class="file"><a href="/wiki/Android%20Application/android-https%E5%8F%8C%E5%90%91%E9%AA%8C%E8%AF%81/android-https%E5%8F%8C%E5%90%91%E9%AA%8C%E8%AF%81-%E6%80%BB%E7%BB%93/">Android-Https双向验证-总结</a></li>  <li class="file"><a href="/wiki/Android%20Application/android-https%E5%8F%8C%E5%90%91%E9%AA%8C%E8%AF%81/android-okhttps%E5%8F%8C%E5%90%91%E9%AA%8C%E8%AF%81/">Android-Okhttps双向验证</a></li>  <li class="file"><a href="/wiki/Android%20Application/android-https%E5%8F%8C%E5%90%91%E9%AA%8C%E8%AF%81/android-webView%E7%9A%84%E5%8F%8C%E5%90%91%E9%AA%8C%E8%AF%81/">Android-webView的双向验证</a></li>  <li class="file"><a href="/wiki/Android%20Application/android-https%E5%8F%8C%E5%90%91%E9%AA%8C%E8%AF%81/android-%E5%8D%95%E5%8F%8C%E5%90%91%E9%AA%8C%E8%AF%81%E7%9F%A5%E8%AF%86%E7%82%B9/">Android-单双向验证知识点</a></li>  <li class="file"><a href="/wiki/Android%20Application/android-https%E5%8F%8C%E5%90%91%E9%AA%8C%E8%AF%81/android%E8%8E%B7%E5%8F%96%E8%AF%81%E4%B9%A6%E6%96%87%E4%BB%B6/">Android获取证书文件</a></li>  <li class="file"><a href="/wiki/Android%20Application/android-https%E5%8F%8C%E5%90%91%E9%AA%8C%E8%AF%81/https%E5%8F%8C%E5%90%91%E8%AE%A4%E8%AF%81%E8%AF%81%E4%B9%A6%E7%94%9F%E6%88%90/">Https双向认证证书生成</a></li>  <li class="file"><a href="/wiki/Android%20Application/android-https%E5%8F%8C%E5%90%91%E9%AA%8C%E8%AF%81/phpstudy%E6%90%AD%E5%BB%BA%E6%9C%AC%E5%9C%B0%E6%9C%8D%E5%8A%A1%E5%99%A8/">Phpstudy搭建本地服务器</a></li>  <li class="file"><a href="/wiki/Android%20Application/android-https%E5%8F%8C%E5%90%91%E9%AA%8C%E8%AF%81/%E9%85%8D%E7%BD%AE%E5%AE%8C%E6%88%90%E5%90%8E%E7%9A%84%E6%B5%8B%E8%AF%95/">配置完成后的测试</a></li>  </ul> 
                    </li> 
                    
                    <li class="directory">
                        <a href="#" data-role="directory">
                            <i class="fa fa-folder"></i>
                            &nbsp;
                            android-加密-解密-数据压缩
                        </a>
                         <ul class="unstyled" id="tree" >  <li class="file"><a href="/wiki/Android%20Application/android-%E5%8A%A0%E5%AF%86-%E8%A7%A3%E5%AF%86-%E6%95%B0%E6%8D%AE%E5%8E%8B%E7%BC%A9/android-%E5%8E%9F%E7%94%9Fbase64/">Android-原生Base64</a></li>  <li class="file"><a href="/wiki/Android%20Application/android-%E5%8A%A0%E5%AF%86-%E8%A7%A3%E5%AF%86-%E6%95%B0%E6%8D%AE%E5%8E%8B%E7%BC%A9/10%E8%BF%9B%E5%88%B6%E8%BD%AC20%E8%BF%9B%E5%88%B6%EF%BC%88%E4%BB%BB%E6%84%8F%E8%BF%9B%E5%88%B6-%E8%87%AA%E5%AE%9A%E4%B9%89%E5%AD%97%E7%AC%A6%EF%BC%89/">10进制转20进制（任意进制-自定义字符）</a></li>  <li class="file"><a href="/wiki/Android%20Application/android-%E5%8A%A0%E5%AF%86-%E8%A7%A3%E5%AF%86-%E6%95%B0%E6%8D%AE%E5%8E%8B%E7%BC%A9/%E5%8E%8B%E7%BC%A9%E7%AE%97%E6%B3%95%E8%BF%9B%E8%A1%8C%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%8E%8B%E7%BC%A9/">压缩算法进行字符串压缩</a></li>  </ul> 
                    </li> 
                    
                    <li class="directory">
                        <a href="#" data-role="directory">
                            <i class="fa fa-folder"></i>
                            &nbsp;
                            rxjava2
                        </a>
                         <ul class="unstyled" id="tree" >  <li class="file"><a href="/wiki/Android%20Application/rxjava2/Rxjava2%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/">Rxjava2的基本使用</a></li>  <li class="file"><a href="/wiki/Android%20Application/rxjava2/rxjava2%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5/">Rxjava2基本概念</a></li>  </ul> 
                    </li> 
                     </ul> 
                    </li> 
                    
                    <li class="directory open">
                        <a href="#" data-role="directory">
                            <i class="fa fa-folder-open"></i>
                            &nbsp;
                            Android FrameWork
                        </a>
                         <ul class="unstyled" id="tree" > 
                    <li class="directory">
                        <a href="#" data-role="directory">
                            <i class="fa fa-folder"></i>
                            &nbsp;
                            Framework源码分析
                        </a>
                         <ul class="unstyled" id="tree" > 
                    <li class="directory">
                        <a href="#" data-role="directory">
                            <i class="fa fa-folder"></i>
                            &nbsp;
                            Android 13
                        </a>
                         <ul class="unstyled" id="tree" > 
                    <li class="directory">
                        <a href="#" data-role="directory">
                            <i class="fa fa-folder"></i>
                            &nbsp;
                            InPutManagerService
                        </a>
                         <ul class="unstyled" id="tree" >  <li class="file"><a href="/wiki/Android%20FrameWork/Framework%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90/Android%2013/InPutManagerService/3.InputReader%E4%BA%8B%E4%BB%B6%E5%A4%84%E7%90%86/">3.InputReader事件处理</a></li>  <li class="file"><a href="/wiki/Android%20FrameWork/Framework%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90/Android%2013/InPutManagerService/1.InputFlinger%E7%9A%84%E5%90%AF%E5%8A%A8/">1.InputFlinger的启动</a></li>  <li class="file"><a href="/wiki/Android%20FrameWork/Framework%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90/Android%2013/InPutManagerService/2.EventHub%E8%8E%B7%E5%8F%96%E4%BA%8B%E4%BB%B6/">2.EventHub获取事件</a></li>  <li class="file"><a href="/wiki/Android%20FrameWork/Framework%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90/Android%2013/InPutManagerService/4.InputDispatcher%E4%BA%8B%E4%BB%B6%E5%88%86%E5%8F%91/">4.InputDispatcher事件分发</a></li>  <li class="file"><a href="/wiki/Android%20FrameWork/Framework%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90/Android%2013/InPutManagerService/5.%E8%A7%A6%E6%91%B8%E4%BA%8B%E4%BB%B6%E5%9C%A8%E5%BA%94%E7%94%A8%E8%BF%9B%E7%A8%8B%E7%9A%84%E5%88%86%E5%8F%91%E5%92%8C%E5%A4%84%E7%90%86/">5.触摸事件在应用进程的分发和处理</a></li>  </ul> 
                    </li> 
                    
                    <li class="directory">
                        <a href="#" data-role="directory">
                            <i class="fa fa-folder"></i>
                            &nbsp;
                            WMSAMS
                        </a>
                         <ul class="unstyled" id="tree" >  <li class="file"><a href="/wiki/Android%20FrameWork/Framework%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90/Android%2013/WMSAMS/1.%E7%AA%97%E5%8F%A3%E5%B1%82%E7%BA%A7%20_%E5%AE%B9%E5%99%A8%E7%B1%BB/">1.窗口层级 _容器类</a></li>  <li class="file"><a href="/wiki/Android%20FrameWork/Framework%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90/Android%2013/WMSAMS/2.%E7%AA%97%E5%8F%A3%E5%B1%82%E7%BA%A7%20_%E5%B1%82%E7%BA%A7%E7%BB%93%E6%9E%84%E6%A0%91%E7%9A%84%E6%9E%84%E5%BB%BA/">2.窗口层级 _层级结构树的构建</a></li>  <li class="file"><a href="/wiki/Android%20FrameWork/Framework%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90/Android%2013/WMSAMS/3.%E7%AA%97%E5%8F%A3%E5%B1%82%E7%BA%A7_%E5%B1%82%E7%BA%A7%E7%BB%93%E6%9E%84%E6%A0%91%E6%B7%BB%E5%8A%A0%E7%AA%97%E5%8F%A3/">3.窗口层级_层级结构树添加窗口</a></li>  <li class="file"><a href="/wiki/Android%20FrameWork/Framework%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90/Android%2013/WMSAMS/4.WMS%E7%AA%97%E5%8F%A3%E7%9B%B8%E5%85%B3%E6%B5%81%E7%A8%8B/"></a></li>  </ul> 
                    </li> 
                     <li class="file"><a href="/wiki/Android%20FrameWork/Framework%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90/Android%2013/1.android13%E5%90%AF%E5%8A%A8%E6%B5%81%E7%A8%8B%E4%B9%8BSeLinux%E6%9D%83%E9%99%90%E4%BB%8B%E7%BB%8D/">1.Android13启动流程之SeLinux权限介绍.md</a></li>  <li class="file"><a href="/wiki/Android%20FrameWork/Framework%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90/Android%2013/2.Android13%E5%90%AF%E5%8A%A8%E6%B5%81%E7%A8%8B%E4%B9%8BFirstStageMain%E9%98%B6%E6%AE%B5/">2.Android13启动流程之FirstStageMain阶段</a></li>  <li class="file"><a href="/wiki/Android%20FrameWork/Framework%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90/Android%2013/3.Android13%E5%90%AF%E5%8A%A8%E6%B5%81%E7%A8%8B%E4%B9%8BSecondStageMain%E9%98%B6%E6%AE%B5/">3.Android13启动流程之SecondStageMain阶段</a></li>  <li class="file"><a href="/wiki/Android%20FrameWork/Framework%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90/Android%2013/4.Android13%E5%90%AF%E5%8A%A8%E6%B5%81%E7%A8%8B%E4%B9%8BZygote%E5%92%8CSystemServer%E5%90%AF%E5%8A%A8%E6%B5%81%E7%A8%8B/">4.Android13启动流程之Zygote和SystemServer启动流程</a></li>  <li class="file"><a href="/wiki/Android%20FrameWork/Framework%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90/Android%2013/5.Android13%E5%90%AF%E5%8A%A8%E6%B5%81%E7%A8%8B%E4%B9%8BSystemServer%E5%86%85%E9%83%A8%E9%80%BB%E8%BE%91%E5%88%86%E6%9E%90/">5.android13启动流程之SystemServer内部逻辑分析.md</a></li>  <li class="file"><a href="/wiki/Android%20FrameWork/Framework%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90/Android%2013/6.PowerManagerService%E5%90%AF%E5%8A%A8%E6%B5%81%E7%A8%8B%E5%92%8C%E6%A0%B8%E5%BF%83%E6%96%B9%E6%B3%95/">6.PowerManagerService启动流程和核心方法</a></li>  <li class="file"><a href="/wiki/Android%20FrameWork/Framework%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90/Android%2013/7.%E7%82%B9%E5%87%BB%E6%A1%8C%E9%9D%A2APP%E5%9B%BE%E6%A0%87%EF%BC%8C%E5%88%B0APP%E7%95%8C%E9%9D%A2%E6%98%BE%E7%A4%BA%E6%B5%81%E7%A8%8B%E5%88%86%E6%9E%90(%E4%B8%80)/">7.点击桌面APP图标，到APP界面显示流程分析</a></li>  <li class="file"><a href="/wiki/Android%20FrameWork/Framework%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90/Android%2013/8.%E7%82%B9%E5%87%BB%E6%A1%8C%E9%9D%A2APP%E5%9B%BE%E6%A0%87%EF%BC%8C%E5%88%B0APP%E7%95%8C%E9%9D%A2%E6%98%BE%E7%A4%BA%E6%B5%81%E7%A8%8B%E5%88%86%E6%9E%90(%E4%BA%8C)/">8.点击桌面APP图标，到APP界面显示流程分析(二)</a></li>  </ul> 
                    </li> 
                     </ul> 
                    </li> 
                    
                    <li class="directory">
                        <a href="#" data-role="directory">
                            <i class="fa fa-folder"></i>
                            &nbsp;
                            Framework相关
                        </a>
                         <ul class="unstyled" id="tree" >  <li class="file"><a href="/wiki/Android%20FrameWork/Framework%E7%9B%B8%E5%85%B3/1.Handler%E6%B6%88%E6%81%AF%E6%9C%BA%E5%88%B6%E5%8E%9F%E7%90%86%E8%A7%A3%E6%9E%90/">Handler消息机制原理解析</a></li>  <li class="file"><a href="/wiki/Android%20FrameWork/Framework%E7%9B%B8%E5%85%B3/2.Binder%E5%8E%9F%E7%90%86%E8%A7%A3%E6%9E%90/">Binder原理解析</a></li>  <li class="file"><a href="/wiki/Android%20FrameWork/Framework%E7%9B%B8%E5%85%B3/ANR%E7%9A%84%E4%BA%A7%E7%94%9F%E6%9C%BA%E5%88%B6/">ANR的产生机制</a></li>  <li class="file"><a href="/wiki/Android%20FrameWork/Framework%E7%9B%B8%E5%85%B3/SystemUI/">SystemUI</a></li>  </ul> 
                    </li> 
                     <li class="file"><a href="/wiki/Android%20FrameWork/LINUX%E5%9F%BA%E7%A1%80%E5%91%BD%E4%BB%A4/">LINUX基础命令</a></li>  <li class="file"><a href="/wiki/Android%20FrameWork/VIM%E4%BD%BF%E7%94%A8/">VIM使用</a></li>  <li class="file"><a href="/wiki/Android%20FrameWork/adb%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/">Adb常用命令</a></li>  <li class="file"><a href="/wiki/Android%20FrameWork/%E8%87%AA%E5%AE%9A%E4%B9%89%E6%9C%8D%E5%8A%A1/">自定义服务</a></li>  <li class="file"><a href="/wiki/Android%20FrameWork/%E4%BD%BF%E7%94%A8%20git%20add%20-p%20%E6%95%B4%E7%90%86%20patch/">使用Git Add -P 整理 Patch</a></li>  <li class="file"><a href="/wiki/Android%20FrameWork/dumpsys%E5%91%BD%E4%BB%A4%E7%94%A8%E6%B3%95/">Dumpsys命令用法</a></li>  <li class="file"><a href="/wiki/Android%20FrameWork/AOSP%20Repo%E5%91%BD%E4%BB%A4%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/">AOSP Repo 命令参考资料</a></li>  <li class="file"><a href="/wiki/Android%20FrameWork/ADB%E5%92%8CMonkey%E6%B5%8B%E8%AF%95/">ADB和Monkey测试</a></li>  <li class="file"><a href="/wiki/Android%20FrameWork/AOSP%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/">AOSP常用编译和查找命令文件</a></li>  <li class="file"><a href="/wiki/Android%20FrameWork/Eclipse%E5%AE%89%E8%A3%85%E6%95%99%E7%A8%8B/">Eclipse安装教程</a></li>  <li class="file"><a href="/wiki/Android%20FrameWork/Windows%E5%92%8CUbuntu%E5%8F%8C%E7%B3%BB%E7%BB%9F%E5%AE%89%E8%A3%85/">Windows和Ubuntu双系统安装</a></li>  <li class="file"><a href="/wiki/Android%20FrameWork/Android%20%E6%BA%90%E7%A0%81%E6%A0%B9%E7%9B%AE%E5%BD%95%E4%BB%8B%E7%BB%8D/">Android源码根目录介绍</a></li>  <li class="file"><a href="/wiki/Android%20FrameWork/Framework%E9%81%87%E5%88%B0%E7%9A%84%E9%97%AE%E9%A2%98/">Framework遇到的问题</a></li>  <li class="file"><a href="/wiki/Android%20FrameWork/%E5%AF%BC%E5%85%A5%E7%B3%BB%E7%BB%9F%E6%BA%90%E7%A0%81%E5%88%B0Studio/">导入系统源码到Studio</a></li>  <li class="file"><a href="/wiki/Android%20FrameWork/Linux%20%E8%AE%BE%E7%BD%AEswap/">Linux设置swap</a></li>  <li class="file"><a href="/wiki/Android%20FrameWork/wine%E5%AE%89%E8%A3%85%E5%8F%8A%E4%BD%BF%E7%94%A8/">Wine安装及使用</a></li>  <li class="file"><a href="/wiki/Android%20FrameWork/Selinux&SeAndroid/">Selinux&SeAndroid</a></li>  <li class="file active"><a href="/wiki/Android%20FrameWork/rc%E6%96%87%E4%BB%B6%E8%AF%AD%E6%B3%95%E8%A7%84%E5%88%99/">Rc文件语法规则</a></li>  <li class="file"><a href="/wiki/Android%20FrameWork/ASFP%20(android%20studio%20for%20platform)%E4%BD%BF%E7%94%A8/">ASFP (Android Studio for Platform)使用</a></li>  </ul> 
                    </li> 
                    
                    <li class="directory">
                        <a href="#" data-role="directory">
                            <i class="fa fa-folder"></i>
                            &nbsp;
                            Android进阶
                        </a>
                         <ul class="unstyled" id="tree" > 
                    <li class="directory">
                        <a href="#" data-role="directory">
                            <i class="fa fa-folder"></i>
                            &nbsp;
                            Jetpack
                        </a>
                         <ul class="unstyled" id="tree" >  <li class="file"><a href="/wiki/Android%E8%BF%9B%E9%98%B6/Jetpack/Jetpack%E6%9E%B6%E6%9E%84%E7%BB%84%E4%BB%B6%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E7%B2%BE%E9%80%9A/">Jetpack架构组件从入门到精通</a></li>  <li class="file"><a href="/wiki/Android%E8%BF%9B%E9%98%B6/Jetpack/1.LifeCycle/">1.LifeCycle</a></li>  <li class="file"><a href="/wiki/Android%E8%BF%9B%E9%98%B6/Jetpack/2.LiveData/">2.LiveData</a></li>  <li class="file"><a href="/wiki/Android%E8%BF%9B%E9%98%B6/Jetpack/3.DataBinding/">3.DataBinding</a></li>  <li class="file"><a href="/wiki/Android%E8%BF%9B%E9%98%B6/Jetpack/4.Dagger2/">4.Dagger2</a></li>  <li class="file"><a href="/wiki/Android%E8%BF%9B%E9%98%B6/Jetpack/5.ViewModle/">5.ViewModle</a></li>  <li class="file"><a href="/wiki/Android%E8%BF%9B%E9%98%B6/Jetpack/6.Room/">6.Room</a></li>  <li class="file"><a href="/wiki/Android%E8%BF%9B%E9%98%B6/Jetpack/7.Hilt/">7.Hilt</a></li>  <li class="file"><a href="/wiki/Android%E8%BF%9B%E9%98%B6/Jetpack/8.Paging/">8.Paging</a></li>  <li class="file"><a href="/wiki/Android%E8%BF%9B%E9%98%B6/Jetpack/9.WorkManager/">9.WorkManager</a></li>  <li class="file"><a href="/wiki/Android%E8%BF%9B%E9%98%B6/Jetpack/10.Navigation/">10.Navigation</a></li>  </ul> 
                    </li> 
                    
                    <li class="directory">
                        <a href="#" data-role="directory">
                            <i class="fa fa-folder"></i>
                            &nbsp;
                            NDK
                        </a>
                         <ul class="unstyled" id="tree" > 
                    <li class="directory">
                        <a href="#" data-role="directory">
                            <i class="fa fa-folder"></i>
                            &nbsp;
                            Android进阶之旅
                        </a>
                         <ul class="unstyled" id="tree" >  <li class="file"><a href="/wiki/Android%E8%BF%9B%E9%98%B6/NDK/Android%E8%BF%9B%E9%98%B6%E4%B9%8B%E6%97%85/12_makefile/">12_makefile</a></li>  <li class="file"><a href="/wiki/Android%E8%BF%9B%E9%98%B6/NDK/Android%E8%BF%9B%E9%98%B6%E4%B9%8B%E6%97%85/16_1_Cmake%E8%AF%AD%E6%B3%95/">16_1_Cmake语法</a></li>  <li class="file"><a href="/wiki/Android%E8%BF%9B%E9%98%B6/NDK/Android%E8%BF%9B%E9%98%B6%E4%B9%8B%E6%97%85/16_2_Cmake%E9%A1%B9%E7%9B%AE%E5%B8%B8%E7%94%A8/">16_2_Cmake项目常用</a></li>  <li class="file"><a href="/wiki/Android%E8%BF%9B%E9%98%B6/NDK/Android%E8%BF%9B%E9%98%B6%E4%B9%8B%E6%97%85/19_NDK%E9%9D%A2%E8%AF%95%E9%A2%98/">19_NDK面试题</a></li>  <li class="file"><a href="/wiki/Android%E8%BF%9B%E9%98%B6/NDK/Android%E8%BF%9B%E9%98%B6%E4%B9%8B%E6%97%85/11_%E7%BC%96%E8%AF%91%E6%B5%81%E7%A8%8B%E8%AF%A6%E8%A7%A3%E9%9D%99%E6%80%81%E5%BA%93%E4%B8%8E%E5%8A%A8%E6%80%81%E5%BA%93%E5%8E%9F%E7%90%86/">11_编译流程详解/静态库与动态库原理.md</a></li>  <li class="file"><a href="/wiki/Android%E8%BF%9B%E9%98%B6/NDK/Android%E8%BF%9B%E9%98%B6%E4%B9%8B%E6%97%85/13_android.mk/">13_android.mk</a></li>  <li class="file"><a href="/wiki/Android%E8%BF%9B%E9%98%B6/NDK/Android%E8%BF%9B%E9%98%B6%E4%B9%8B%E6%97%85/14_Application.mk/">14_Application.mk</a></li>  <li class="file"><a href="/wiki/Android%E8%BF%9B%E9%98%B6/NDK/Android%E8%BF%9B%E9%98%B6%E4%B9%8B%E6%97%85/15_Android.mk%E5%92%8CAndroid.bp%E5%AF%B9%E5%BA%94%E5%85%B3%E7%B3%BB/">15_Android.mk和Android.bp对应关系.md</a></li>  <li class="file"><a href="/wiki/Android%E8%BF%9B%E9%98%B6/NDK/Android%E8%BF%9B%E9%98%B6%E4%B9%8B%E6%97%85/17_Shell%E8%84%9A%E6%9C%AC/">17_Shell脚本</a></li>  <li class="file"><a href="/wiki/Android%E8%BF%9B%E9%98%B6/NDK/Android%E8%BF%9B%E9%98%B6%E4%B9%8B%E6%97%85/18_NDK%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/">18_NDK环境配置</a></li>  <li class="file"><a href="/wiki/Android%E8%BF%9B%E9%98%B6/NDK/Android%E8%BF%9B%E9%98%B6%E4%B9%8B%E6%97%85/1_c%E5%9F%BA%E7%A1%80/">1_c基础</a></li>  <li class="file"><a href="/wiki/Android%E8%BF%9B%E9%98%B6/NDK/Android%E8%BF%9B%E9%98%B6%E4%B9%8B%E6%97%85/3_jni_native%E5%B1%82%E6%9E%84%E5%BB%BAjava%E5%AF%B9%E8%B1%A1/">3_jni_native层构建java对象</a></li>  <li class="file"><a href="/wiki/Android%E8%BF%9B%E9%98%B6/NDK/Android%E8%BF%9B%E9%98%B6%E4%B9%8B%E6%97%85/2_jni%E5%9F%BA%E7%A1%80/"></a></li>  <li class="file"><a href="/wiki/Android%E8%BF%9B%E9%98%B6/NDK/Android%E8%BF%9B%E9%98%B6%E4%B9%8B%E6%97%85/4_jni_%E6%95%B0%E7%BB%84%E7%9A%84%E7%BB%86%E8%8A%82%E5%A4%84%E7%90%86/">4_jni_数组的细节处理</a></li>  <li class="file"><a href="/wiki/Android%E8%BF%9B%E9%98%B6/NDK/Android%E8%BF%9B%E9%98%B6%E4%B9%8B%E6%97%85/5_c%E8%BF%9B%E9%98%B6_%E5%86%85%E5%AD%98%E5%9B%9B%E9%A9%B1%E6%A8%A1%E5%9E%8B/">5_c进阶_内存四驱模型</a></li>  <li class="file"><a href="/wiki/Android%E8%BF%9B%E9%98%B6/NDK/Android%E8%BF%9B%E9%98%B6%E4%B9%8B%E6%97%85/7_%E9%93%B6%E8%A1%8C%E5%8D%A1%E8%AF%86%E5%88%AB/">7_银行卡识别.md</a></li>  <li class="file"><a href="/wiki/Android%E8%BF%9B%E9%98%B6/NDK/Android%E8%BF%9B%E9%98%B6%E4%B9%8B%E6%97%85/6_c++%E5%9F%BA%E7%A1%80/">6_c++基础</a></li>  <li class="file"><a href="/wiki/Android%E8%BF%9B%E9%98%B6/NDK/Android%E8%BF%9B%E9%98%B6%E4%B9%8B%E6%97%85/8_%E7%AE%97%E6%B3%95/">8_算法</a></li>  <li class="file"><a href="/wiki/Android%E8%BF%9B%E9%98%B6/NDK/Android%E8%BF%9B%E9%98%B6%E4%B9%8B%E6%97%85/9_%E9%9F%B3%E8%A7%86%E9%A2%91%E5%9F%BA%E7%A1%80/">9_音视频基础</a></li>  <li class="file"><a href="/wiki/Android%E8%BF%9B%E9%98%B6/NDK/Android%E8%BF%9B%E9%98%B6%E4%B9%8B%E6%97%85/20.jni%E6%96%B9%E6%B3%95%E5%A4%A7%E5%85%A8%E5%8F%8A%E4%BD%BF%E7%94%A8%E7%A4%BA%E4%BE%8B/">20.jni方法大全及使用示例</a></li>  </ul> 
                    </li> 
                    
                    <li class="directory">
                        <a href="#" data-role="directory">
                            <i class="fa fa-folder"></i>
                            &nbsp;
                            蒋超大佬扫盲
                        </a>
                         <ul class="unstyled" id="tree" >  <li class="file"><a href="/wiki/Android%E8%BF%9B%E9%98%B6/NDK/%E8%92%8B%E8%B6%85%E5%A4%A7%E4%BD%AC%E6%89%AB%E7%9B%B2/1.%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/">1.基础知识</a></li>  <li class="file"><a href="/wiki/Android%E8%BF%9B%E9%98%B6/NDK/%E8%92%8B%E8%B6%85%E5%A4%A7%E4%BD%AC%E6%89%AB%E7%9B%B2/CMake%E8%AF%AD%E6%B3%95/">CMake语法</a></li>  <li class="file"><a href="/wiki/Android%E8%BF%9B%E9%98%B6/NDK/%E8%92%8B%E8%B6%85%E5%A4%A7%E4%BD%AC%E6%89%AB%E7%9B%B2/2.Cmake%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/">2.Cmake基础知识</a></li>  <li class="file"><a href="/wiki/Android%E8%BF%9B%E9%98%B6/NDK/%E8%92%8B%E8%B6%85%E5%A4%A7%E4%BD%AC%E6%89%AB%E7%9B%B2/3.JNI%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/">3.JNI数据类型</a></li>  <li class="file"><a href="/wiki/Android%E8%BF%9B%E9%98%B6/NDK/%E8%92%8B%E8%B6%85%E5%A4%A7%E4%BD%AC%E6%89%AB%E7%9B%B2/4.JavaVM/">JavaVM</a></li>  <li class="file"><a href="/wiki/Android%E8%BF%9B%E9%98%B6/NDK/%E8%92%8B%E8%B6%85%E5%A4%A7%E4%BD%AC%E6%89%AB%E7%9B%B2/5.OPUS%E7%BC%96%E8%AF%91/">5.opus编译</a></li>  <li class="file"><a href="/wiki/Android%E8%BF%9B%E9%98%B6/NDK/%E8%92%8B%E8%B6%85%E5%A4%A7%E4%BD%AC%E6%89%AB%E7%9B%B2/6.libusb/">6.libusb</a></li>  <li class="file"><a href="/wiki/Android%E8%BF%9B%E9%98%B6/NDK/%E8%92%8B%E8%B6%85%E5%A4%A7%E4%BD%AC%E6%89%AB%E7%9B%B2/7.mmkv%E7%BC%96%E8%AF%91/">7.mmkv编译</a></li>  <li class="file"><a href="/wiki/Android%E8%BF%9B%E9%98%B6/NDK/%E8%92%8B%E8%B6%85%E5%A4%A7%E4%BD%AC%E6%89%AB%E7%9B%B2/8.mqtt/">8.mqtt</a></li>  <li class="file"><a href="/wiki/Android%E8%BF%9B%E9%98%B6/NDK/%E8%92%8B%E8%B6%85%E5%A4%A7%E4%BD%AC%E6%89%AB%E7%9B%B2/9.%E5%87%BD%E6%95%B0%E7%AD%BE%E5%90%8D%E5%8F%8Andk%E8%B0%83%E7%94%A8java%E6%96%B9%E6%B3%95/">9.函数签名及ndk调用java方法</a></li>  <li class="file"><a href="/wiki/Android%E8%BF%9B%E9%98%B6/NDK/%E8%92%8B%E8%B6%85%E5%A4%A7%E4%BD%AC%E6%89%AB%E7%9B%B2/10.%E7%BA%BF%E7%A8%8B/">10.线程</a></li>  </ul> 
                    </li> 
                     </ul> 
                    </li> 
                    
                    <li class="directory">
                        <a href="#" data-role="directory">
                            <i class="fa fa-folder"></i>
                            &nbsp;
                            性能优化
                        </a>
                         <ul class="unstyled" id="tree" >  <li class="file"><a href="/wiki/Android%E8%BF%9B%E9%98%B6/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/leakcanary%E7%9A%84%E4%BD%BF%E7%94%A8/">Leakcanary的使用</a></li>  <li class="file"><a href="/wiki/Android%E8%BF%9B%E9%98%B6/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/1.App%E6%80%A7%E8%83%BD%E6%A6%82%E8%A7%88%E4%B8%8E%E5%B9%B3%E5%8F%B0%E5%8C%96%E5%AE%9E%E8%B7%B5/">1.App性能概览与平台化实践</a></li>  <li class="file"><a href="/wiki/Android%E8%BF%9B%E9%98%B6/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/2.App%E5%90%AF%E5%8A%A8%E4%BC%98%E5%8C%96/">2.App启动优化</a></li>  <li class="file"><a href="/wiki/Android%E8%BF%9B%E9%98%B6/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/3.%E5%86%85%E5%AD%98%E4%BC%98%E5%8C%96/">3.内存优化</a></li>  <li class="file"><a href="/wiki/Android%E8%BF%9B%E9%98%B6/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/4.%E5%B8%83%E5%B1%80%E4%BC%98%E5%8C%96/">4.布局优化</a></li>  <li class="file"><a href="/wiki/Android%E8%BF%9B%E9%98%B6/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/5.%E5%8D%A1%E9%A1%BF%E4%BC%98%E5%8C%96/">5.卡顿优化</a></li>  <li class="file"><a href="/wiki/Android%E8%BF%9B%E9%98%B6/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/6.%E7%BA%BF%E7%A8%8B%E4%BC%98%E5%8C%96/">6.线程优化</a></li>  <li class="file"><a href="/wiki/Android%E8%BF%9B%E9%98%B6/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/7.%E7%BD%91%E7%BB%9C%E4%BC%98%E5%8C%96/">7.网络优化</a></li>  <li class="file"><a href="/wiki/Android%E8%BF%9B%E9%98%B6/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/8.%E7%94%B5%E9%87%8F%E4%BC%98%E5%8C%96/">8.电量优化</a></li>  <li class="file"><a href="/wiki/Android%E8%BF%9B%E9%98%B6/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/9.%E7%98%A6%E8%BA%AB%E4%BC%98%E5%8C%96/">9.瘦身优化</a></li>  <li class="file"><a href="/wiki/Android%E8%BF%9B%E9%98%B6/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/10.%E7%A8%B3%E5%AE%9A%E6%80%A7%E4%BC%98%E5%8C%96/">10.稳定性优化</a></li>  <li class="file"><a href="/wiki/Android%E8%BF%9B%E9%98%B6/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/11.%E4%B8%93%E9%A1%B9%E6%8A%80%E6%9C%AF%E4%BC%98%E5%8C%96/">11.专项技术优化</a></li>  </ul> 
                    </li> 
                     <li class="file"><a href="/wiki/Android%E8%BF%9B%E9%98%B6/java%20%E5%8F%8D%E5%B0%84%E5%8F%8A%E4%BB%A3%E7%90%86%E6%A8%A1%E5%BC%8F%E5%88%9D%E6%AD%A5%E5%AD%A6%E4%B9%A0/">Java 反射及代理模式初步学习</a></li>  <li class="file"><a href="/wiki/Android%E8%BF%9B%E9%98%B6/%E7%BD%91%E7%BB%9C%E8%AF%B7%E6%B1%82%E5%BA%93Retrofit/">网络请求库Retrofit</a></li>  </ul> 
                    </li> 
                    
                    <li class="directory">
                        <a href="#" data-role="directory">
                            <i class="fa fa-folder"></i>
                            &nbsp;
                            C++
                        </a>
                         <ul class="unstyled" id="tree" > 
                    <li class="directory">
                        <a href="#" data-role="directory">
                            <i class="fa fa-folder"></i>
                            &nbsp;
                            C++教程从0到1入门编程
                        </a>
                         <ul class="unstyled" id="tree" >  <li class="file"><a href="/wiki/C++/C++%E6%95%99%E7%A8%8B%E4%BB%8E0%E5%88%B01%E5%85%A5%E9%97%A8%E7%BC%96%E7%A8%8B/1.C++%E5%9F%BA%E7%A1%80/">C++基础</a></li>  <li class="file"><a href="/wiki/C++/C++%E6%95%99%E7%A8%8B%E4%BB%8E0%E5%88%B01%E5%85%A5%E9%97%A8%E7%BC%96%E7%A8%8B/2.C++%E6%8F%90%E9%AB%98/">C++提高</a></li>  <li class="file"><a href="/wiki/C++/C++%E6%95%99%E7%A8%8B%E4%BB%8E0%E5%88%B01%E5%85%A5%E9%97%A8%E7%BC%96%E7%A8%8B/3.C++%E6%A0%B8%E5%BF%83/">C++核心</a></li>  </ul> 
                    </li> 
                     <li class="file"><a href="/wiki/C++/window%E7%B3%BB%E7%BB%9F_vscode%E4%B8%AD%E9%85%8D%E7%BD%AE%20c++%E7%8E%AF%E5%A2%83/">Vscode中配置 C++环境</a></li>  <li class="file"><a href="/wiki/C++/%E8%BD%BB%E6%9D%BE%E6%90%9E%E5%AE%9AC++%E8%AF%AD%E8%A8%80/">轻松搞定C++语言</a></li>  <li class="file"><a href="/wiki/C++/%E8%BD%BB%E6%9D%BE%E6%90%9E%E5%AE%9AC%E8%AF%AD%E8%A8%80(%E6%8F%90%E9%AB%98%E7%AF%87)/">轻松搞定C语言(提高篇)</a></li>  <li class="file"><a href="/wiki/C++/%E5%BD%BB%E5%BA%95%E6%90%9E%E5%AE%9AC%E6%8C%87%E9%92%88/">彻底搞定C指针</a></li>  <li class="file"><a href="/wiki/C++/Linux%E7%B3%BB%E7%BB%9F_vscode%E4%B8%AD%E9%85%8D%E7%BD%AE%20c++%E7%8E%AF%E5%A2%83/">Linux系统_vscode中配置 c++环境.md</a></li>  </ul> 
                    </li> 
                    
                    <li class="directory">
                        <a href="#" data-role="directory">
                            <i class="fa fa-folder"></i>
                            &nbsp;
                            其他笔记
                        </a>
                         <ul class="unstyled" id="tree" > 
                    <li class="directory">
                        <a href="#" data-role="directory">
                            <i class="fa fa-folder"></i>
                            &nbsp;
                            Flutter
                        </a>
                         <ul class="unstyled" id="tree" >  <li class="file"><a href="/wiki/%E5%85%B6%E4%BB%96%E7%AC%94%E8%AE%B0/Flutter/Android-Studio%E9%85%8D%E7%BD%AEFlutter/">Android-Studio配置Flutter</a></li>  <li class="file"><a href="/wiki/%E5%85%B6%E4%BB%96%E7%AC%94%E8%AE%B0/Flutter/Flutter(Android-%E6%B7%B7%E5%90%88%E5%BC%80%E5%8F%91)/">Flutter(Android-混合开发)</a></li>  <li class="file"><a href="/wiki/%E5%85%B6%E4%BB%96%E7%AC%94%E8%AE%B0/Flutter/Flutter-Decoration%E8%83%8C%E6%99%AF%E8%AE%BE%E5%AE%9A%EF%BC%88%E8%BE%B9%E6%A1%86%E3%80%81%E5%9C%86%E8%A7%92%E3%80%81%E9%98%B4%E5%BD%B1%E3%80%81%E5%BD%A2%E7%8A%B6%E3%80%81%E6%B8%90%E5%8F%98%E3%80%81%E8%83%8C%E6%99%AF%E5%9B%BE%E5%83%8F%E7%AD%89%EF%BC%89/">Flutter-Decoration背景设定（边框、圆角、阴影、形状、渐变、背景图像等）</a></li>  <li class="file"><a href="/wiki/%E5%85%B6%E4%BB%96%E7%AC%94%E8%AE%B0/Flutter/Flutter-%E7%9B%AE%E5%BD%95%E7%BB%93%E6%9E%84%E5%92%8C%E9%A1%B9%E7%9B%AE%E8%B5%84%E6%BA%90/">Flutter-目录结构和项目资源</a></li>  <li class="file"><a href="/wiki/%E5%85%B6%E4%BB%96%E7%AC%94%E8%AE%B0/Flutter/Flutter%E4%B8%AD%E7%9A%84%E6%89%8B%E5%8A%BF%E5%A4%84%E7%90%86/">Flutter中的手势处理</a></li>  <li class="file"><a href="/wiki/%E5%85%B6%E4%BB%96%E7%AC%94%E8%AE%B0/Flutter/Flutter%E4%B9%8BScaffold/">Flutter之Scaffold</a></li>  <li class="file"><a href="/wiki/%E5%85%B6%E4%BB%96%E7%AC%94%E8%AE%B0/Flutter/Flutter-%E6%8E%A7%E4%BB%B6%E4%B9%8B-MaterialApp/">Flutter-控件之-MaterialApp</a></li>  <li class="file"><a href="/wiki/%E5%85%B6%E4%BB%96%E7%AC%94%E8%AE%B0/Flutter/Flutter%E4%BB%A3%E7%A0%81%E5%BC%80%E5%8F%91%E8%A7%84%E8%8C%83/">Flutter代码开发规范</a></li>  <li class="file"><a href="/wiki/%E5%85%B6%E4%BB%96%E7%AC%94%E8%AE%B0/Flutter/StatelessWidget%E5%92%8CStatefulWidget%E7%9A%84%E5%8C%BA%E5%88%AB/">StatelessWidget和StatefulWidget的区别</a></li>  <li class="file"><a href="/wiki/%E5%85%B6%E4%BB%96%E7%AC%94%E8%AE%B0/Flutter/flutter-BottomAppBar-%EF%BC%88%E4%B8%8D%E8%A7%84%E5%88%99%E5%BA%95%E9%83%A8%E5%B7%A5%E5%85%B7%E6%A0%8F%EF%BC%89/">Flutter-BottomAppBar-（不规则底部工具栏）</a></li>  <li class="file"><a href="/wiki/%E5%85%B6%E4%BB%96%E7%AC%94%E8%AE%B0/Flutter/flutter-BottomNavigationBar%E7%B1%BB/">Flutter-BottomNavigationBar类</a></li>  <li class="file"><a href="/wiki/%E5%85%B6%E4%BB%96%E7%AC%94%E8%AE%B0/Flutter/flutter-Chip/">Flutter-Chip</a></li>  <li class="file"><a href="/wiki/%E5%85%B6%E4%BB%96%E7%AC%94%E8%AE%B0/Flutter/flutter-ExpansionTile(%E9%97%AD%E5%90%88%E5%88%97%E8%A1%A8)/">Flutter-ExpansionTile(闭合列表)</a></li>  <li class="file"><a href="/wiki/%E5%85%B6%E4%BB%96%E7%AC%94%E8%AE%B0/Flutter/flutter-Flexible%E5%92%8C-Expanded/">Flutter-Flexible和-Expanded</a></li>  <li class="file"><a href="/wiki/%E5%85%B6%E4%BB%96%E7%AC%94%E8%AE%B0/Flutter/flutter-ListTile(06)/">Flutter-ListTile(06)</a></li>  <li class="file"><a href="/wiki/%E5%85%B6%E4%BB%96%E7%AC%94%E8%AE%B0/Flutter/flutter-Padding/">Flutter-Padding</a></li>  <li class="file"><a href="/wiki/%E5%85%B6%E4%BB%96%E7%AC%94%E8%AE%B0/Flutter/flutter-Stack(%E5%B1%82%E5%8F%A0%E6%8E%A7%E4%BB%B6)/">Flutter-Stack(层叠控件)</a></li>  <li class="file"><a href="/wiki/%E5%85%B6%E4%BB%96%E7%AC%94%E8%AE%B0/Flutter/flutter-Text(02)/">Flutter-Text(02)</a></li>  <li class="file"><a href="/wiki/%E5%85%B6%E4%BB%96%E7%AC%94%E8%AE%B0/Flutter/flutter-card%EF%BC%88%E5%8D%A1%E7%89%87%E5%B8%83%E5%B1%80%EF%BC%89/">Flutter-Card（卡片布局）</a></li>  <li class="file"><a href="/wiki/%E5%85%B6%E4%BB%96%E7%AC%94%E8%AE%B0/Flutter/flutter-gridView/">Flutter-gridView</a></li>  <li class="file"><a href="/wiki/%E5%85%B6%E4%BB%96%E7%AC%94%E8%AE%B0/Flutter/flutter-listview(07)/">Flutter-Listview(07)</a></li>  <li class="file"><a href="/wiki/%E5%85%B6%E4%BB%96%E7%AC%94%E8%AE%B0/Flutter/flutter-mainAxisAlignment%E5%92%8CcrossAxisAlignment/">Flutter-mainAxisAlignment和crossAxisAlignment</a></li>  <li class="file"><a href="/wiki/%E5%85%B6%E4%BB%96%E7%AC%94%E8%AE%B0/Flutter/flutter-%E5%8D%95%E9%80%89%E6%A1%86%E5%92%8C%E5%A4%8D%E9%80%89%E6%A1%86(05)/">Flutter-单选框和复选框(05)</a></li>  <li class="file"><a href="/wiki/%E5%85%B6%E4%BB%96%E7%AC%94%E8%AE%B0/Flutter/flutter-%E5%9B%BE%E7%89%87(04)/">Flutter-图片(04)</a></li>  <li class="file"><a href="/wiki/%E5%85%B6%E4%BB%96%E7%AC%94%E8%AE%B0/Flutter/flutter-%E5%AF%BC%E8%88%AA%E8%BF%94%E5%9B%9E%E6%8B%A6%E6%88%AAWillPopScope(%E9%98%B2%E8%AF%AF%E8%A7%A6)/">Flutter-导航返回拦截WillPopScope(防误触)</a></li>  <li class="file"><a href="/wiki/%E5%85%B6%E4%BB%96%E7%AC%94%E8%AE%B0/Flutter/flutter-%E5%B1%82%E5%8F%A0%E5%B8%83%E5%B1%80Stack%E3%80%81Positioned/">Flutter-层叠布局Stack、Positioned</a></li>  <li class="file"><a href="/wiki/%E5%85%B6%E4%BB%96%E7%AC%94%E8%AE%B0/Flutter/flutter-%E5%BC%B9%E6%80%A7%E5%B8%83%E5%B1%80Flex/">Flutter-弹性布局Flex</a></li>  <li class="file"><a href="/wiki/%E5%85%B6%E4%BB%96%E7%AC%94%E8%AE%B0/Flutter/flutter-%E6%8C%89%E9%92%AE(03)/">Flutter-按钮(03)</a></li>  <li class="file"><a href="/wiki/%E5%85%B6%E4%BB%96%E7%AC%94%E8%AE%B0/Flutter/flutter-%E6%B5%81%E5%BC%8F%E5%B8%83%E5%B1%80Wrap%E3%80%81Flow/">Flutter-流式布局Wrap、Flow</a></li>  <li class="file"><a href="/wiki/%E5%85%B6%E4%BB%96%E7%AC%94%E8%AE%B0/Flutter/flutter-%E7%BA%BF%E6%80%A7%E5%B8%83%E5%B1%80Row%E5%92%8CColumn-1/">Flutter-线性布局Row和Column-1</a></li>  <li class="file"><a href="/wiki/%E5%85%B6%E4%BB%96%E7%AC%94%E8%AE%B0/Flutter/flutter-%E7%BA%BF%E6%80%A7%E5%B8%83%E5%B1%80Row%E5%92%8CColumn/">Flutter-线性布局Row和Column</a></li>  <li class="file"><a href="/wiki/%E5%85%B6%E4%BB%96%E7%AC%94%E8%AE%B0/Flutter/flutter-%E8%BE%93%E5%85%A5%E6%A1%86%E5%92%8C%E6%A0%87%E7%82%B9/">Flutter-输入框和标点</a></li>  <li class="file"><a href="/wiki/%E5%85%B6%E4%BB%96%E7%AC%94%E8%AE%B0/Flutter/flutter-%E9%A2%9C%E8%89%B2%E6%B8%90%E5%8F%98/">Flutter-颜色渐变</a></li>  <li class="file"><a href="/wiki/%E5%85%B6%E4%BB%96%E7%AC%94%E8%AE%B0/Flutter/flutter%E5%9F%BA%E7%A1%80%E4%BD%BF%E7%94%A8(01)/">Flutter基础使用(01)</a></li>  <li class="file"><a href="/wiki/%E5%85%B6%E4%BB%96%E7%AC%94%E8%AE%B0/Flutter/flutter%E7%AE%80%E4%BB%8B/">Flutter简介</a></li>  </ul> 
                    </li> 
                    
                    <li class="directory">
                        <a href="#" data-role="directory">
                            <i class="fa fa-folder"></i>
                            &nbsp;
                            QT
                        </a>
                         <ul class="unstyled" id="tree" >  <li class="file"><a href="/wiki/%E5%85%B6%E4%BB%96%E7%AC%94%E8%AE%B0/QT/QT-Creator%E5%AE%89%E8%A3%85/">QT-Creator安装</a></li>  </ul> 
                    </li> 
                    
                    <li class="directory">
                        <a href="#" data-role="directory">
                            <i class="fa fa-folder"></i>
                            &nbsp;
                            svn配置及使用
                        </a>
                         <ul class="unstyled" id="tree" >  <li class="file"><a href="/wiki/%E5%85%B6%E4%BB%96%E7%AC%94%E8%AE%B0/svn%E9%85%8D%E7%BD%AE%E5%8F%8A%E4%BD%BF%E7%94%A8/svn%E4%B8%8B%E8%BD%BD%E8%BF%9C%E7%A8%8B%E4%BB%93%E5%BA%93/">Svn下载远程仓库</a></li>  <li class="file"><a href="/wiki/%E5%85%B6%E4%BB%96%E7%AC%94%E8%AE%B0/svn%E9%85%8D%E7%BD%AE%E5%8F%8A%E4%BD%BF%E7%94%A8/svn%E5%AE%A2%E6%88%B7%E7%AB%AF%E5%AE%89%E8%A3%85%E5%92%8C%E9%85%8D%E7%BD%AE/">Svn客户端安装和配置</a></li>  <li class="file"><a href="/wiki/%E5%85%B6%E4%BB%96%E7%AC%94%E8%AE%B0/svn%E9%85%8D%E7%BD%AE%E5%8F%8A%E4%BD%BF%E7%94%A8/svn%E6%9C%8D%E5%8A%A1%E7%AB%AF%E5%AE%89%E8%A3%85%E5%92%8C%E9%85%8D%E7%BD%AE/">Svn服务端安装和配置</a></li>  <li class="file"><a href="/wiki/%E5%85%B6%E4%BB%96%E7%AC%94%E8%AE%B0/svn%E9%85%8D%E7%BD%AE%E5%8F%8A%E4%BD%BF%E7%94%A8/svn%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C/">Svn的基本操作</a></li>  </ul> 
                    </li> 
                     <li class="file"><a href="/wiki/%E5%85%B6%E4%BB%96%E7%AC%94%E8%AE%B0/win11%E8%87%AA%E5%8A%A8%E5%85%B3%E6%9C%BA/">Win11自动关机</a></li>  <li class="file"><a href="/wiki/%E5%85%B6%E4%BB%96%E7%AC%94%E8%AE%B0/%E6%88%91%E7%9A%84%E7%AE%80%E5%8E%86/">我的简历</a></li>  <li class="file"><a href="/wiki/%E5%85%B6%E4%BB%96%E7%AC%94%E8%AE%B0/csdn%E6%96%87%E7%AB%A0%E5%AF%BC%E5%87%BAmarkdown/">Csdn文章导出到本地markdown</a></li>  </ul> 
                    </li> 
                     </ul> 
    </div>
    <script>
        $(document).ready(function() {
            var iconFolderOpenClass  = 'fa-folder-open';
            var iconFolderCloseClass = 'fa-folder';
            var iconAllExpandClass = 'fa-angle-double-down';
            var iconAllPackClass = 'fa-angle-double-up';
            // Handle directory-tree expansion:
            // 左键单独展开目录
            $(document).on('click', '#categories a[data-role="directory"]', function (event) {
                event.preventDefault();

                var icon = $(this).children('.fa');
                var expanded = icon.hasClass(iconFolderOpenClass);
                var subtree = $(this).siblings('ul');
                icon.removeClass(iconFolderOpenClass).removeClass(iconFolderCloseClass);
                if (expanded) {
                    if (typeof subtree != 'undefined') {
                        subtree.slideUp({ duration: 100 });
                    }
                    icon.addClass(iconFolderCloseClass);
                } else {
                    if (typeof subtree != 'undefined') {
                        subtree.slideDown({ duration: 100 });
                    }
                    icon.addClass(iconFolderOpenClass);
                }
            });
            // 右键展开下属所有目录
            $('#categories a[data-role="directory"]').bind("contextmenu", function(event){
                event.preventDefault();
                
                var icon = $(this).children('.fa');
                var expanded = icon.hasClass(iconFolderOpenClass);
                var listNode = $(this).siblings('ul');
                var subtrees = $.merge(listNode.find('li ul'), listNode);
                var icons = $.merge(listNode.find('.fa'), icon);
                icons.removeClass(iconFolderOpenClass).removeClass(iconFolderCloseClass);
                if(expanded) {
                    subtrees.slideUp({ duration: 100 });
                    icons.addClass(iconFolderCloseClass);
                } else {
                    subtrees.slideDown({ duration: 100 });
                    icons.addClass(iconFolderOpenClass);
                }
            })
            // 展开关闭所有目录按钮
            $(document).on('click', '#allExpand', function (event) {
                event.preventDefault();
                
                var icon = $(this).children('.fa');
                var expanded = icon.hasClass(iconAllExpandClass);
                icon.removeClass(iconAllExpandClass).removeClass(iconAllPackClass);
                if(expanded) {
                    $('#sidebar .fa.fa-folder').removeClass('fa-folder').addClass('fa-folder-open')
                    $('#categories li ul').slideDown({ duration: 100 });
                    icon.addClass(iconAllPackClass);
                } else {
                    $('#sidebar .fa.fa-folder-open').removeClass('fa-folder-open').addClass('fa-folder')
                    $('#categories li ul').slideUp({ duration: 100 });
                    icon.addClass(iconAllExpandClass);
                }
            });  
        });
    </script>

    
    <div id="toTop" class="fa fa-angle-up"></div>
</aside>
            
            <section id="main"><article id="post-Android FrameWork/rc文件语法规则" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
            <header class="article-header">
                
                    <div class="article-meta">
                        
    <div class="article-category">
    	<i class="fa fa-folder"></i>
        <a class="article-category-link" href="/categories/Android-FrameWork/">Android FrameWork</a>
    </div>

                        
                        
  



                        
                        
                    </div>
                
                
   

            </header>
        
        
        <div class="article-entry" itemprop="articleBody">
        
        
            
        
        
            <h3 id="解析init-rc脚本"><a href="#解析init-rc脚本" class="headerlink" title="解析init.rc脚本"></a>解析init.rc脚本</h3><h3 id="Android-Init-Language"><a href="#Android-Init-Language" class="headerlink" title="Android Init Language"></a>Android Init Language</h3><p>rc文件，是用Android Init Language编写的特殊文件。用这种语法编写的文件，统一用”.rc”后缀</p>
<p>它的语法说明可以在aosp源码<code>system/core/init/README.md</code>中找到:</p>
<p>system&#x2F;core&#x2F;init&#x2F;README.md原文：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br><span class="line">536</span><br><span class="line">537</span><br><span class="line">538</span><br><span class="line">539</span><br><span class="line">540</span><br><span class="line">541</span><br><span class="line">542</span><br><span class="line">543</span><br><span class="line">544</span><br><span class="line">545</span><br><span class="line">546</span><br><span class="line">547</span><br><span class="line">548</span><br><span class="line">549</span><br><span class="line">550</span><br><span class="line">551</span><br><span class="line">552</span><br><span class="line">553</span><br><span class="line">554</span><br><span class="line">555</span><br><span class="line">556</span><br><span class="line">557</span><br><span class="line">558</span><br><span class="line">559</span><br><span class="line">560</span><br><span class="line">561</span><br><span class="line">562</span><br><span class="line">563</span><br><span class="line">564</span><br><span class="line">565</span><br><span class="line">566</span><br><span class="line">567</span><br><span class="line">568</span><br><span class="line">569</span><br><span class="line">570</span><br><span class="line">571</span><br><span class="line">572</span><br><span class="line">573</span><br><span class="line">574</span><br><span class="line">575</span><br><span class="line">576</span><br><span class="line">577</span><br><span class="line">578</span><br><span class="line">579</span><br><span class="line">580</span><br><span class="line">581</span><br><span class="line">582</span><br><span class="line">583</span><br><span class="line">584</span><br><span class="line">585</span><br><span class="line">586</span><br><span class="line">587</span><br><span class="line">588</span><br><span class="line">589</span><br><span class="line">590</span><br><span class="line">591</span><br><span class="line">592</span><br><span class="line">593</span><br><span class="line">594</span><br><span class="line">595</span><br><span class="line">596</span><br><span class="line">597</span><br><span class="line">598</span><br><span class="line">599</span><br><span class="line">600</span><br><span class="line">601</span><br><span class="line">602</span><br><span class="line">603</span><br><span class="line">604</span><br><span class="line">605</span><br><span class="line">606</span><br><span class="line">607</span><br><span class="line">608</span><br><span class="line">609</span><br><span class="line">610</span><br><span class="line">611</span><br><span class="line">612</span><br><span class="line">613</span><br><span class="line">614</span><br><span class="line">615</span><br><span class="line">616</span><br><span class="line">617</span><br><span class="line">618</span><br><span class="line">619</span><br><span class="line">620</span><br><span class="line">621</span><br><span class="line">622</span><br><span class="line">623</span><br><span class="line">624</span><br><span class="line">625</span><br><span class="line">626</span><br><span class="line">627</span><br><span class="line">628</span><br><span class="line">629</span><br><span class="line">630</span><br><span class="line">631</span><br><span class="line">632</span><br><span class="line">633</span><br><span class="line">634</span><br><span class="line">635</span><br><span class="line">636</span><br><span class="line">637</span><br><span class="line">638</span><br><span class="line">639</span><br><span class="line">640</span><br><span class="line">641</span><br><span class="line">642</span><br><span class="line">643</span><br><span class="line">644</span><br><span class="line">645</span><br><span class="line">646</span><br><span class="line">647</span><br><span class="line">648</span><br><span class="line">649</span><br><span class="line">650</span><br><span class="line">651</span><br><span class="line">652</span><br><span class="line">653</span><br><span class="line">654</span><br><span class="line">655</span><br><span class="line">656</span><br><span class="line">657</span><br><span class="line">658</span><br><span class="line">659</span><br><span class="line">660</span><br><span class="line">661</span><br><span class="line">662</span><br><span class="line">663</span><br><span class="line">664</span><br><span class="line">665</span><br><span class="line">666</span><br><span class="line">667</span><br><span class="line">668</span><br><span class="line">669</span><br><span class="line">670</span><br><span class="line">671</span><br><span class="line">672</span><br><span class="line">673</span><br><span class="line">674</span><br><span class="line">675</span><br><span class="line">676</span><br><span class="line">677</span><br><span class="line">678</span><br><span class="line">679</span><br><span class="line">680</span><br><span class="line">681</span><br><span class="line">682</span><br><span class="line">683</span><br><span class="line">684</span><br><span class="line">685</span><br><span class="line">686</span><br><span class="line">687</span><br><span class="line">688</span><br><span class="line">689</span><br><span class="line">690</span><br><span class="line">691</span><br><span class="line">692</span><br><span class="line">693</span><br><span class="line">694</span><br><span class="line">695</span><br><span class="line">696</span><br><span class="line">697</span><br><span class="line">698</span><br><span class="line">699</span><br><span class="line">700</span><br><span class="line">701</span><br><span class="line">702</span><br><span class="line">703</span><br><span class="line">704</span><br><span class="line">705</span><br><span class="line">706</span><br><span class="line">707</span><br><span class="line">708</span><br><span class="line">709</span><br><span class="line">710</span><br><span class="line">711</span><br><span class="line">712</span><br><span class="line">713</span><br><span class="line">714</span><br><span class="line">715</span><br><span class="line">716</span><br><span class="line">717</span><br><span class="line">718</span><br><span class="line">719</span><br><span class="line">720</span><br><span class="line">721</span><br><span class="line">722</span><br><span class="line">723</span><br><span class="line">724</span><br><span class="line">725</span><br><span class="line">726</span><br><span class="line">727</span><br><span class="line">728</span><br><span class="line">729</span><br><span class="line">730</span><br><span class="line">731</span><br><span class="line">732</span><br><span class="line">733</span><br><span class="line">734</span><br><span class="line">735</span><br><span class="line">736</span><br><span class="line">737</span><br><span class="line">738</span><br><span class="line">739</span><br><span class="line">740</span><br><span class="line">741</span><br><span class="line">742</span><br><span class="line">743</span><br><span class="line">744</span><br><span class="line">745</span><br><span class="line">746</span><br><span class="line">747</span><br><span class="line">748</span><br><span class="line">749</span><br><span class="line">750</span><br><span class="line">751</span><br><span class="line">752</span><br><span class="line">753</span><br><span class="line">754</span><br><span class="line">755</span><br><span class="line">756</span><br><span class="line">757</span><br><span class="line">758</span><br><span class="line">759</span><br><span class="line">760</span><br><span class="line">761</span><br><span class="line">762</span><br><span class="line">763</span><br><span class="line">764</span><br><span class="line">765</span><br><span class="line">766</span><br><span class="line">767</span><br><span class="line">768</span><br><span class="line">769</span><br><span class="line">770</span><br><span class="line">771</span><br><span class="line">772</span><br><span class="line">773</span><br><span class="line">774</span><br><span class="line">775</span><br><span class="line">776</span><br><span class="line">777</span><br><span class="line">778</span><br><span class="line">779</span><br><span class="line">780</span><br><span class="line">781</span><br><span class="line">782</span><br><span class="line">783</span><br><span class="line">784</span><br><span class="line">785</span><br><span class="line">786</span><br><span class="line">787</span><br><span class="line">788</span><br><span class="line">789</span><br><span class="line">790</span><br><span class="line">791</span><br><span class="line">792</span><br><span class="line">793</span><br><span class="line">794</span><br><span class="line">795</span><br><span class="line">796</span><br><span class="line">797</span><br><span class="line">798</span><br><span class="line">799</span><br><span class="line">800</span><br><span class="line">801</span><br><span class="line">802</span><br><span class="line">803</span><br><span class="line">804</span><br><span class="line">805</span><br><span class="line">806</span><br><span class="line">807</span><br><span class="line">808</span><br><span class="line">809</span><br><span class="line">810</span><br><span class="line">811</span><br><span class="line">812</span><br><span class="line">813</span><br><span class="line">814</span><br><span class="line">815</span><br><span class="line">816</span><br><span class="line">817</span><br><span class="line">818</span><br><span class="line">819</span><br><span class="line">820</span><br><span class="line">821</span><br><span class="line">822</span><br><span class="line">823</span><br><span class="line">824</span><br><span class="line">825</span><br><span class="line">826</span><br><span class="line">827</span><br><span class="line">828</span><br><span class="line">829</span><br><span class="line">830</span><br><span class="line">831</span><br><span class="line">832</span><br><span class="line">833</span><br><span class="line">834</span><br><span class="line">835</span><br><span class="line">836</span><br><span class="line">837</span><br><span class="line">838</span><br><span class="line">839</span><br><span class="line">840</span><br><span class="line">841</span><br><span class="line">842</span><br><span class="line">843</span><br><span class="line">844</span><br><span class="line">845</span><br><span class="line">846</span><br><span class="line">847</span><br><span class="line">848</span><br><span class="line">849</span><br><span class="line">850</span><br><span class="line">851</span><br><span class="line">852</span><br><span class="line">853</span><br><span class="line">854</span><br><span class="line">855</span><br><span class="line">856</span><br><span class="line">857</span><br><span class="line">858</span><br><span class="line">859</span><br><span class="line">860</span><br><span class="line">861</span><br><span class="line">862</span><br><span class="line">863</span><br><span class="line">864</span><br><span class="line">865</span><br><span class="line">866</span><br><span class="line">867</span><br><span class="line">868</span><br><span class="line">869</span><br><span class="line">870</span><br><span class="line">871</span><br><span class="line">872</span><br><span class="line">873</span><br><span class="line">874</span><br><span class="line">875</span><br><span class="line">876</span><br><span class="line">877</span><br><span class="line">878</span><br><span class="line">879</span><br><span class="line">880</span><br><span class="line">881</span><br><span class="line">882</span><br><span class="line">883</span><br><span class="line">884</span><br><span class="line">885</span><br><span class="line">886</span><br><span class="line">887</span><br><span class="line">888</span><br><span class="line">889</span><br><span class="line">890</span><br><span class="line">891</span><br><span class="line">892</span><br><span class="line">893</span><br><span class="line">894</span><br><span class="line">895</span><br><span class="line">896</span><br><span class="line">897</span><br><span class="line">898</span><br><span class="line">899</span><br><span class="line">900</span><br><span class="line">901</span><br><span class="line">902</span><br><span class="line">903</span><br><span class="line">904</span><br><span class="line">905</span><br><span class="line">906</span><br><span class="line">907</span><br><span class="line">908</span><br><span class="line">909</span><br><span class="line">910</span><br><span class="line">911</span><br><span class="line">912</span><br><span class="line">913</span><br><span class="line">914</span><br><span class="line">915</span><br><span class="line">916</span><br><span class="line">917</span><br><span class="line">918</span><br><span class="line">919</span><br><span class="line">920</span><br><span class="line">921</span><br><span class="line">922</span><br><span class="line">923</span><br><span class="line">924</span><br><span class="line">925</span><br><span class="line">926</span><br><span class="line">927</span><br><span class="line">928</span><br><span class="line">929</span><br><span class="line">930</span><br><span class="line">931</span><br><span class="line">932</span><br><span class="line">933</span><br><span class="line">934</span><br><span class="line">935</span><br><span class="line">936</span><br><span class="line">937</span><br><span class="line">938</span><br><span class="line">939</span><br><span class="line">940</span><br><span class="line">941</span><br><span class="line">942</span><br><span class="line">943</span><br><span class="line">944</span><br><span class="line">945</span><br><span class="line">946</span><br><span class="line">947</span><br><span class="line">948</span><br><span class="line">949</span><br><span class="line">950</span><br><span class="line">951</span><br><span class="line">952</span><br><span class="line">953</span><br><span class="line">954</span><br><span class="line">955</span><br><span class="line">956</span><br><span class="line">957</span><br><span class="line">958</span><br><span class="line">959</span><br><span class="line">960</span><br><span class="line">961</span><br><span class="line">962</span><br><span class="line">963</span><br><span class="line">964</span><br><span class="line">965</span><br><span class="line">966</span><br><span class="line">967</span><br><span class="line">968</span><br><span class="line">969</span><br><span class="line">970</span><br><span class="line">971</span><br><span class="line">972</span><br><span class="line">973</span><br><span class="line">974</span><br><span class="line">975</span><br><span class="line">976</span><br><span class="line">977</span><br><span class="line">978</span><br><span class="line">979</span><br><span class="line">980</span><br><span class="line">981</span><br><span class="line">982</span><br><span class="line">983</span><br><span class="line">984</span><br><span class="line">985</span><br><span class="line">986</span><br><span class="line">987</span><br><span class="line">988</span><br><span class="line">989</span><br><span class="line">990</span><br><span class="line">991</span><br><span class="line">992</span><br><span class="line">993</span><br><span class="line">994</span><br><span class="line">995</span><br><span class="line">996</span><br><span class="line">997</span><br><span class="line">998</span><br><span class="line">999</span><br><span class="line">1000</span><br><span class="line">1001</span><br><span class="line">1002</span><br><span class="line">1003</span><br><span class="line">1004</span><br><span class="line">1005</span><br><span class="line">1006</span><br><span class="line">1007</span><br><span class="line">1008</span><br><span class="line">1009</span><br><span class="line">1010</span><br><span class="line">1011</span><br><span class="line">1012</span><br><span class="line">1013</span><br><span class="line">1014</span><br><span class="line">1015</span><br><span class="line">1016</span><br><span class="line">1017</span><br><span class="line">1018</span><br><span class="line">1019</span><br><span class="line">1020</span><br><span class="line">1021</span><br><span class="line">1022</span><br><span class="line">1023</span><br><span class="line">1024</span><br><span class="line">1025</span><br><span class="line">1026</span><br><span class="line">1027</span><br><span class="line">1028</span><br><span class="line">1029</span><br><span class="line">1030</span><br><span class="line">1031</span><br><span class="line">1032</span><br><span class="line">1033</span><br><span class="line">1034</span><br><span class="line">1035</span><br><span class="line">1036</span><br><span class="line">1037</span><br><span class="line">1038</span><br><span class="line">1039</span><br><span class="line">1040</span><br><span class="line">1041</span><br><span class="line">1042</span><br><span class="line">1043</span><br><span class="line">1044</span><br><span class="line">1045</span><br><span class="line">1046</span><br><span class="line">1047</span><br><span class="line">1048</span><br><span class="line">1049</span><br><span class="line">1050</span><br></pre></td><td class="code"><pre><span class="line">Android Init Language</span><br><span class="line">---------------------</span><br><span class="line"></span><br><span class="line">The Android Init Language consists of five broad classes of statements:</span><br><span class="line">Actions, Commands, Services, Options, and Imports.</span><br><span class="line"></span><br><span class="line">All of these are line-oriented, consisting of tokens separated by</span><br><span class="line">whitespace.  The c-style backslash escapes may be used to insert</span><br><span class="line">whitespace into a token.  Double quotes may also be used to prevent</span><br><span class="line">whitespace from breaking text into multiple tokens.  The backslash,</span><br><span class="line">when it is the last character on a line, may be used for line-folding.</span><br><span class="line"></span><br><span class="line">Lines which start with a `#` (leading whitespace allowed) are comments.</span><br><span class="line"></span><br><span class="line">System properties can be expanded using the syntax</span><br><span class="line">`$&#123;property.name&#125;`. This also works in contexts where concatenation is</span><br><span class="line">required, such as `import /init.recovery.$&#123;ro.hardware&#125;.rc`.</span><br><span class="line"></span><br><span class="line">Actions and Services implicitly declare a new section.  All commands</span><br><span class="line">or options belong to the section most recently declared.  Commands</span><br><span class="line">or options before the first section are ignored.</span><br><span class="line"></span><br><span class="line">Services have unique names.  If a second Service is defined</span><br><span class="line">with the same name as an existing one, it is ignored and an error</span><br><span class="line">message is logged.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Init .rc Files</span><br><span class="line">--------------</span><br><span class="line">The init language is used in plain text files that take the .rc file</span><br><span class="line">extension.  There are typically multiple of these in multiple</span><br><span class="line">locations on the system, described below.</span><br><span class="line"></span><br><span class="line">`/system/etc/init/hw/init.rc` is the primary .rc file and is loaded by the init executable at the</span><br><span class="line">beginning of its execution.  It is responsible for the initial set up of the system.</span><br><span class="line"></span><br><span class="line">Init loads all of the files contained within the</span><br><span class="line">`/&#123;system,system_ext,vendor,odm,product&#125;/etc/init/` directories immediately after loading</span><br><span class="line">the primary `/system/etc/init/hw/init.rc`.  This is explained in more details in the</span><br><span class="line">[Imports](#imports) section of this file.</span><br><span class="line"></span><br><span class="line">Legacy devices without the first stage mount mechanism previously were</span><br><span class="line">able to import init scripts during mount_all, however that is deprecated</span><br><span class="line">and not allowed for devices launching after Q.</span><br><span class="line"></span><br><span class="line">The intention of these directories is:</span><br><span class="line"></span><br><span class="line">   1. /system/etc/init/ is for core system items such as</span><br><span class="line">      SurfaceFlinger, MediaService, and logd.</span><br><span class="line">   2. /vendor/etc/init/ is for SoC vendor items such as actions or</span><br><span class="line">      daemons needed for core SoC functionality.</span><br><span class="line">   3. /odm/etc/init/ is for device manufacturer items such as</span><br><span class="line">      actions or daemons needed for motion sensor or other peripheral</span><br><span class="line">      functionality.</span><br><span class="line"></span><br><span class="line">All services whose binaries reside on the system, vendor, or odm</span><br><span class="line">partitions should have their service entries placed into a</span><br><span class="line">corresponding init .rc file, located in the /etc/init/</span><br><span class="line">directory of the partition where they reside.  There is a build</span><br><span class="line">system macro, LOCAL\_INIT\_RC, that handles this for developers.  Each</span><br><span class="line">init .rc file should additionally contain any actions associated with</span><br><span class="line">its service.</span><br><span class="line"></span><br><span class="line">An example is the userdebug logcatd.rc and Android.mk files located in the</span><br><span class="line">system/core/logcat directory.  The LOCAL\_INIT\_RC macro in the</span><br><span class="line">Android.mk file places logcatd.rc in /system/etc/init/ during the</span><br><span class="line">build process.  Init loads logcatd.rc during the mount\_all command and</span><br><span class="line">allows the service to be run and the action to be queued when</span><br><span class="line">appropriate.</span><br><span class="line"></span><br><span class="line">This break up of init .rc files according to their daemon is preferred</span><br><span class="line">to the previously used monolithic init .rc files.  This approach</span><br><span class="line">ensures that the only service entries that init reads and the only</span><br><span class="line">actions that init performs correspond to services whose binaries are in</span><br><span class="line">fact present on the file system, which was not the case with the</span><br><span class="line">monolithic init .rc files.  This additionally will aid in merge</span><br><span class="line">conflict resolution when multiple services are added to the system, as</span><br><span class="line">each one will go into a separate file.</span><br><span class="line"></span><br><span class="line">Versioned RC files within APEXs</span><br><span class="line">-------------------------------</span><br><span class="line"></span><br><span class="line">With the arrival of mainline on Android Q, the individual mainline</span><br><span class="line">modules carry their own init.rc files within their boundaries. Init</span><br><span class="line">processes these files according to the naming pattern `/apex/*/etc/*rc`.</span><br><span class="line"></span><br><span class="line">Because APEX modules must run on more than one release of Android,</span><br><span class="line">they may require different parameters as part of the services they</span><br><span class="line">define. This is achieved, starting in Android T, by incorporating</span><br><span class="line">the SDK version information in the name of the init file.  The suffix</span><br><span class="line">is changed from `.rc` to `.#rc` where # is the first SDK where that</span><br><span class="line">RC file is accepted. An init file specific to SDK=31 might be named</span><br><span class="line">`init.31rc`. With this scheme, an APEX may include multiple init files. An</span><br><span class="line">example is appropriate.</span><br><span class="line"></span><br><span class="line">For an APEX module with the following files in /apex/sample-module/apex/etc/:</span><br><span class="line"></span><br><span class="line">   1. init.rc</span><br><span class="line">   2. init.32rc</span><br><span class="line">   4. init.35rc</span><br><span class="line"></span><br><span class="line">The selection rule chooses the highest `.#rc` value that does not</span><br><span class="line">exceed the SDK of the currently running system. The unadorned `.rc`</span><br><span class="line">is interpreted as sdk=0.</span><br><span class="line"></span><br><span class="line">When this APEX is installed on a device with SDK &lt;=31, the system will</span><br><span class="line">process init.rc.  When installed on a device running SDK 32, 33, or 34,</span><br><span class="line">it will use init.32rc.  When installed on a device running SDKs &gt;= 35,</span><br><span class="line">it will choose init.35rc</span><br><span class="line"></span><br><span class="line">This versioning scheme is used only for the init files within APEX</span><br><span class="line">modules; it does not apply to the init files stored in /system/etc/init,</span><br><span class="line">/vendor/etc/init, or other directories.</span><br><span class="line"></span><br><span class="line">This naming scheme is available after Android S.</span><br><span class="line"></span><br><span class="line">Actions</span><br><span class="line">-------</span><br><span class="line">Actions are named sequences of commands.  Actions have a trigger which</span><br><span class="line">is used to determine when the action is executed.  When an event</span><br><span class="line">occurs which matches an action&#x27;s trigger, that action is added to</span><br><span class="line">the tail of a to-be-executed queue (unless it is already on the</span><br><span class="line">queue).</span><br><span class="line"></span><br><span class="line">Each action in the queue is dequeued in sequence and each command in</span><br><span class="line">that action is executed in sequence.  Init handles other activities</span><br><span class="line">(device creation/destruction, property setting, process restarting)</span><br><span class="line">&quot;between&quot; the execution of the commands in activities.</span><br><span class="line"></span><br><span class="line">Actions take the form of:</span><br><span class="line"></span><br><span class="line">    on &lt;trigger&gt; [&amp;&amp; &lt;trigger&gt;]*</span><br><span class="line">       &lt;command&gt;</span><br><span class="line">       &lt;command&gt;</span><br><span class="line">       &lt;command&gt;</span><br><span class="line"></span><br><span class="line">Actions are added to the queue and executed based on the order that</span><br><span class="line">the file that contains them was parsed (see the Imports section), then</span><br><span class="line">sequentially within an individual file.</span><br><span class="line"></span><br><span class="line">For example if a file contains:</span><br><span class="line"></span><br><span class="line">    on boot</span><br><span class="line">       setprop a 1</span><br><span class="line">       setprop b 2</span><br><span class="line"></span><br><span class="line">    on boot &amp;&amp; property:true=true</span><br><span class="line">       setprop c 1</span><br><span class="line">       setprop d 2</span><br><span class="line"></span><br><span class="line">    on boot</span><br><span class="line">       setprop e 1</span><br><span class="line">       setprop f 2</span><br><span class="line"></span><br><span class="line">Then when the `boot` trigger occurs and assuming the property `true`</span><br><span class="line">equals `true`, then the order of the commands executed will be:</span><br><span class="line"></span><br><span class="line">    setprop a 1</span><br><span class="line">    setprop b 2</span><br><span class="line">    setprop c 1</span><br><span class="line">    setprop d 2</span><br><span class="line">    setprop e 1</span><br><span class="line">    setprop f 2</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Services</span><br><span class="line">--------</span><br><span class="line">Services are programs which init launches and (optionally) restarts</span><br><span class="line">when they exit.  Services take the form of:</span><br><span class="line"></span><br><span class="line">    service &lt;name&gt; &lt;pathname&gt; [ &lt;argument&gt; ]*</span><br><span class="line">       &lt;option&gt;</span><br><span class="line">       &lt;option&gt;</span><br><span class="line">       ...</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Options</span><br><span class="line">-------</span><br><span class="line">Options are modifiers to services.  They affect how and when init</span><br><span class="line">runs the service.</span><br><span class="line"></span><br><span class="line">`capabilities [ &lt;capability&gt;\* ]`</span><br><span class="line">&gt; Set capabilities when exec&#x27;ing this service. &#x27;capability&#x27; should be a Linux</span><br><span class="line">  capability without the &quot;CAP\_&quot; prefix, like &quot;NET\_ADMIN&quot; or &quot;SETPCAP&quot;. See</span><br><span class="line">  http://man7.org/linux/man-pages/man7/capabilities.7.html for a list of Linux</span><br><span class="line">  capabilities.</span><br><span class="line">  If no capabilities are provided, then all capabilities are removed from this service, even if it</span><br><span class="line">  runs as root.</span><br><span class="line"></span><br><span class="line">`class &lt;name&gt; [ &lt;name&gt;\* ]`</span><br><span class="line">&gt; Specify class names for the service.  All services in a</span><br><span class="line">  named class may be started or stopped together.  A service</span><br><span class="line">  is in the class &quot;default&quot; if one is not specified via the</span><br><span class="line">  class option. Additional classnames beyond the (required) first</span><br><span class="line">  one are used to group services.</span><br><span class="line">  The `animation` class should include all services necessary for both</span><br><span class="line">  boot animation and shutdown animation. As these services can be</span><br><span class="line">  launched very early during bootup and can run until the last stage</span><br><span class="line">  of shutdown, access to /data partition is not guaranteed. These</span><br><span class="line">  services can check files under /data but it should not keep files opened</span><br><span class="line">  and should work when /data is not available.</span><br><span class="line"></span><br><span class="line">`console [&lt;console&gt;]`</span><br><span class="line">&gt; This service needs a console. The optional second parameter chooses a</span><br><span class="line">  specific console instead of the default. The default &quot;/dev/console&quot; can</span><br><span class="line">  be changed by setting the &quot;androidboot.console&quot; kernel parameter. In</span><br><span class="line">  all cases the leading &quot;/dev/&quot; should be omitted, so &quot;/dev/tty0&quot; would be</span><br><span class="line">  specified as just &quot;console tty0&quot;.</span><br><span class="line">  This option connects stdin, stdout, and stderr to the console. It is mutually exclusive with the</span><br><span class="line">  stdio_to_kmsg option, which only connects stdout and stderr to kmsg.</span><br><span class="line"></span><br><span class="line">`critical [window=&lt;fatal crash window mins&gt;] [target=&lt;fatal reboot target&gt;]`</span><br><span class="line">&gt; This is a device-critical service. If it exits more than four times in</span><br><span class="line">  _fatal crash window mins_ minutes or before boot completes, the device</span><br><span class="line">  will reboot into _fatal reboot target_.</span><br><span class="line">  The default value of _fatal crash window mins_ is 4, and default value</span><br><span class="line">  of _fatal reboot target_ is &#x27;bootloader&#x27;.</span><br><span class="line">  For tests, the fatal reboot can be skipped by setting property</span><br><span class="line">  `init.svc_debug.no_fatal.&lt;service-name&gt;` to `true` for specified critical service.</span><br><span class="line"></span><br><span class="line">`disabled`</span><br><span class="line">&gt; This service will not automatically start with its class.</span><br><span class="line">  It must be explicitly started by name or by interface name.</span><br><span class="line"></span><br><span class="line">`enter_namespace &lt;type&gt; &lt;path&gt;`</span><br><span class="line">&gt; Enters the namespace of type _type_ located at _path_. Only network namespaces are supported with</span><br><span class="line">  _type_ set to &quot;net&quot;. Note that only one namespace of a given _type_ may be entered.</span><br><span class="line"></span><br><span class="line">`file &lt;path&gt; &lt;type&gt;`</span><br><span class="line">&gt; Open a file path and pass its fd to the launched process. _type_ must be</span><br><span class="line">  &quot;r&quot;, &quot;w&quot; or &quot;rw&quot;.  For native executables see libcutils</span><br><span class="line">  android\_get\_control\_file().</span><br><span class="line"></span><br><span class="line">`group &lt;groupname&gt; [ &lt;groupname&gt;\* ]`</span><br><span class="line">&gt; Change to &#x27;groupname&#x27; before exec&#x27;ing this service.  Additional</span><br><span class="line">  groupnames beyond the (required) first one are used to set the</span><br><span class="line">  supplemental groups of the process (via setgroups()).</span><br><span class="line">  Currently defaults to root.  (??? probably should default to nobody)</span><br><span class="line"></span><br><span class="line">`interface &lt;interface name&gt; &lt;instance name&gt;`</span><br><span class="line">&gt; Associates this service with a list of the AIDL or HIDL services that it provides. The interface</span><br><span class="line">  name must be a fully-qualified name and not a value name. For instance, this is used to allow</span><br><span class="line">  servicemanager or hwservicemanager to lazily start services. When multiple interfaces are served,</span><br><span class="line">  this tag should be used multiple times. An example of an entry for a HIDL</span><br><span class="line">  interface is `interface vendor.foo.bar@1.0::IBaz default`. For an AIDL interface, use</span><br><span class="line">  `interface aidl &lt;instance name&gt;`. The instance name for an AIDL interface is</span><br><span class="line">  whatever is registered with servicemanager, and these can be listed with `adb</span><br><span class="line">  shell dumpsys -l`.</span><br><span class="line"></span><br><span class="line">`ioprio &lt;class&gt; &lt;priority&gt;`</span><br><span class="line">&gt; Sets the IO priority and IO priority class for this service via the SYS_ioprio_set syscall.</span><br><span class="line">  _class_ must be one of &quot;rt&quot;, &quot;be&quot;, or &quot;idle&quot;. _priority_ must be an integer in the range 0 - 7.</span><br><span class="line"></span><br><span class="line">`keycodes &lt;keycode&gt; [ &lt;keycode&gt;\* ]`</span><br><span class="line">&gt; Sets the keycodes that will trigger this service. If all of the keys corresponding to the passed</span><br><span class="line">  keycodes are pressed at once, the service will start. This is typically used to start the</span><br><span class="line">  bugreport service.</span><br><span class="line"></span><br><span class="line">&gt; This option may take a property instead of a list of keycodes. In this case, only one option is</span><br><span class="line">  provided: the property name in the typical property expansion format. The property must contain</span><br><span class="line">  a comma separated list of keycode values or the text &#x27;none&#x27; to indicate that</span><br><span class="line">  this service does not respond to keycodes.</span><br><span class="line"></span><br><span class="line">&gt; For example, `keycodes $&#123;some.property.name:-none&#125;` where some.property.name expands</span><br><span class="line">  to &quot;123,124,125&quot;. Since keycodes are handled very early in init,</span><br><span class="line">  only PRODUCT_DEFAULT_PROPERTY_OVERRIDES properties can be used.</span><br><span class="line"></span><br><span class="line">`memcg.limit_in_bytes &lt;value&gt;` and `memcg.limit_percent &lt;value&gt;`</span><br><span class="line">&gt; Sets the child&#x27;s memory.limit_in_bytes to the minimum of `limit_in_bytes`</span><br><span class="line">  bytes and `limit_percent` which is interpreted as a percentage of the size</span><br><span class="line">  of the device&#x27;s physical memory (only if memcg is mounted).</span><br><span class="line">  Values must be equal or greater than 0.</span><br><span class="line"></span><br><span class="line">`memcg.limit_property &lt;value&gt;`</span><br><span class="line">&gt; Sets the child&#x27;s memory.limit_in_bytes to the value of the specified property</span><br><span class="line">  (only if memcg is mounted). This property will override the values specified</span><br><span class="line">  via `memcg.limit_in_bytes` and `memcg.limit_percent`.</span><br><span class="line"></span><br><span class="line">`memcg.soft_limit_in_bytes &lt;value&gt;`</span><br><span class="line">&gt; Sets the child&#x27;s memory.soft_limit_in_bytes to the specified value (only if memcg is mounted),</span><br><span class="line">  which must be equal or greater than 0.</span><br><span class="line"></span><br><span class="line">`memcg.swappiness &lt;value&gt;`</span><br><span class="line">&gt; Sets the child&#x27;s memory.swappiness to the specified value (only if memcg is mounted),</span><br><span class="line">  which must be equal or greater than 0.</span><br><span class="line"></span><br><span class="line">`namespace &lt;pid|mnt&gt;`</span><br><span class="line">&gt; Enter a new PID or mount namespace when forking the service.</span><br><span class="line"></span><br><span class="line">`oneshot`</span><br><span class="line">&gt; Do not restart the service when it exits.</span><br><span class="line"></span><br><span class="line">`onrestart`</span><br><span class="line">&gt; Execute a Command (see below) when service restarts.</span><br><span class="line"></span><br><span class="line">`oom_score_adjust &lt;value&gt;`</span><br><span class="line">&gt; Sets the child&#x27;s /proc/self/oom\_score\_adj to the specified value,</span><br><span class="line">  which must range from -1000 to 1000.</span><br><span class="line"></span><br><span class="line">`override`</span><br><span class="line">&gt; Indicates that this service definition is meant to override a previous definition for a service</span><br><span class="line">  with the same name. This is typically meant for services on /odm to override those defined on</span><br><span class="line">  /vendor. The last service definition that init parses with this keyword is the service definition</span><br><span class="line">  will use for this service. Pay close attention to the order in which init.rc files are parsed,</span><br><span class="line">  since it has some peculiarities for backwards compatibility reasons. The &#x27;imports&#x27; section of</span><br><span class="line">  this file has more details on the order.</span><br><span class="line"></span><br><span class="line">`priority &lt;priority&gt;`</span><br><span class="line">&gt; Scheduling priority of the service process. This value has to be in range</span><br><span class="line">  -20 to 19. Default priority is 0. Priority is set via setpriority().</span><br><span class="line"></span><br><span class="line">`reboot_on_failure &lt;target&gt;`</span><br><span class="line">&gt; If this process cannot be started or if the process terminates with an exit code other than</span><br><span class="line">  CLD_EXITED or an status other than &#x27;0&#x27;, reboot the system with the target specified in</span><br><span class="line">  _target_. _target_ takes the same format as the parameter to sys.powerctl. This is particularly</span><br><span class="line">  intended to be used with the `exec_start` builtin for any must-have checks during boot.</span><br><span class="line"></span><br><span class="line">`restart_period &lt;seconds&gt;`</span><br><span class="line">&gt; If a non-oneshot service exits, it will be restarted at its start time plus</span><br><span class="line">  this period. It defaults to 5s to rate limit crashing services.</span><br><span class="line">  This can be increased for services that are meant to run periodically. For</span><br><span class="line">  example, it may be set to 3600 to indicate that the service should run every hour</span><br><span class="line">  or 86400 to indicate that the service should run every day.</span><br><span class="line"></span><br><span class="line">`rlimit &lt;resource&gt; &lt;cur&gt; &lt;max&gt;`</span><br><span class="line">&gt; This applies the given rlimit to the service. rlimits are inherited by child</span><br><span class="line">  processes, so this effectively applies the given rlimit to the process tree</span><br><span class="line">  started by this service.</span><br><span class="line">  It is parsed similarly to the setrlimit command specified below.</span><br><span class="line"></span><br><span class="line">`seclabel &lt;seclabel&gt;`</span><br><span class="line">&gt; Change to &#x27;seclabel&#x27; before exec&#x27;ing this service.</span><br><span class="line">  Primarily for use by services run from the rootfs, e.g. ueventd, adbd.</span><br><span class="line">  Services on the system partition can instead use policy-defined transitions</span><br><span class="line">  based on their file security context.</span><br><span class="line">  If not specified and no transition is defined in policy, defaults to the init context.</span><br><span class="line"></span><br><span class="line">`setenv &lt;name&gt; &lt;value&gt;`</span><br><span class="line">&gt; Set the environment variable _name_ to _value_ in the launched process.</span><br><span class="line"></span><br><span class="line">`shutdown &lt;shutdown_behavior&gt;`</span><br><span class="line">&gt; Set shutdown behavior of the service process. When this is not specified,</span><br><span class="line">  the service is killed during shutdown process by using SIGTERM and SIGKILL.</span><br><span class="line">  The service with shutdown_behavior of &quot;critical&quot; is not killed during shutdown</span><br><span class="line">  until shutdown times out. When shutdown times out, even services tagged with</span><br><span class="line">  &quot;shutdown critical&quot; will be killed. When the service tagged with &quot;shutdown critical&quot;</span><br><span class="line">  is not running when shut down starts, it will be started.</span><br><span class="line"></span><br><span class="line">`sigstop`</span><br><span class="line">&gt; Send SIGSTOP to the service immediately before exec is called. This is intended for debugging.</span><br><span class="line">  See the below section on debugging for how this can be used.</span><br><span class="line"></span><br><span class="line">`socket &lt;name&gt; &lt;type&gt; &lt;perm&gt; [ &lt;user&gt; [ &lt;group&gt; [ &lt;seclabel&gt; ] ] ]`</span><br><span class="line">&gt; Create a UNIX domain socket named /dev/socket/_name_ and pass its fd to the</span><br><span class="line">  launched process.  _type_ must be &quot;dgram&quot;, &quot;stream&quot; or &quot;seqpacket&quot;.  _type_</span><br><span class="line">  may end with &quot;+passcred&quot; to enable SO_PASSCRED on the socket. User and</span><br><span class="line">  group default to 0.  &#x27;seclabel&#x27; is the SELinux security context for the</span><br><span class="line">  socket.  It defaults to the service security context, as specified by</span><br><span class="line">  seclabel or computed based on the service executable file security context.</span><br><span class="line">  For native executables see libcutils android\_get\_control\_socket().</span><br><span class="line"></span><br><span class="line">`stdio_to_kmsg`</span><br><span class="line">&gt; Redirect stdout and stderr to /dev/kmsg_debug. This is useful for services that do not use native</span><br><span class="line">  Android logging during early boot and whose logs messages we want to capture. This is only enabled</span><br><span class="line">  when /dev/kmsg_debug is enabled, which is only enabled on userdebug and eng builds.</span><br><span class="line">  This is mutually exclusive with the console option, which additionally connects stdin to the</span><br><span class="line">  given console.</span><br><span class="line"></span><br><span class="line">`task_profiles &lt;profile&gt; [ &lt;profile&gt;\* ]`</span><br><span class="line">&gt; Set task profiles for the process when it forks. This is designed to replace the use of</span><br><span class="line">  writepid option for moving a process into a cgroup.</span><br><span class="line"></span><br><span class="line">`timeout_period &lt;seconds&gt;`</span><br><span class="line">&gt; Provide a timeout after which point the service will be killed. The oneshot keyword is respected</span><br><span class="line">  here, so oneshot services do not automatically restart, however all other services will.</span><br><span class="line">  This is particularly useful for creating a periodic service combined with the restart_period</span><br><span class="line">  option described above.</span><br><span class="line"></span><br><span class="line">`updatable`</span><br><span class="line">&gt; Mark that the service can be overridden (via the &#x27;override&#x27; option) later in</span><br><span class="line">  the boot sequence by APEXes. When a service with updatable option is started</span><br><span class="line">  before APEXes are all activated, the execution is delayed until the activation</span><br><span class="line">  is finished. A service that is not marked as updatable cannot be overridden by</span><br><span class="line">  APEXes.</span><br><span class="line"></span><br><span class="line">`user &lt;username&gt;`</span><br><span class="line">&gt; Change to &#x27;username&#x27; before exec&#x27;ing this service.</span><br><span class="line">  Currently defaults to root.  (??? probably should default to nobody)</span><br><span class="line">  As of Android M, processes should use this option even if they</span><br><span class="line">  require Linux capabilities.  Previously, to acquire Linux</span><br><span class="line">  capabilities, a process would need to run as root, request the</span><br><span class="line">  capabilities, then drop to its desired uid.  There is a new</span><br><span class="line">  mechanism through fs\_config that allows device manufacturers to add</span><br><span class="line">  Linux capabilities to specific binaries on a file system that should</span><br><span class="line">  be used instead. This mechanism is described on</span><br><span class="line">  &lt;http://source.android.com/devices/tech/config/filesystem.html&gt;.  When</span><br><span class="line">  using this new mechanism, processes can use the user option to</span><br><span class="line">  select their desired uid without ever running as root.</span><br><span class="line">  As of Android O, processes can also request capabilities directly in their .rc</span><br><span class="line">  files. See the &quot;capabilities&quot; option below.</span><br><span class="line"></span><br><span class="line">`writepid &lt;file&gt; [ &lt;file&gt;\* ]`</span><br><span class="line">&gt; Write the child&#x27;s pid to the given files when it forks. Meant for</span><br><span class="line">  cgroup/cpuset usage. If no files under /dev/cpuset/ are specified, but the</span><br><span class="line">  system property &#x27;ro.cpuset.default&#x27; is set to a non-empty cpuset name (e.g.</span><br><span class="line">  &#x27;/foreground&#x27;), then the pid is written to file /dev/cpuset/_cpuset\_name_/tasks.</span><br><span class="line">  The use of this option for moving a process into a cgroup is obsolete. Please</span><br><span class="line">  use task_profiles option instead.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Triggers</span><br><span class="line">--------</span><br><span class="line">Triggers are strings which can be used to match certain kinds of</span><br><span class="line">events and used to cause an action to occur.</span><br><span class="line"></span><br><span class="line">Triggers are subdivided into event triggers and property triggers.</span><br><span class="line"></span><br><span class="line">Event triggers are strings triggered by the &#x27;trigger&#x27; command or by</span><br><span class="line">the QueueEventTrigger() function within the init executable.  These</span><br><span class="line">take the form of a simple string such as &#x27;boot&#x27; or &#x27;late-init&#x27;.</span><br><span class="line"></span><br><span class="line">Property triggers are strings triggered when a named property changes</span><br><span class="line">value to a given new value or when a named property changes value to</span><br><span class="line">any new value.  These take the form of &#x27;property:&lt;name&gt;=&lt;value&gt;&#x27; and</span><br><span class="line">&#x27;property:&lt;name&gt;=\*&#x27; respectively.  Property triggers are additionally</span><br><span class="line">evaluated and triggered accordingly during the initial boot phase of</span><br><span class="line">init.</span><br><span class="line"></span><br><span class="line">An Action can have multiple property triggers but may only have one</span><br><span class="line">event trigger.</span><br><span class="line"></span><br><span class="line">For example:</span><br><span class="line">`on boot &amp;&amp; property:a=b` defines an action that is only executed when</span><br><span class="line">the &#x27;boot&#x27; event trigger happens and the property a equals b.</span><br><span class="line"></span><br><span class="line">`on property:a=b &amp;&amp; property:c=d` defines an action that is executed</span><br><span class="line">at three times:</span><br><span class="line"></span><br><span class="line">   1. During initial boot if property a=b and property c=d.</span><br><span class="line">   2. Any time that property a transitions to value b, while property c already equals d.</span><br><span class="line">   3. Any time that property c transitions to value d, while property a already equals b.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Trigger Sequence</span><br><span class="line">----------------</span><br><span class="line"></span><br><span class="line">Init uses the following sequence of triggers during early boot. These are the</span><br><span class="line">built-in triggers defined in init.cpp.</span><br><span class="line"></span><br><span class="line">   1. `early-init` - The first in the sequence, triggered after cgroups has been configured</span><br><span class="line">      but before ueventd&#x27;s coldboot is complete.</span><br><span class="line">   2. `init` - Triggered after coldboot is complete.</span><br><span class="line">   3. `charger` - Triggered if `ro.bootmode == &quot;charger&quot;`.</span><br><span class="line">   4. `late-init` - Triggered if `ro.bootmode != &quot;charger&quot;`, or via healthd triggering a boot</span><br><span class="line">      from charging mode.</span><br><span class="line"></span><br><span class="line">Remaining triggers are configured in `init.rc` and are not built-in. The default sequence for</span><br><span class="line">these is specified under the &quot;on late-init&quot; event in `init.rc`. Actions internal to `init.rc`</span><br><span class="line">have been omitted.</span><br><span class="line"></span><br><span class="line">   1. `early-fs` - Start vold.</span><br><span class="line">   2. `fs` - Vold is up. Mount partitions not marked as first-stage or latemounted.</span><br><span class="line">   3. `post-fs` - Configure anything dependent on early mounts.</span><br><span class="line">   4. `late-fs` - Mount partitions marked as latemounted.</span><br><span class="line">   5. `post-fs-data` - Mount and configure `/data`; set up encryption. `/metadata` is</span><br><span class="line">      reformatted here if it couldn&#x27;t mount in first-stage init.</span><br><span class="line">   6. `zygote-start` - Start the zygote.</span><br><span class="line">   7. `early-boot` - After zygote has started.</span><br><span class="line">   8. `boot` - After `early-boot` actions have completed.</span><br><span class="line"></span><br><span class="line">Commands</span><br><span class="line">--------</span><br><span class="line"></span><br><span class="line">`bootchart [start|stop]`</span><br><span class="line">&gt; Start/stop bootcharting. These are present in the default init.rc files,</span><br><span class="line">  but bootcharting is only active if the file /data/bootchart/enabled exists;</span><br><span class="line">  otherwise bootchart start/stop are no-ops.</span><br><span class="line"></span><br><span class="line">`chmod &lt;octal-mode&gt; &lt;path&gt;`</span><br><span class="line">&gt; Change file access permissions.</span><br><span class="line"></span><br><span class="line">`chown &lt;owner&gt; &lt;group&gt; &lt;path&gt;`</span><br><span class="line">&gt; Change file owner and group.</span><br><span class="line"></span><br><span class="line">`class_start &lt;serviceclass&gt;`</span><br><span class="line">&gt; Start all services of the specified class if they are</span><br><span class="line">  not already running.  See the start entry for more information on</span><br><span class="line">  starting services.</span><br><span class="line"></span><br><span class="line">`class_stop &lt;serviceclass&gt;`</span><br><span class="line">&gt; Stop and disable all services of the specified class if they are</span><br><span class="line">  currently running.</span><br><span class="line"></span><br><span class="line">`class_reset &lt;serviceclass&gt;`</span><br><span class="line">&gt; Stop all services of the specified class if they are</span><br><span class="line">  currently running, without disabling them. They can be restarted</span><br><span class="line">  later using `class_start`.</span><br><span class="line"></span><br><span class="line">`class_restart [--only-enabled] &lt;serviceclass&gt;`</span><br><span class="line">&gt; Restarts all services of the specified class. If `--only-enabled` is</span><br><span class="line">  specified, then disabled services are skipped.</span><br><span class="line"></span><br><span class="line">`copy &lt;src&gt; &lt;dst&gt;`</span><br><span class="line">&gt; Copies a file. Similar to write, but useful for binary/large</span><br><span class="line">  amounts of data.</span><br><span class="line">  Regarding to the src file, copying from symbolic link file and world-writable</span><br><span class="line">  or group-writable files are not allowed.</span><br><span class="line">  Regarding to the dst file, the default mode created is 0600 if it does not</span><br><span class="line">  exist. And it will be truncated if dst file is a normal regular file and</span><br><span class="line">  already exists.</span><br><span class="line"></span><br><span class="line">`copy_per_line &lt;src&gt; &lt;dst&gt;`</span><br><span class="line">&gt; Copies a file line by line. Similar to copy, but useful for dst is a sysfs node</span><br><span class="line">  that doesn&#x27;t handle multiple lines of data.</span><br><span class="line"></span><br><span class="line">`domainname &lt;name&gt;`</span><br><span class="line">&gt; Set the domain name.</span><br><span class="line"></span><br><span class="line">`enable &lt;servicename&gt;`</span><br><span class="line">&gt; Turns a disabled service into an enabled one as if the service did not</span><br><span class="line">  specify disabled.</span><br><span class="line">  If the service is supposed to be running, it will be started now.</span><br><span class="line">  Typically used when the bootloader sets a variable that indicates a specific</span><br><span class="line">  service should be started when needed. E.g.</span><br><span class="line"></span><br><span class="line">    on property:ro.boot.myfancyhardware=1</span><br><span class="line">        enable my_fancy_service_for_my_fancy_hardware</span><br><span class="line"></span><br><span class="line">`exec [ &lt;seclabel&gt; [ &lt;user&gt; [ &lt;group&gt;\* ] ] ] -- &lt;command&gt; [ &lt;argument&gt;\* ]`</span><br><span class="line">&gt; Fork and execute command with the given arguments. The command starts</span><br><span class="line">  after &quot;--&quot; so that an optional security context, user, and supplementary</span><br><span class="line">  groups can be provided. No other commands will be run until this one</span><br><span class="line">  finishes. _seclabel_ can be a - to denote default. Properties are expanded</span><br><span class="line">  within _argument_.</span><br><span class="line">  Init halts executing commands until the forked process exits.</span><br><span class="line"></span><br><span class="line">`exec_background [ &lt;seclabel&gt; [ &lt;user&gt; [ &lt;group&gt;\* ] ] ] -- &lt;command&gt; [ &lt;argument&gt;\* ]`</span><br><span class="line">&gt; Fork and execute command with the given arguments. This is handled similarly</span><br><span class="line">  to the `exec` command. The difference is that init does not halt executing</span><br><span class="line">  commands until the process exits for `exec_background`.</span><br><span class="line"></span><br><span class="line">`exec_start &lt;service&gt;`</span><br><span class="line">&gt; Start a given service and halt the processing of additional init commands</span><br><span class="line">  until it returns.  The command functions similarly to the `exec` command,</span><br><span class="line">  but uses an existing service definition in place of the exec argument vector.</span><br><span class="line"></span><br><span class="line">`export &lt;name&gt; &lt;value&gt;`</span><br><span class="line">&gt; Set the environment variable _name_ equal to _value_ in the</span><br><span class="line">  global environment (which will be inherited by all processes</span><br><span class="line">  started after this command is executed)</span><br><span class="line"></span><br><span class="line">`hostname &lt;name&gt;`</span><br><span class="line">&gt; Set the host name.</span><br><span class="line"></span><br><span class="line">`ifup &lt;interface&gt;`</span><br><span class="line">&gt; Bring the network interface _interface_ online.</span><br><span class="line"></span><br><span class="line">`insmod [-f] &lt;path&gt; [&lt;options&gt;]`</span><br><span class="line">&gt; Install the module at _path_ with the specified options.</span><br><span class="line">  -f: force installation of the module even if the version of the running kernel</span><br><span class="line">  and the version of the kernel for which the module was compiled do not match.</span><br><span class="line"></span><br><span class="line">`interface_start &lt;name&gt;` \</span><br><span class="line">`interface_restart &lt;name&gt;` \</span><br><span class="line">`interface_stop &lt;name&gt;`</span><br><span class="line">&gt; Find the service that provides the interface _name_ if it exists and run the `start`, `restart`,</span><br><span class="line">or `stop` commands on it respectively.  _name_ may be either a fully qualified HIDL name, in which</span><br><span class="line">case it is specified as `&lt;interface&gt;/&lt;instance&gt;`, or an AIDL name, in which case it is specified as</span><br><span class="line">`aidl/&lt;interface&gt;` for example `android.hardware.secure_element@1.1::ISecureElement/eSE1` or</span><br><span class="line">`aidl/aidl_lazy_test_1`.</span><br><span class="line"></span><br><span class="line">&gt; Note that these commands only act on interfaces specified by the `interface` service option, not</span><br><span class="line">on interfaces registered at runtime.</span><br><span class="line"></span><br><span class="line">&gt; Example usage of these commands: \</span><br><span class="line">`interface_start android.hardware.secure_element@1.1::ISecureElement/eSE1`</span><br><span class="line">will start the HIDL Service that provides the `android.hardware.secure_element@1.1` and `eSI1`</span><br><span class="line">instance. \</span><br><span class="line">`interface_start aidl/aidl_lazy_test_1` will start the AIDL service that</span><br><span class="line">provides the `aidl_lazy_test_1` interface.</span><br><span class="line"></span><br><span class="line">`load_exports &lt;path&gt;`</span><br><span class="line">&gt; Open the file at _path_ and export global environment variables declared</span><br><span class="line">  there. Each line must be in the format `export &lt;name&gt; &lt;value&gt;`, as described</span><br><span class="line">  above.</span><br><span class="line"></span><br><span class="line">`load_system_props`</span><br><span class="line">&gt; (This action is deprecated and no-op.)</span><br><span class="line"></span><br><span class="line">`load_persist_props`</span><br><span class="line">&gt; Loads persistent properties when /data has been decrypted.</span><br><span class="line">  This is included in the default init.rc.</span><br><span class="line"></span><br><span class="line">`loglevel &lt;level&gt;`</span><br><span class="line">&gt; Sets init&#x27;s log level to the integer level, from 7 (all logging) to 0</span><br><span class="line">  (fatal logging only). The numeric values correspond to the kernel log</span><br><span class="line">  levels, but this command does not affect the kernel log level. Use the</span><br><span class="line">  `write` command to write to `/proc/sys/kernel/printk` to change that.</span><br><span class="line">  Properties are expanded within _level_.</span><br><span class="line"></span><br><span class="line">`mark_post_data`</span><br><span class="line">&gt; Used to mark the point right after /data is mounted.</span><br><span class="line"></span><br><span class="line">`mkdir &lt;path&gt; [&lt;mode&gt;] [&lt;owner&gt;] [&lt;group&gt;] [encryption=&lt;action&gt;] [key=&lt;key&gt;]`</span><br><span class="line">&gt; Create a directory at _path_, optionally with the given mode, owner, and</span><br><span class="line">  group. If not provided, the directory is created with permissions 755 and</span><br><span class="line">  owned by the root user and root group. If provided, the mode, owner and group</span><br><span class="line">  will be updated if the directory exists already.</span><br><span class="line"></span><br><span class="line"> &gt; _action_ can be one of:</span><br><span class="line">  * `None`: take no encryption action; directory will be encrypted if parent is.</span><br><span class="line">  * `Require`: encrypt directory, abort boot process if encryption fails</span><br><span class="line">  * `Attempt`: try to set an encryption policy, but continue if it fails</span><br><span class="line">  * `DeleteIfNecessary`: recursively delete directory if necessary to set</span><br><span class="line">  encryption policy.</span><br><span class="line"></span><br><span class="line">  &gt; _key_ can be one of:</span><br><span class="line">  * `ref`: use the systemwide DE key</span><br><span class="line">  * `per_boot_ref`: use the key freshly generated on each boot.</span><br><span class="line"></span><br><span class="line">`mount_all [ &lt;fstab&gt; ] [--&lt;option&gt;]`</span><br><span class="line">&gt; Calls fs\_mgr\_mount\_all on the given fs\_mgr-format fstab with optional</span><br><span class="line">  options &quot;early&quot; and &quot;late&quot;.</span><br><span class="line">  With &quot;--early&quot; set, the init executable will skip mounting entries with</span><br><span class="line">  &quot;latemount&quot; flag and triggering fs encryption state event. With &quot;--late&quot; set,</span><br><span class="line">  init executable will only mount entries with &quot;latemount&quot; flag. By default,</span><br><span class="line">  no option is set, and mount\_all will process all entries in the given fstab.</span><br><span class="line">  If the fstab parameter is not specified, fstab.$&#123;ro.boot.fstab_suffix&#125;,</span><br><span class="line">  fstab.$&#123;ro.hardware&#125; or fstab.$&#123;ro.hardware.platform&#125; will be scanned for</span><br><span class="line">  under /odm/etc, /vendor/etc, or / at runtime, in that order.</span><br><span class="line"></span><br><span class="line">`mount &lt;type&gt; &lt;device&gt; &lt;dir&gt; [ &lt;flag&gt;\* ] [&lt;options&gt;]`</span><br><span class="line">&gt; Attempt to mount the named device at the directory _dir_</span><br><span class="line">  _flag_s include &quot;ro&quot;, &quot;rw&quot;, &quot;remount&quot;, &quot;noatime&quot;, ...</span><br><span class="line">  _options_ include &quot;barrier=1&quot;, &quot;noauto\_da\_alloc&quot;, &quot;discard&quot;, ... as</span><br><span class="line">  a comma separated string, e.g. barrier=1,noauto\_da\_alloc</span><br><span class="line"></span><br><span class="line">`perform_apex_config`</span><br><span class="line">&gt; Performs tasks after APEXes are mounted. For example, creates data directories</span><br><span class="line">  for the mounted APEXes, parses config file(s) from them, and updates linker</span><br><span class="line">  configurations. Intended to be used only once when apexd notifies the mount</span><br><span class="line">  event by setting `apexd.status` to ready.</span><br><span class="line"></span><br><span class="line">`restart [--only-if-running] &lt;service&gt;`</span><br><span class="line">&gt; Stops and restarts a running service, does nothing if the service is currently</span><br><span class="line">  restarting, otherwise, it just starts the service. If &quot;--only-if-running&quot; is</span><br><span class="line">  specified, the service is only restarted if it is already running.</span><br><span class="line"></span><br><span class="line">`restorecon &lt;path&gt; [ &lt;path&gt;\* ]`</span><br><span class="line">&gt; Restore the file named by _path_ to the security context specified</span><br><span class="line">  in the file\_contexts configuration.</span><br><span class="line">  Not required for directories created by the init.rc as these are</span><br><span class="line">  automatically labeled correctly by init.</span><br><span class="line"></span><br><span class="line">`restorecon_recursive &lt;path&gt; [ &lt;path&gt;\* ]`</span><br><span class="line">&gt; Recursively restore the directory tree named by _path_ to the</span><br><span class="line">  security contexts specified in the file\_contexts configuration.</span><br><span class="line"></span><br><span class="line">`rm &lt;path&gt;`</span><br><span class="line">&gt; Calls unlink(2) on the given path. You might want to</span><br><span class="line">  use &quot;exec -- rm ...&quot; instead (provided the system partition is</span><br><span class="line">  already mounted).</span><br><span class="line"></span><br><span class="line">`rmdir &lt;path&gt;`</span><br><span class="line">&gt; Calls rmdir(2) on the given path.</span><br><span class="line"></span><br><span class="line">`readahead &lt;file|dir&gt; [--fully]`</span><br><span class="line">&gt; Calls readahead(2) on the file or files within given directory.</span><br><span class="line">  Use option --fully to read the full file content.</span><br><span class="line"></span><br><span class="line">`setprop &lt;name&gt; &lt;value&gt;`</span><br><span class="line">&gt; Set system property _name_ to _value_. Properties are expanded</span><br><span class="line">  within _value_.</span><br><span class="line"></span><br><span class="line">`setrlimit &lt;resource&gt; &lt;cur&gt; &lt;max&gt;`</span><br><span class="line">&gt; Set the rlimit for a resource. This applies to all processes launched after</span><br><span class="line">  the limit is set. It is intended to be set early in init and applied globally.</span><br><span class="line">  _resource_ is best specified using its text representation (&#x27;cpu&#x27;, &#x27;rtio&#x27;, etc</span><br><span class="line">  or &#x27;RLIM_CPU&#x27;, &#x27;RLIM_RTIO&#x27;, etc). It also may be specified as the int value</span><br><span class="line">  that the resource enum corresponds to.</span><br><span class="line">  _cur_ and _max_ can be &#x27;unlimited&#x27; or &#x27;-1&#x27; to indicate an infinite rlimit.</span><br><span class="line"></span><br><span class="line">`start &lt;service&gt;`</span><br><span class="line">&gt; Start a service running if it is not already running.</span><br><span class="line">  Note that this is _not_ synchronous, and even if it were, there is</span><br><span class="line">  no guarantee that the operating system&#x27;s scheduler will execute the</span><br><span class="line">  service sufficiently to guarantee anything about the service&#x27;s status.</span><br><span class="line">  See the `exec_start` command for a synchronous version of `start`.</span><br><span class="line"></span><br><span class="line">&gt; This creates an important consequence that if the service offers</span><br><span class="line">  functionality to other services, such as providing a</span><br><span class="line">  communication channel, simply starting this service before those</span><br><span class="line">  services is _not_ sufficient to guarantee that the channel has</span><br><span class="line">  been set up before those services ask for it.  There must be a</span><br><span class="line">  separate mechanism to make any such guarantees.</span><br><span class="line"></span><br><span class="line">`stop &lt;service&gt;`</span><br><span class="line">&gt; Stop a service from running if it is currently running.</span><br><span class="line"></span><br><span class="line">`swapon_all [ &lt;fstab&gt; ]`</span><br><span class="line">&gt; Calls fs\_mgr\_swapon\_all on the given fstab file.</span><br><span class="line">  If the fstab parameter is not specified, fstab.$&#123;ro.boot.fstab_suffix&#125;,</span><br><span class="line">  fstab.$&#123;ro.hardware&#125; or fstab.$&#123;ro.hardware.platform&#125; will be scanned for</span><br><span class="line">  under /odm/etc, /vendor/etc, or / at runtime, in that order.</span><br><span class="line"></span><br><span class="line">`symlink &lt;target&gt; &lt;path&gt;`</span><br><span class="line">&gt; Create a symbolic link at _path_ with the value _target_</span><br><span class="line"></span><br><span class="line">`sysclktz &lt;minutes_west_of_gmt&gt;`</span><br><span class="line">&gt; Set the system clock base (0 if system clock ticks in GMT)</span><br><span class="line"></span><br><span class="line">`trigger &lt;event&gt;`</span><br><span class="line">&gt; Trigger an event.  Used to queue an action from another</span><br><span class="line">  action.</span><br><span class="line"></span><br><span class="line">`umount &lt;path&gt;`</span><br><span class="line">&gt; Unmount the filesystem mounted at that path.</span><br><span class="line"></span><br><span class="line">`umount_all [ &lt;fstab&gt; ]`</span><br><span class="line">&gt; Calls fs\_mgr\_umount\_all on the given fstab file.</span><br><span class="line">  If the fstab parameter is not specified, fstab.$&#123;ro.boot.fstab_suffix&#125;,</span><br><span class="line">  fstab.$&#123;ro.hardware&#125; or fstab.$&#123;ro.hardware.platform&#125; will be scanned for</span><br><span class="line">  under /odm/etc, /vendor/etc, or / at runtime, in that order.</span><br><span class="line"></span><br><span class="line">`verity_update_state`</span><br><span class="line">&gt; Internal implementation detail used to update dm-verity state and</span><br><span class="line">  set the partition._mount-point_.verified properties used by adb remount</span><br><span class="line">  because fs\_mgr can&#x27;t set them directly itself. This is required since</span><br><span class="line">  Android 12, because CtsNativeVerifiedBootTestCases will read property</span><br><span class="line">  &quot;partition.$&#123;partition&#125;.verified.hash_alg&quot; to check that sha1 is not used.</span><br><span class="line">  See https://r.android.com/1546980 for more details.</span><br><span class="line"></span><br><span class="line">`wait &lt;path&gt; [ &lt;timeout&gt; ]`</span><br><span class="line">&gt; Poll for the existence of the given file and return when found,</span><br><span class="line">  or the timeout has been reached. If timeout is not specified it</span><br><span class="line">  currently defaults to five seconds. The timeout value can be</span><br><span class="line">  fractional seconds, specified in floating point notation.</span><br><span class="line"></span><br><span class="line">`wait_for_prop &lt;name&gt; &lt;value&gt;`</span><br><span class="line">&gt; Wait for system property _name_ to be _value_. Properties are expanded</span><br><span class="line">  within _value_. If property _name_ is already set to _value_, continue</span><br><span class="line">  immediately.</span><br><span class="line"></span><br><span class="line">`write &lt;path&gt; &lt;content&gt;`</span><br><span class="line">&gt; Open the file at _path_ and write a string to it with write(2).</span><br><span class="line">  If the file does not exist, it will be created. If it does exist,</span><br><span class="line">  it will be truncated. Properties are expanded within _content_.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Imports</span><br><span class="line">-------</span><br><span class="line">`import &lt;path&gt;`</span><br><span class="line">&gt; Parse an init config file, extending the current configuration.</span><br><span class="line">  If _path_ is a directory, each file in the directory is parsed as</span><br><span class="line">  a config file. It is not recursive, nested directories will</span><br><span class="line">  not be parsed.</span><br><span class="line"></span><br><span class="line">The import keyword is not a command, but rather its own section,</span><br><span class="line">meaning that it does not happen as part of an Action, but rather,</span><br><span class="line">imports are handled as a file is being parsed and follow the below logic.</span><br><span class="line"></span><br><span class="line">There are only three times where the init executable imports .rc files:</span><br><span class="line"></span><br><span class="line">   1. When it imports `/system/etc/init/hw/init.rc` or the script indicated by the property</span><br><span class="line">      `ro.boot.init_rc` during initial boot.</span><br><span class="line">   2. When it imports `/&#123;system,system_ext,vendor,odm,product&#125;/etc/init/` immediately after</span><br><span class="line">      importing `/system/etc/init/hw/init.rc`.</span><br><span class="line">   3. (Deprecated) When it imports /&#123;system,vendor,odm&#125;/etc/init/ or .rc files</span><br><span class="line">      at specified paths during mount_all, not allowed for devices launching</span><br><span class="line">      after Q.</span><br><span class="line"></span><br><span class="line">The order that files are imported is a bit complex for legacy reasons.  The below is guaranteed:</span><br><span class="line"></span><br><span class="line">1. `/system/etc/init/hw/init.rc` is parsed then recursively each of its imports are</span><br><span class="line">   parsed.</span><br><span class="line">2. The contents of `/system/etc/init/` are alphabetized and parsed sequentially, with imports</span><br><span class="line">   happening recursively after each file is parsed.</span><br><span class="line">3. Step 2 is repeated for `/system_ext/etc/init`, `/vendor/etc/init`, `/odm/etc/init`,</span><br><span class="line">   `/product/etc/init`</span><br><span class="line"></span><br><span class="line">The below pseudocode may explain this more clearly:</span><br><span class="line"></span><br><span class="line">    fn Import(file)</span><br><span class="line">      Parse(file)</span><br><span class="line">      for (import : file.imports)</span><br><span class="line">        Import(import)</span><br><span class="line"></span><br><span class="line">    Import(/system/etc/init/hw/init.rc)</span><br><span class="line">    Directories = [/system/etc/init, /system_ext/etc/init, /vendor/etc/init, /odm/etc/init, /product/etc/init]</span><br><span class="line">    for (directory : Directories)</span><br><span class="line">      files = &lt;Alphabetical order of directory&#x27;s contents&gt;</span><br><span class="line">      for (file : files)</span><br><span class="line">        Import(file)</span><br><span class="line"></span><br><span class="line">Actions are executed in the order that they are parsed.  For example the `post-fs-data` action(s)</span><br><span class="line">in `/system/etc/init/hw/init.rc` are always the first `post-fs-data` action(s) to be executed in</span><br><span class="line">order of how they appear in that file.  Then the `post-fs-data` actions of the imports of</span><br><span class="line">`/system/etc/init/hw/init.rc` in the order that they&#x27;re imported, etc.</span><br><span class="line"></span><br><span class="line">Properties</span><br><span class="line">----------</span><br><span class="line">Init provides state information with the following properties.</span><br><span class="line"></span><br><span class="line">`init.svc.&lt;name&gt;`</span><br><span class="line">&gt; State of a named service (&quot;stopped&quot;, &quot;stopping&quot;, &quot;running&quot;, &quot;restarting&quot;)</span><br><span class="line"></span><br><span class="line">`dev.mnt.dev.&lt;mount_point&gt;`, `dev.mnt.blk.&lt;mount_point&gt;`, `dev.mnt.rootdisk.&lt;mount_point&gt;`</span><br><span class="line">&gt; Block device base name associated with a *mount_point*.</span><br><span class="line">  The *mount_point* has / replaced by . and if referencing the root mount point</span><br><span class="line">  &quot;/&quot;, it will use &quot;/root&quot;.</span><br><span class="line">  `dev.mnt.dev.&lt;mount_point&gt;` indicates a block device attached to filesystems.</span><br><span class="line">    (e.g., dm-N or sdaN/mmcblk0pN to access `/sys/fs/ext4/$&#123;dev.mnt.dev.&lt;mount_point&gt;&#125;/`)</span><br><span class="line"></span><br><span class="line">  `dev.mnt.blk.&lt;mount_point&gt;` indicates the disk partition to the above block device.</span><br><span class="line">    (e.g., sdaN / mmcblk0pN to access `/sys/class/block/$&#123;dev.mnt.blk.&lt;mount_point&gt;&#125;/`)</span><br><span class="line"></span><br><span class="line">  `dev.mnt.rootdisk.&lt;mount_point&gt;` indicates the root disk to contain the above disk partition.</span><br><span class="line">    (e.g., sda / mmcblk0 to access `/sys/class/block/$&#123;dev.mnt.rootdisk.&lt;mount_point&gt;&#125;/queue`)</span><br><span class="line"></span><br><span class="line">Init responds to properties that begin with `ctl.`.  These properties take the format of</span><br><span class="line">`ctl.[&lt;target&gt;_]&lt;command&gt;` and the _value_ of the system property is used as a parameter.  The</span><br><span class="line">_target_ is optional and specifies the service option that _value_ is meant to match with.  There is</span><br><span class="line">only one option for _target_, `interface` which indicates that _value_ will refer to an interface</span><br><span class="line">that a service provides and not the service name itself.</span><br><span class="line"></span><br><span class="line">For example:</span><br><span class="line"></span><br><span class="line">`SetProperty(&quot;ctl.start&quot;, &quot;logd&quot;)` will run the `start` command on `logd`.</span><br><span class="line"></span><br><span class="line">`SetProperty(&quot;ctl.interface_start&quot;, &quot;aidl/aidl_lazy_test_1&quot;)` will run the `start` command on the</span><br><span class="line">service that exposes the `aidl aidl_lazy_test_1` interface.</span><br><span class="line"></span><br><span class="line">Note that these</span><br><span class="line">properties are only settable; they will have no value when read.</span><br><span class="line"></span><br><span class="line">The _commands_ are listed below.</span><br><span class="line"></span><br><span class="line">`start` \</span><br><span class="line">`restart` \</span><br><span class="line">`stop` \</span><br><span class="line">These are equivalent to using the `start`, `restart`, and `stop` commands on the service specified</span><br><span class="line">by the _value_ of the property.</span><br><span class="line"></span><br><span class="line">`oneshot_on` and `oneshot_off` will turn on or off the _oneshot_</span><br><span class="line">flag for the service specified by the _value_ of the property.  This is</span><br><span class="line">particularly intended for services that are conditionally lazy HALs.  When</span><br><span class="line">they are lazy HALs, oneshot must be on, otherwise oneshot should be off.</span><br><span class="line"></span><br><span class="line">`sigstop_on` and `sigstop_off` will turn on or off the _sigstop_ feature for the service</span><br><span class="line">specified by the _value_ of the property.  See the _Debugging init_ section below for more details</span><br><span class="line">about this feature.</span><br><span class="line"></span><br><span class="line">Boot timing</span><br><span class="line">-----------</span><br><span class="line">Init records some boot timing information in system properties.</span><br><span class="line"></span><br><span class="line">`ro.boottime.init`</span><br><span class="line">&gt; Time after boot in ns (via the CLOCK\_BOOTTIME clock) at which the first</span><br><span class="line">  stage of init started.</span><br><span class="line"></span><br><span class="line">`ro.boottime.init.first_stage`</span><br><span class="line">&gt; How long in ns it took to run first stage.</span><br><span class="line"></span><br><span class="line">`ro.boottime.init.selinux`</span><br><span class="line">&gt; How long in ns it took to run SELinux stage.</span><br><span class="line"></span><br><span class="line">`ro.boottime.init.modules`</span><br><span class="line">&gt; How long in ms it took to load kernel modules.</span><br><span class="line"></span><br><span class="line">`ro.boottime.init.cold_boot_wait`</span><br><span class="line">&gt; How long init waited for ueventd&#x27;s coldboot phase to end.</span><br><span class="line"></span><br><span class="line">`ro.boottime.&lt;service-name&gt;`</span><br><span class="line">&gt; Time after boot in ns (via the CLOCK\_BOOTTIME clock) that the service was</span><br><span class="line">  first started.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Bootcharting</span><br><span class="line">------------</span><br><span class="line">This version of init contains code to perform &quot;bootcharting&quot;: generating log</span><br><span class="line">files that can be later processed by the tools provided by &lt;http://www.bootchart.org/&gt;.</span><br><span class="line"></span><br><span class="line">On the emulator, use the -bootchart _timeout_ option to boot with bootcharting</span><br><span class="line">activated for _timeout_ seconds.</span><br><span class="line"></span><br><span class="line">On a device:</span><br><span class="line"></span><br><span class="line">    adb shell &#x27;touch /data/bootchart/enabled&#x27;</span><br><span class="line"></span><br><span class="line">Don&#x27;t forget to delete this file when you&#x27;re done collecting data!</span><br><span class="line"></span><br><span class="line">The log files are written to /data/bootchart/. A script is provided to</span><br><span class="line">retrieve them and create a bootchart.tgz file that can be used with the</span><br><span class="line">bootchart command-line utility:</span><br><span class="line"></span><br><span class="line">    sudo apt-get install pybootchartgui</span><br><span class="line">    # grab-bootchart.sh uses $ANDROID_SERIAL.</span><br><span class="line">    $ANDROID_BUILD_TOP/system/core/init/grab-bootchart.sh</span><br><span class="line"></span><br><span class="line">One thing to watch for is that the bootchart will show init as if it started</span><br><span class="line">running at 0s. You&#x27;ll have to look at dmesg to work out when the kernel</span><br><span class="line">actually started init.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Comparing two bootcharts</span><br><span class="line">------------------------</span><br><span class="line">A handy script named compare-bootcharts.py can be used to compare the</span><br><span class="line">start/end time of selected processes. The aforementioned grab-bootchart.sh</span><br><span class="line">will leave a bootchart tarball named bootchart.tgz at /tmp/android-bootchart.</span><br><span class="line">If two such tarballs are preserved on the host machine under different</span><br><span class="line">directories, the script can list the timestamps differences. For example:</span><br><span class="line"></span><br><span class="line">Usage: system/core/init/compare-bootcharts.py _base-bootchart-dir_ _exp-bootchart-dir_</span><br><span class="line"></span><br><span class="line">    process: baseline experiment (delta) - Unit is ms (a jiffy is 10 ms on the system)</span><br><span class="line">    ------------------------------------</span><br><span class="line">    /init: 50 40 (-10)</span><br><span class="line">    /system/bin/surfaceflinger: 4320 4470 (+150)</span><br><span class="line">    /system/bin/bootanimation: 6980 6990 (+10)</span><br><span class="line">    zygote64: 10410 10640 (+230)</span><br><span class="line">    zygote: 10410 10640 (+230)</span><br><span class="line">    system_server: 15350 15150 (-200)</span><br><span class="line">    bootanimation ends at: 33790 31230 (-2560)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Systrace</span><br><span class="line">--------</span><br><span class="line">Systrace (&lt;http://developer.android.com/tools/help/systrace.html&gt;) can be</span><br><span class="line">used for obtaining performance analysis reports during boot</span><br><span class="line">time on userdebug or eng builds.</span><br><span class="line"></span><br><span class="line">Here is an example of trace events of &quot;wm&quot; and &quot;am&quot; categories:</span><br><span class="line"></span><br><span class="line">    $ANDROID_BUILD_TOP/external/chromium-trace/systrace.py \</span><br><span class="line">          wm am --boot</span><br><span class="line"></span><br><span class="line">This command will cause the device to reboot. After the device is rebooted and</span><br><span class="line">the boot sequence has finished, the trace report is obtained from the device</span><br><span class="line">and written as trace.html on the host by hitting Ctrl+C.</span><br><span class="line"></span><br><span class="line">Limitation: recording trace events is started after persistent properties are loaded, so</span><br><span class="line">the trace events that are emitted before that are not recorded. Several</span><br><span class="line">services such as vold, surfaceflinger, and servicemanager are affected by this</span><br><span class="line">limitation since they are started before persistent properties are loaded.</span><br><span class="line">Zygote initialization and the processes that are forked from the zygote are not</span><br><span class="line">affected.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Debugging init</span><br><span class="line">--------------</span><br><span class="line">When a service starts from init, it may fail to `execv()` the service. This is not typical, and may</span><br><span class="line">point to an error happening in the linker as the new service is started. The linker in Android</span><br><span class="line">prints its logs to `logd` and `stderr`, so they are visible in `logcat`. If the error is encountered</span><br><span class="line">before it is possible to access `logcat`, the `stdio_to_kmsg` service option may be used to direct</span><br><span class="line">the logs that the linker prints to `stderr` to `kmsg`, where they can be read via a serial port.</span><br><span class="line"></span><br><span class="line">Launching init services without init is not recommended as init sets up a significant amount of</span><br><span class="line">environment (user, groups, security label, capabilities, etc) that is hard to replicate manually.</span><br><span class="line"></span><br><span class="line">If it is required to debug a service from its very start, the `sigstop` service option is added.</span><br><span class="line">This option will send SIGSTOP to a service immediately before calling exec. This gives a window</span><br><span class="line">where developers can attach a debugger, strace, etc before continuing the service with SIGCONT.</span><br><span class="line"></span><br><span class="line">This flag can also be dynamically controlled via the ctl.sigstop_on and ctl.sigstop_off properties.</span><br><span class="line"></span><br><span class="line">Below is an example of dynamically debugging logd via the above:</span><br><span class="line"></span><br><span class="line">    stop logd</span><br><span class="line">    setprop ctl.sigstop_on logd</span><br><span class="line">    start logd</span><br><span class="line">    ps -e | grep logd</span><br><span class="line">    &gt; logd          4343     1   18156   1684 do_signal_stop 538280 T init</span><br><span class="line">    gdbclient.py -p 4343</span><br><span class="line">    b main</span><br><span class="line">    c</span><br><span class="line">    c</span><br><span class="line">    c</span><br><span class="line">    &gt; Breakpoint 1, main (argc=1, argv=0x7ff8c9a488) at system/core/logd/main.cpp:427</span><br><span class="line"></span><br><span class="line">Below is an example of doing the same but with strace</span><br><span class="line"></span><br><span class="line">    stop logd</span><br><span class="line">    setprop ctl.sigstop_on logd</span><br><span class="line">    start logd</span><br><span class="line">    ps -e | grep logd</span><br><span class="line">    &gt; logd          4343     1   18156   1684 do_signal_stop 538280 T init</span><br><span class="line">    strace -p 4343</span><br><span class="line"></span><br><span class="line">    (From a different shell)</span><br><span class="line">    kill -SIGCONT 4343</span><br><span class="line"></span><br><span class="line">    &gt; strace runs</span><br><span class="line"></span><br><span class="line">Host Init Script Verification</span><br><span class="line">-----------------------------</span><br><span class="line"></span><br><span class="line">Init scripts are checked for correctness during build time. Specifically the below is checked.</span><br><span class="line"></span><br><span class="line">1) Well formatted action, service and import sections, e.g. no actions without a preceding &#x27;on&#x27;</span><br><span class="line">line, and no extraneous lines after an &#x27;import&#x27; statement.</span><br><span class="line">2) All commands map to a valid keyword and the argument count is within the correct range.</span><br><span class="line">3) All service options are valid. This is stricter than how commands are checked as the service</span><br><span class="line">options&#x27; arguments are fully parsed, e.g. UIDs and GIDs must resolve.</span><br><span class="line"></span><br><span class="line">There are other parts of init scripts that are only parsed at runtime and therefore not checked</span><br><span class="line">during build time, among them are the below.</span><br><span class="line"></span><br><span class="line">1) The validity of the arguments of commands, e.g. no checking if file paths actually exist, if</span><br><span class="line">SELinux would permit the operation, or if the UIDs and GIDs resolve.</span><br><span class="line">2) No checking if a service exists or has a valid SELinux domain defined</span><br><span class="line">3) No checking if a service has not been previously defined in a different init script.</span><br><span class="line"></span><br><span class="line">Early Init Boot Sequence</span><br><span class="line">------------------------</span><br><span class="line">The early init boot sequence is broken up into three stages: first stage init, SELinux setup, and</span><br><span class="line">second stage init.</span><br><span class="line"></span><br><span class="line">First stage init is responsible for setting up the bare minimum requirements to load the rest of the</span><br><span class="line">system. Specifically this includes mounting /dev, /proc, mounting &#x27;early mount&#x27; partitions (which</span><br><span class="line">needs to include all partitions that contain system code, for example system and vendor), and moving</span><br><span class="line">the system.img mount to / for devices with a ramdisk.</span><br><span class="line"></span><br><span class="line">Note that in Android Q, system.img always contains TARGET_ROOT_OUT and always is mounted at / by the</span><br><span class="line">time first stage init finishes. Android Q will also require dynamic partitions and therefore will</span><br><span class="line">require using a ramdisk to boot Android. The recovery ramdisk can be used to boot to Android instead</span><br><span class="line">of a dedicated ramdisk as well.</span><br><span class="line"></span><br><span class="line">First stage init has three variations depending on the device configuration:</span><br><span class="line">1) For system-as-root devices, first stage init is part of /system/bin/init and a symlink at /init</span><br><span class="line">points to /system/bin/init for backwards compatibility. These devices do not need to do anything to</span><br><span class="line">mount system.img, since it is by definition already mounted as the rootfs by the kernel.</span><br><span class="line"></span><br><span class="line">2) For devices with a ramdisk, first stage init is a static executable located at /init. These</span><br><span class="line">devices mount system.img as /system then perform a switch root operation to move the mount at</span><br><span class="line">/system to /. The contents of the ramdisk are freed after mounting has completed.</span><br><span class="line"></span><br><span class="line">3) For devices that use recovery as a ramdisk, first stage init it contained within the shared init</span><br><span class="line">located at /init within the recovery ramdisk. These devices first switch root to</span><br><span class="line">/first_stage_ramdisk to remove the recovery components from the environment, then proceed the same</span><br><span class="line">as 2). Note that the decision to boot normally into Android instead of booting</span><br><span class="line">into recovery mode is made if androidboot.force_normal_boot=1 is present in the</span><br><span class="line">kernel commandline, or in bootconfig with Android S and later.</span><br><span class="line"></span><br><span class="line">Once first stage init finishes it execs /system/bin/init with the &quot;selinux_setup&quot; argument. This</span><br><span class="line">phase is where SELinux is optionally compiled and loaded onto the system. selinux.cpp contains more</span><br><span class="line">information on the specifics of this process.</span><br><span class="line"></span><br><span class="line">Lastly once that phase finishes, it execs /system/bin/init again with the &quot;second_stage&quot;</span><br><span class="line">argument. At this point the main phase of init runs and continues the boot process via the init.rc</span><br><span class="line">scripts.</span><br></pre></td></tr></table></figure>

<p>chatgpt译文：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br><span class="line">536</span><br><span class="line">537</span><br><span class="line">538</span><br><span class="line">539</span><br><span class="line">540</span><br><span class="line">541</span><br><span class="line">542</span><br><span class="line">543</span><br><span class="line">544</span><br><span class="line">545</span><br><span class="line">546</span><br><span class="line">547</span><br><span class="line">548</span><br><span class="line">549</span><br><span class="line">550</span><br><span class="line">551</span><br><span class="line">552</span><br><span class="line">553</span><br><span class="line">554</span><br><span class="line">555</span><br><span class="line">556</span><br><span class="line">557</span><br><span class="line">558</span><br><span class="line">559</span><br><span class="line">560</span><br><span class="line">561</span><br><span class="line">562</span><br><span class="line">563</span><br><span class="line">564</span><br><span class="line">565</span><br><span class="line">566</span><br><span class="line">567</span><br><span class="line">568</span><br><span class="line">569</span><br><span class="line">570</span><br><span class="line">571</span><br><span class="line">572</span><br><span class="line">573</span><br><span class="line">574</span><br><span class="line">575</span><br><span class="line">576</span><br><span class="line">577</span><br><span class="line">578</span><br><span class="line">579</span><br><span class="line">580</span><br><span class="line">581</span><br><span class="line">582</span><br><span class="line">583</span><br><span class="line">584</span><br><span class="line">585</span><br><span class="line">586</span><br><span class="line">587</span><br><span class="line">588</span><br><span class="line">589</span><br><span class="line">590</span><br><span class="line">591</span><br><span class="line">592</span><br><span class="line">593</span><br><span class="line">594</span><br><span class="line">595</span><br><span class="line">596</span><br><span class="line">597</span><br><span class="line">598</span><br><span class="line">599</span><br><span class="line">600</span><br><span class="line">601</span><br><span class="line">602</span><br><span class="line">603</span><br><span class="line">604</span><br><span class="line">605</span><br><span class="line">606</span><br><span class="line">607</span><br><span class="line">608</span><br><span class="line">609</span><br><span class="line">610</span><br><span class="line">611</span><br><span class="line">612</span><br><span class="line">613</span><br><span class="line">614</span><br><span class="line">615</span><br><span class="line">616</span><br><span class="line">617</span><br><span class="line">618</span><br><span class="line">619</span><br><span class="line">620</span><br><span class="line">621</span><br><span class="line">622</span><br><span class="line">623</span><br><span class="line">624</span><br><span class="line">625</span><br><span class="line">626</span><br><span class="line">627</span><br><span class="line">628</span><br><span class="line">629</span><br><span class="line">630</span><br><span class="line">631</span><br><span class="line">632</span><br><span class="line">633</span><br><span class="line">634</span><br><span class="line">635</span><br><span class="line">636</span><br><span class="line">637</span><br><span class="line">638</span><br><span class="line">639</span><br><span class="line">640</span><br><span class="line">641</span><br><span class="line">642</span><br><span class="line">643</span><br><span class="line">644</span><br><span class="line">645</span><br><span class="line">646</span><br><span class="line">647</span><br><span class="line">648</span><br><span class="line">649</span><br><span class="line">650</span><br><span class="line">651</span><br><span class="line">652</span><br><span class="line">653</span><br><span class="line">654</span><br><span class="line">655</span><br><span class="line">656</span><br><span class="line">657</span><br><span class="line">658</span><br><span class="line">659</span><br><span class="line">660</span><br><span class="line">661</span><br><span class="line">662</span><br><span class="line">663</span><br><span class="line">664</span><br><span class="line">665</span><br><span class="line">666</span><br><span class="line">667</span><br><span class="line">668</span><br><span class="line">669</span><br><span class="line">670</span><br><span class="line">671</span><br><span class="line">672</span><br><span class="line">673</span><br><span class="line">674</span><br><span class="line">675</span><br><span class="line">676</span><br><span class="line">677</span><br><span class="line">678</span><br><span class="line">679</span><br><span class="line">680</span><br><span class="line">681</span><br><span class="line">682</span><br><span class="line">683</span><br><span class="line">684</span><br><span class="line">685</span><br><span class="line">686</span><br><span class="line">687</span><br><span class="line">688</span><br><span class="line">689</span><br><span class="line">690</span><br><span class="line">691</span><br><span class="line">692</span><br><span class="line">693</span><br><span class="line">694</span><br><span class="line">695</span><br><span class="line">696</span><br><span class="line">697</span><br><span class="line">698</span><br><span class="line">699</span><br><span class="line">700</span><br><span class="line">701</span><br><span class="line">702</span><br><span class="line">703</span><br><span class="line">704</span><br><span class="line">705</span><br><span class="line">706</span><br><span class="line">707</span><br><span class="line">708</span><br><span class="line">709</span><br><span class="line">710</span><br><span class="line">711</span><br><span class="line">712</span><br><span class="line">713</span><br><span class="line">714</span><br><span class="line">715</span><br><span class="line">716</span><br><span class="line">717</span><br><span class="line">718</span><br><span class="line">719</span><br><span class="line">720</span><br><span class="line">721</span><br><span class="line">722</span><br><span class="line">723</span><br><span class="line">724</span><br><span class="line">725</span><br><span class="line">726</span><br><span class="line">727</span><br><span class="line">728</span><br><span class="line">729</span><br><span class="line">730</span><br><span class="line">731</span><br><span class="line">732</span><br><span class="line">733</span><br><span class="line">734</span><br><span class="line">735</span><br><span class="line">736</span><br><span class="line">737</span><br><span class="line">738</span><br><span class="line">739</span><br><span class="line">740</span><br><span class="line">741</span><br><span class="line">742</span><br><span class="line">743</span><br><span class="line">744</span><br><span class="line">745</span><br><span class="line">746</span><br><span class="line">747</span><br><span class="line">748</span><br><span class="line">749</span><br><span class="line">750</span><br><span class="line">751</span><br><span class="line">752</span><br><span class="line">753</span><br><span class="line">754</span><br><span class="line">755</span><br><span class="line">756</span><br><span class="line">757</span><br><span class="line">758</span><br><span class="line">759</span><br><span class="line">760</span><br><span class="line">761</span><br><span class="line">762</span><br><span class="line">763</span><br><span class="line">764</span><br><span class="line">765</span><br><span class="line">766</span><br><span class="line">767</span><br><span class="line">768</span><br><span class="line">769</span><br><span class="line">770</span><br><span class="line">771</span><br><span class="line">772</span><br><span class="line">773</span><br><span class="line">774</span><br></pre></td><td class="code"><pre><span class="line">Android Init Language</span><br><span class="line">---------------------</span><br><span class="line"></span><br><span class="line">Android Init语言由五个宽泛的语句类别组成：Actions（动作）、Commands（命令）、Services（服务）、Options（选项）和</span><br><span class="line">Imports（导入）。</span><br><span class="line"></span><br><span class="line">所有这些语句以行为单位，由空格分隔的标记组成。可以使用C风格的反斜杠转义将空格插入标记中。双引号也可以用于防止空格破坏文本形成</span><br><span class="line">多个标记。当反斜杠是行末字符时，可以用于行折叠。</span><br><span class="line"></span><br><span class="line">以`#`开头的行（允许前置空格）是注释。</span><br><span class="line"></span><br><span class="line">可以使用`$&#123;property.name&#125;`的语法扩展系统属性。这在需要连接的上下文中也适用，例如`import /init.recovery.$&#123;ro.hardware&#125;.rc`。</span><br><span class="line"></span><br><span class="line">Actions和Services隐式声明了一个新的区块。所有的命令或选项都属于最近声明的区块。在第一个区块之前的命令或选项将被忽略。</span><br><span class="line"></span><br><span class="line">Services具有唯一的名称。如果定义了第二个名称与现有Service相同的Service，则会被忽略并记录错误消息。</span><br><span class="line"></span><br><span class="line">Init .rc文件</span><br><span class="line">--------------</span><br><span class="line"></span><br><span class="line">Init语言用于采用.rc文件扩展的纯文本文件中。通常在系统中有多个这样的文件，如下所述。</span><br><span class="line"></span><br><span class="line">`/system/etc/init/hw/init.rc`是主要的.rc文件，由init可执行文件在其启动时加载。它负责系统的初始设置。</span><br><span class="line"></span><br><span class="line">在加载主要的`/system/etc/init/hw/init.rc`之后，Init会立即加载`/&#123;system,system_ext,vendor,odm,product&#125;/etc/init/`目录</span><br><span class="line">中包含的所有文件。这在本文件的[Imports](#imports)部分中有更详细的解释。</span><br><span class="line"></span><br><span class="line">在Q之后启动的设备不再支持在mount_all期间导入init脚本。</span><br><span class="line"></span><br><span class="line">这些目录的目的是：</span><br><span class="line"></span><br><span class="line">   1. /system/etc/init/ 用于核心系统项，如SurfaceFlinger、MediaService和logd。</span><br><span class="line">   2. /vendor/etc/init/ 用于SoC供应商项，如用于核心SoC功能的动作或守护进程。</span><br><span class="line">   3. /odm/etc/init/ 用于设备制造商项，如用于运动传感器或其他外围设备功能的动作或守护进程。</span><br><span class="line"></span><br><span class="line">所有二进制文件位于系统、供应商或odm分区的服务应将其服务条目放置在相应的init .rc文件中，位于它们所在分区的/etc/init/目录中。</span><br><span class="line">开发人员可以使用构建系统宏LOCAL_INIT_RC来处理此问题。每个init .rc文件还应包含与其服务关联的任何操作。</span><br><span class="line"></span><br><span class="line">一个例子是位于system/core/logcat目录中的userdebug logcatd.rc和Android.mk文件。Android.mk文件中的LOCAL_INIT_RC宏在构建</span><br><span class="line">过程中将logcatd.rc放置在/system/etc/init/中。Init在执行mount_all命令时加载logcatd.rc，并在适当时运行服务和排队操作。</span><br><span class="line"></span><br><span class="line">将init .rc文件按照它们的守护进程进行拆分比以前使用的大型init .rc文件更可取。这种方法确保init读取的只有存在于文件系统上的二</span><br><span class="line">进制文件对应的服务条目，而在大型init .rc文件中并非如此。此外，当向系统添加多个服务时，这样分拆将有助于解决合并冲突，因为每个</span><br><span class="line">服务都将进入单独的文件。</span><br><span class="line"></span><br><span class="line">APEXs中的带版本的RC文件</span><br><span class="line">---------------------------</span><br><span class="line">随着在Android Q上的主线开始，各个主线模块在其范围内携带自己的init.rc文件。Init根据命名模式`/apex/*/etc/*rc`来处理这些文件。</span><br><span class="line"></span><br><span class="line">由于APEX模块必须在多个Android版本上运行，它们可能需要不同的参数作为其定义的服务的一部分。从Android T开始，通过在init文件名</span><br><span class="line">中加入SDK版本信息来实现。后缀从`.rc`变为`.#rc`，其中#是该RC文件被接受的第一个SDK版本。一个特定于SDK=31的init文件可以被命名</span><br><span class="line">为`init.31rc`。使用这种方案，一个APEX可以包含多个init文件。下面是一个示例。</span><br><span class="line"></span><br><span class="line">对于/apex/sample-module/apex/etc/目录下拥有以下文件的APEX模块：</span><br><span class="line"></span><br><span class="line">   1. init.rc</span><br><span class="line">   2. init.32rc</span><br><span class="line">   4. init.35rc</span><br><span class="line"></span><br><span class="line">选择规则选择不超过当前运行系统的SDK的最高`.#rc`值。不带后缀的`.rc`表示sdk=0。</span><br><span class="line"></span><br><span class="line">当此APEX安装在SDK &lt;=31的设备上时，系统会处理init.rc。当安装在运行SDK 32、33或34的设备上时，它将使用init.32rc。当安装在运</span><br><span class="line">行SDK &gt;= 35的设备上时，它将选择init.35rc。</span><br><span class="line"></span><br><span class="line">此版本方案仅适用于APEX模块中的init文件，不适用于存储在/system/etc/init、/vendor/etc/init或其他目录中的init文件。</span><br><span class="line"></span><br><span class="line">此命名方案在Android S之后提供。</span><br><span class="line"></span><br><span class="line">动作</span><br><span class="line">-------</span><br><span class="line">动作是命令的命名序列。动作有一个触发器，用于确定何时执行该动作。当发生与动作的触发器匹配的事件时，该动作将被添加到待执行队列</span><br><span class="line">的末尾（除非它已经在队列中）。</span><br><span class="line"></span><br><span class="line">队列中的每个动作都按顺序出队，并执行该动作中的每个命令。在执行活动命令期间，Init处理其他活动（设备创建/销毁、属性设置、进程</span><br><span class="line">重启）。</span><br><span class="line"></span><br><span class="line">动作的形式如下：</span><br><span class="line"></span><br><span class="line">    on &lt;trigger&gt; [&amp;&amp; &lt;trigger&gt;]*</span><br><span class="line">       &lt;command&gt;</span><br><span class="line">       &lt;command&gt;</span><br><span class="line">       &lt;command&gt;</span><br><span class="line"></span><br><span class="line">根据包含它们的文件的解析顺序（请参阅导入部分），动作按顺序添加到队列并执行，然后在单个文件内顺序执行。</span><br><span class="line"></span><br><span class="line">例如，如果一个文件包含：</span><br><span class="line"></span><br><span class="line">    on boot</span><br><span class="line">       setprop a 1</span><br><span class="line">       setprop b 2</span><br><span class="line"></span><br><span class="line">    on boot &amp;&amp; property:true=true</span><br><span class="line">       setprop c 1</span><br><span class="line">       setprop d 2</span><br><span class="line"></span><br><span class="line">    on boot</span><br><span class="line">       setprop e 1</span><br><span class="line">       setprop f 2</span><br><span class="line"></span><br><span class="line">那么当`boot`触发器发生并且假设属性`true`等于`true`时，执行命令的顺序将是：</span><br><span class="line"></span><br><span class="line">    setprop a 1</span><br><span class="line">    setprop b 2</span><br><span class="line">    setprop c 1</span><br><span class="line">    setprop d 2</span><br><span class="line">    setprop e 1</span><br><span class="line">    setprop f 2</span><br><span class="line">    </span><br><span class="line">    服务</span><br><span class="line">--------</span><br><span class="line">服务是在init启动和（可选地）重新启动时运行的程序。服务的形式如下：</span><br><span class="line"></span><br><span class="line">    service &lt;名称&gt; &lt;路径&gt; [ &lt;参数&gt; ]*</span><br><span class="line">       &lt;选项&gt;</span><br><span class="line">       &lt;选项&gt;</span><br><span class="line">       ...</span><br><span class="line">       </span><br><span class="line"> 选项</span><br><span class="line">--------</span><br><span class="line">选项是对服务的修改器。它们会影响到init运行服务的方式和时间。</span><br><span class="line"></span><br><span class="line">`capabilities [ &lt;capability&gt;\* ]`</span><br><span class="line">&gt; 在执行该服务时设置能力（capabilities）。&#x27;capability&#x27;应为一个Linux能力（capability），没有&quot;CAP_&quot;前缀，比如&quot;NET_ADMIN&quot;</span><br><span class="line">或&quot;SETPCAP&quot;。请参考http://man7.org/linux/man-pages/man7/capabilities.7.html 获取Linux能力的列表。</span><br><span class="line">  如果未提供任何能力，则该服务将被移除所有能力，即使它以root用户运行。</span><br><span class="line"></span><br><span class="line">`class &lt;name&gt; [ &lt;name&gt;\* ]`</span><br><span class="line">&gt; 为该服务指定类名（class names）。一个指定类的所有服务可以一起启动或停止。如果没有通过class选项指定类名，则该服务默认为</span><br><span class="line">&quot;default&quot;类。除了（必需的）第一个类名外，额外的类名用于分组服务。</span><br><span class="line">  &quot;animation&quot;类应包括所有启动动画和关机动画所需的服务。由于这些服务可以在启动过程的非常早期被启动，并且可能一直运行到关机</span><br><span class="line">  的最后阶段，因此不能保证可以访问/data分区。这些服务可以检查/data下的文件，但不能保持文件处于打开状态，且在/data不可用时应该正常工作。</span><br><span class="line"></span><br><span class="line">`console [&lt;console&gt;]`</span><br><span class="line">&gt; 该服务需要一个控制台。可选的第二个参数选择一个特定的控制台，而不使用默认规定的控制台。默认的&quot;/dev/console&quot;可以通过设置</span><br><span class="line">&quot;androidboot.console&quot;内核参数来更改。在所有情况下，应省略&quot;/dev/&quot;前缀，所以&quot;/dev/tty0&quot;可以指定为&quot;console tty0&quot;。</span><br><span class="line">  此选项将标准输入、标准输出和标准错误连接到控制台。它与stdio_to_kmsg选项互斥，后者只将标准输出和标准错误连接到kmsg。</span><br><span class="line"></span><br><span class="line">`critical [window=&lt;fatal crash window分钟&gt;] [target=&lt;fatal reboot目标&gt;]`</span><br><span class="line">&gt; 这是一个设备关键的服务。如果在_fatal crash window分钟_内它退出了超过四次，或者在启动完成之前退出，设备将重新启动到</span><br><span class="line">_fatal reboot目标_。</span><br><span class="line">  _fatal crash window分钟_的默认值为4，_fatal reboot目标_的默认值为&#x27;bootloader&#x27;。</span><br><span class="line">  可以通过将属性`init.svc_debug.no_fatal.&lt;service-name&gt;`设置为`true`来跳过对指定关键服务的致命重启，以进行测试。</span><br><span class="line">  </span><br><span class="line">  `disabled`</span><br><span class="line">&gt; 这个服务不会随其类一起自动启动。</span><br><span class="line">  必须通过名称或接口名称显式启动。</span><br><span class="line"></span><br><span class="line">`enter_namespace &lt;type&gt; &lt;path&gt;`</span><br><span class="line">&gt; 进入位于 _path_ 的 _type_ 类型的命名空间。仅支持网络命名空间，_type_ 设置为 &quot;net&quot;。请注意，每种 _type_ 类型只能进入一</span><br><span class="line">个命名空间。</span><br><span class="line"></span><br><span class="line">`file &lt;path&gt; &lt;type&gt;`</span><br><span class="line">&gt; 打开文件路径并将其文件描述符传递给启动的进程。_type_ 必须为</span><br><span class="line">  &quot;r&quot;、&quot;w&quot; 或 &quot;rw&quot;。对于原生可执行文件，请参阅 libcutils</span><br><span class="line">  android\_get\_control\_file()。</span><br><span class="line"></span><br><span class="line">`group &lt;groupname&gt; [ &lt;groupname&gt;\* ]`</span><br><span class="line">&gt; 在执行此服务之前切换到“groupname”。除了（必需的）第一个 groupname 之外的其他 groupname 用于设置进程的附加组（通过 </span><br><span class="line">	setgroups()）。</span><br><span class="line">  当前默认为 root。 （？？？应该默认为 nobody）</span><br><span class="line"></span><br><span class="line">`interface &lt;interface name&gt; &lt;instance name&gt;`</span><br><span class="line">&gt; 将此服务与其提供的一组 AIDL 或 HIDL 服务关联起来。接口名称必须是完全限定的名称而不是值名称。例如，这用于允许 servicemanager</span><br><span class="line">	或 hwservicemanager 惰性启动服务。</span><br><span class="line">  当提供多个接口时，此标记应多次使用。HIDL 接口的示例条目是 `interface vendor.foo.bar@1.0::IBaz default`。对于 AIDL 接口，</span><br><span class="line">  请使用`interface aidl &lt;instance name&gt;`。AIDL 接口的实例名称是</span><br><span class="line">  与 servicemanager 注册的实例名称一致，可以使用 `adb</span><br><span class="line">  shell dumpsys -l` 列出它们。</span><br><span class="line"></span><br><span class="line">`ioprio &lt;class&gt; &lt;priority&gt;`</span><br><span class="line">&gt; 通过 SYS_ioprio_set 系统调用设置此服务的 IO 优先级和 IO 优先级类。</span><br><span class="line">  _class_ 必须是 &quot;rt&quot;、&quot;be&quot; 或 &quot;idle&quot; 中的一个。_priority_ 必须是 0 - 7 范围内的整数。</span><br><span class="line"></span><br><span class="line">`keycodes &lt;keycode&gt; [ &lt;keycode&gt;\* ]`</span><br><span class="line">&gt; 设置触发该服务的按键代码。如果同时按下与传递的按键代码对应的所有按键，则服务将启动。这通常用于启动 bugreport 服务。</span><br><span class="line"></span><br><span class="line">&gt; 此选项可以接受属性而不是按键代码列表。在这种情况下，提供一个选项：按典型属性扩展格式的属性名。属性必须包含逗号分隔的按键代</span><br><span class="line">码值列表或文本 &#x27;none&#x27;，表示该服务不响应按键代码。</span><br><span class="line"></span><br><span class="line">&gt; 例如，`keycodes $&#123;some.property.name:-none&#125;`，其中 some.property.name 扩展</span><br><span class="line">  为 &quot;123,124,125&quot;。由于按键代码在 init 非常早期处理，</span><br><span class="line">  只能使用 PRODUCT_DEFAULT_PROPERTY_OVERRIDES 属性。</span><br><span class="line"></span><br><span class="line">`memcg.limit_in_bytes &lt;value&gt;` 和 `memcg.limit_percent &lt;value&gt;`</span><br><span class="line">&gt; 将子进程的 memory.limit_in_bytes 设置为 `limit_in_bytes`</span><br><span class="line">  字节和 `limit_percent` 中较小的一个，`limit_percent` 表示设备物理内存大小的百分比（仅在 memcg 挂载时）。</span><br><span class="line">  值必须大于等于 0。</span><br><span class="line"></span><br><span class="line">`memcg.limit_property &lt;value&gt;`</span><br><span class="line">&gt; 将子进程的 memory.limit_in_bytes 设置为指定属性的值（仅在 memcg 挂载时）。此属性将覆盖通过 `memcg.limit_in_bytes` </span><br><span class="line">和 `memcg.limit_percent` 指定的值。</span><br><span class="line"></span><br><span class="line">`memcg.soft_limit_in_bytes &lt;value&gt;`</span><br><span class="line">&gt; 将子进程的 memory.soft_limit_in_bytes 设置为指定值（仅在 memcg 挂载时），该值必须大于等于 0。</span><br><span class="line"></span><br><span class="line">`memcg.swappiness &lt;value&gt;`</span><br><span class="line">&gt; 将子进程的 memory.swappiness 设置为指定值（仅在 memcg 挂载时），该值必须大于等于 0。</span><br><span class="line"></span><br><span class="line">`namespace &lt;pid|mnt&gt;`</span><br><span class="line">&gt; 在 fork 服务时进入新的 PID 或挂载命名空间。</span><br><span class="line"></span><br><span class="line">`oneshot`</span><br><span class="line">&gt; 当服务退出时不重新启动。</span><br><span class="line"></span><br><span class="line">`onrestart`</span><br><span class="line">&gt; 在服务重新启动时执行命令（参见下文）。</span><br><span class="line"></span><br><span class="line">`oom_score_adjust &lt;value&gt;`</span><br><span class="line">&gt; 将子进程的 /proc/self/oom\_score\_adj 设置为指定值，</span><br><span class="line">  该值必须在 -1000 到 1000 范围内。</span><br><span class="line"></span><br><span class="line">`override`</span><br><span class="line">&gt; 表示此服务定义旨在覆盖先前定义的具有相同名称的服务。这通常用于在 /odm 上覆盖在 /vendor 上定义的服务。init 解析的具有此关</span><br><span class="line">	键字的最后一个服务定义将用于此服务。</span><br><span class="line">  请注意 init.rc 文件解析的顺序，因为出于向后兼容性原因，它具有一些特殊性。此文件的 &#x27;imports&#x27; 部分详细介绍了顺序。</span><br><span class="line"></span><br><span class="line">`priority &lt;priority&gt;`</span><br><span class="line">&gt; 服务进程的调度优先级。该值必须在</span><br><span class="line">  -20 到 19 的范围内。默认优先级为 0。优先级通过 setpriority() 设置。</span><br><span class="line">  </span><br><span class="line">  `reboot_on_failure &lt;目标&gt;`</span><br><span class="line">&gt; 如果该进程无法启动，或者进程以CLD_EXITED以外的退出代码或非0的状态码终止，则重新启动带有指定目标的系统。_target_ 的格式与</span><br><span class="line">sys.powerctl的参数相同。这主要用于在启动期间进行一些必要的检查。</span><br><span class="line"></span><br><span class="line">`restart_period &lt;秒数&gt;`</span><br><span class="line">&gt; 如果非一次性服务退出，则在其启动时间加上此持续时间后重新启动。默认为5秒，用于限制崩溃服务的速率。可以增加此值以适应定期运行</span><br><span class="line">的服务。例如，可以将其设置为3600表示服务应每小时运行一次，或者设置为86400表示服务应每天运行一次。</span><br><span class="line"></span><br><span class="line">`rlimit &lt;资源&gt; &lt;当前值&gt; &lt;最大值&gt;`</span><br><span class="line">&gt; 将给定的rlimit应用于服务。rlimit会被子进程继承，因此这实际上将给定的rlimit应用于由此服务启动的进程树。解析方式与下面的</span><br><span class="line">setrlimit命令类似。</span><br><span class="line"></span><br><span class="line">`seclabel &lt;安全标签&gt;`</span><br><span class="line">&gt; 在执行此服务之前切换到“seclabel”。主要用于从根文件系统运行的服务，例如ueventd、adbd。位于系统分区上的服务可以根据其文件</span><br><span class="line">安全上下文使用策略定义的转换代替。如果未指定，并且策略中未定义转换，则默认为init上下文。</span><br><span class="line"></span><br><span class="line">`setenv &lt;变量名&gt; &lt;值&gt;`</span><br><span class="line">&gt; 在启动的进程中将环境变量_name_设置为_value_。</span><br><span class="line"></span><br><span class="line">`shutdown &lt;关机行为&gt;`</span><br><span class="line">&gt; 设置服务进程的关机行为。如果未指定，则在关机过程中使用SIGTERM和SIGKILL终止服务。使用&quot;critical&quot;关机行为的服务在关机期间不</span><br><span class="line">会被终止，直到关机超时。当关机超时时，即使标记为&quot;shutdown critical&quot;的服务也会被终止。如果在关机开始时标记为</span><br><span class="line">&quot;shutdown critical&quot;的服务未运行，则会启动该服务。</span><br><span class="line"></span><br><span class="line">`sigstop`</span><br><span class="line">&gt; 在调用exec之前立即向服务发送SIGSTOP信号。这用于调试。关于如何使用该选项的更多信息，请参见下面有关调试的部分。</span><br><span class="line"></span><br><span class="line">`socket &lt;名称&gt; &lt;类型&gt; &lt;权限&gt; [ &lt;用户&gt; [ &lt;组&gt; [ &lt;安全标签&gt; ] ] ]`</span><br><span class="line">&gt; 创建名为/dev/socket/_name_的UNIX域套接字，并将其文件描述符传递给启动的进程。_type_必须是&quot;dgram&quot;、&quot;stream&quot;或&quot;seqpacket&quot;。</span><br><span class="line">_type_可以以&quot;+passcred&quot;结尾，以启用套接字上的SO_PASSCRED选项。用户和组默认为0。&#x27;seclabel&#x27;是套接字的SELinux安全上下文。它默</span><br><span class="line">认为服务的安全上下文，如seclabel中指定的，或根据服务可执行文件的安全上下文计算得出。对于原生可执行文件，请参见</span><br><span class="line">libcutils android\_get\_control\_socket()。</span><br><span class="line"></span><br><span class="line">`stdio_to_kmsg`</span><br><span class="line">&gt; 将stdout和stderr重定向到/dev/kmsg_debug。这对于在早期启动期间不使用本机Android日志记录且我们希望捕获其日志消息的服务非常</span><br><span class="line">有用。仅当启用/dev/kmsg_debug时，即仅在userdebug和eng构建上启用时，才会启用此功能。这与console选项互斥，console选项还会将</span><br><span class="line">stdin连接到给定的控制台。</span><br><span class="line"></span><br><span class="line">`task_profiles &lt;配置文件&gt; [ &lt;配置文件&gt;* ]`</span><br><span class="line">&gt; 在进程分叉时为进程设置任务配置文件。这旨在取代使用writepid选项将进程移动到cgroup的方法。</span><br><span class="line"></span><br><span class="line">`timeout_period &lt;秒数&gt;`</span><br><span class="line">&gt; 提供超时时间，在该时间之后，服务将被终止。在这里，将尊重oneshot关键字，因此一次性服务不会自动重新启动，但其他所有服务都会</span><br><span class="line">重新启动。这对于创建与上面描述的restart_period选项结合使用的周期性服务特别有用。</span><br><span class="line"></span><br><span class="line">`updatable`</span><br><span class="line">&gt; 标记服务可以后续被APEX覆盖（通过&#x27;override&#x27;选项）。具有可更新选项的服务在APEX全部激活之前启动时，执行将会延迟，直到激活完</span><br><span class="line">成。不标记为可更新的服务无法被APEX覆盖。</span><br><span class="line"></span><br><span class="line">`user &lt;用户名&gt;`</span><br><span class="line">&gt; 在执行此服务之前切换到&#x27;username&#x27;。当前默认为root。（？？？可能应默认为nobody）从Android M版本开始，即使进程需要Linux特</span><br><span class="line">权，也应使用此选项。以前，为了获取Linux特权，进程需要以root身份运行，请求特权，然后切换到所需的uid。这里有一种新的机制，通</span><br><span class="line">过fs\_config允许设备厂商向特定文件系统上的特定二进制文件添加Linux特权。该机制在</span><br><span class="line">&lt;http://source.android.com/devices/tech/config/filesystem.html&gt;上进行了描述。使用此新机制时，进程可以使用user选项选择其</span><br><span class="line">所需的uid，而无需以root身份运行。从Android O开始，进程还可以在其.rc文件中直接请求特权。参见下面的&quot;capabilities&quot;选项。</span><br><span class="line"></span><br><span class="line">`writepid &lt;文件&gt; [ &lt;文件&gt;* ]`</span><br><span class="line">&gt; 当进程分叉时，将子进程的pid写入给定的文件。用于cgroup/cpuset。如果未指定/dev/cpuset/下的文件，但系统属性</span><br><span class="line">&#x27;ro.cpuset.default&#x27;设置为非空的cpuset名称（例如&#x27;/foreground&#x27;），则pid将写入文件/dev/cpuset/_cpuset\_name_/tasks。</span><br><span class="line">对于将进程移动到cgroup，此选项的使用已过时。请改用task_profiles选项。</span><br><span class="line"></span><br><span class="line">触发器</span><br><span class="line">--------</span><br><span class="line">触发器是用来匹配特定类型事件并引发某个动作的字符串。</span><br><span class="line"></span><br><span class="line">触发器被分为事件触发器和属性触发器。</span><br><span class="line"></span><br><span class="line">事件触发器是由&#x27;trigger&#x27;命令或在init可执行文件中使用QueueEventTrigger()函数引发的字符串。它们采用简单的字符串形式，比</span><br><span class="line">如&#x27;boot&#x27;或&#x27;late-init&#x27;。</span><br><span class="line"></span><br><span class="line">属性触发器是在命名属性的值变为给定新值或命名属性的值变为任意新值时引发的字符串。它们采用&#x27;property:&lt;name&gt;=&lt;value&gt;&#x27;</span><br><span class="line">和&#x27;property:&lt;name&gt;=\*&#x27;的形式。在init的初始引导阶段，属性触发器还会进行评估并相应地引发。</span><br><span class="line"></span><br><span class="line">一个动作可以有多个属性触发器，但只能有一个事件触发器。</span><br><span class="line"></span><br><span class="line">例如：</span><br><span class="line">`on boot &amp;&amp; property:a=b`定义了一个只有在&#x27;boot&#x27;事件触发发生且属性a等于b时才执行的动作。</span><br><span class="line"></span><br><span class="line">`on property:a=b &amp;&amp; property:c=d`定义了一个在以下三种情况下执行的动作：</span><br><span class="line"></span><br><span class="line">   1. 在初始引导期间，如果属性a=b且属性c=d。</span><br><span class="line">   2. 每当属性a从其他值过渡到值b时，而属性c已经等于d。</span><br><span class="line">   3. 每当属性c从其他值过渡到值d时，而属性a已经等于b。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">触发器顺序</span><br><span class="line">----------------</span><br><span class="line"></span><br><span class="line">在早期引导过程中，init使用以下一系列触发器。这些是在init.cpp中定义的内置触发器。</span><br><span class="line"></span><br><span class="line">   1. `early-init` - 首个触发器，在cgroups被配置之后、ueventd的冷启动完成之前触发。</span><br><span class="line">   2. `init` - 冷启动完成后触发。</span><br><span class="line">   3. `charger` - 如果`ro.bootmode == &quot;charger&quot;`，则触发。</span><br><span class="line">   4. `late-init` - 如果`ro.bootmode != &quot;charger&quot;`，或者通过healthd从充电模式启动，则触发。</span><br><span class="line"></span><br><span class="line">剩余的触发器由`init.rc`中配置，并非内置的。这些触发器的默认顺序在`init.rc`的&quot;on late-init&quot;事件下指定。在`init.rc`内部的</span><br><span class="line">动作被省略。</span><br><span class="line"></span><br><span class="line">   1. `early-fs` - 启动vold。</span><br><span class="line">   2. `fs` - Vold已启动。将未标记为first-stage或latemounted的分区挂载。</span><br><span class="line">   3. `post-fs` - 配置任何依赖早期挂载的内容。</span><br><span class="line">   4. `late-fs` - 挂载被标记为latemounted的分区。</span><br><span class="line">   5. `post-fs-data` - 挂载和配置`/data`；设置加密。如果在第一阶段init中无法挂载`/metadata`，则在这里重新格式化。</span><br><span class="line">   6. `zygote-start` - 启动Zygote。</span><br><span class="line">   7. `early-boot` - 在Zygote启动后。</span><br><span class="line">   8. `boot` - 在`early-boot`动作完成后。</span><br><span class="line">   </span><br><span class="line">   命令</span><br><span class="line">----</span><br><span class="line"></span><br><span class="line">`bootchart [start|stop]`</span><br><span class="line">&gt; 启动/停止启动图表记录。这些命令在默认的init.rc文件中存在，但仅当文件/data/bootchart/enabled存在时，启动图表记录才会生</span><br><span class="line">效；否则，启动图表记录的start/stop命令不起作用。</span><br><span class="line"></span><br><span class="line">`chmod &lt;octal-mode&gt; &lt;path&gt;`</span><br><span class="line">&gt; 更改文件访问权限。</span><br><span class="line"></span><br><span class="line">`chown &lt;owner&gt; &lt;group&gt; &lt;path&gt;`</span><br><span class="line">&gt; 更改文件所有者和组。</span><br><span class="line"></span><br><span class="line">`class_start &lt;serviceclass&gt;`</span><br><span class="line">&gt; 如果指定类别的所有服务尚未运行，则启动它们。有关启动服务的更多信息，请参阅启动条目。</span><br><span class="line"></span><br><span class="line">`class_stop &lt;serviceclass&gt;`</span><br><span class="line">&gt; 如果指定类别的所有服务当前正在运行，则停止并禁用它们。</span><br><span class="line"></span><br><span class="line">`class_reset &lt;serviceclass&gt;`</span><br><span class="line">&gt; 如果指定类别的所有服务当前正在运行，则停止它们，但不禁用。稍后可以使用`class_start`命令重新启动它们。</span><br><span class="line"></span><br><span class="line">`class_restart [--only-enabled] &lt;serviceclass&gt;`</span><br><span class="line">&gt; 重新启动指定类别的所有服务。如果指定了`--only-enabled`选项，则跳过已禁用的服务。</span><br><span class="line"></span><br><span class="line">`copy &lt;src&gt; &lt;dst&gt;`</span><br><span class="line">&gt; 复制文件。与write类似，但适用于二进制/大量数据。关于src文件，不允许从符号链接文件和world-writable或group-writable文件</span><br><span class="line">复制。关于dst文件，如果文件不存在，则创建的默认模式是0600。如果dst文件是一个普通常规文件并且已经存在，则会被截断。</span><br><span class="line"></span><br><span class="line">`copy_per_line &lt;src&gt; &lt;dst&gt;`</span><br><span class="line">&gt; 逐行复制文件。与copy类似，但适用于dst是不能处理多行数据的sysfs节点。</span><br><span class="line"></span><br><span class="line">`domainname &lt;name&gt;`</span><br><span class="line">&gt; 设置域名。</span><br><span class="line"></span><br><span class="line">`enable &lt;servicename&gt;`</span><br><span class="line">&gt; 将禁用的服务变为启用状态，就好像该服务未指定禁用一样。</span><br><span class="line">  如果该服务应该在运行，则现在它将被启动。</span><br><span class="line">  通常在引导加载程序设置指定特定服务在需要时启动的变量时使用。例如：</span><br><span class="line"></span><br><span class="line">    on property:ro.boot.myfancyhardware=1</span><br><span class="line">        enable my_fancy_service_for_my_fancy_hardware</span><br><span class="line"></span><br><span class="line">`exec [ &lt;seclabel&gt; [ &lt;user&gt; [ &lt;group&gt;\* ] ] ] -- &lt;command&gt; [ &lt;argument&gt;\* ]`</span><br><span class="line">&gt; 分支并以给定的参数执行命令。命令在“--”之后开始，以便可以提供可选的安全上下文、用户和辅助组。在此命令完成之前，不会执行其他</span><br><span class="line">命令。_seclabel_可以是“-”表示默认值。属性会在_argument_中展开。</span><br><span class="line">  Init会等待分支的进程退出后再继续执行命令。</span><br><span class="line"></span><br><span class="line">`exec_background [ &lt;seclabel&gt; [ &lt;user&gt; [ &lt;group&gt;\* ] ] ] -- &lt;command&gt; [ &lt;argument&gt;\* ]`</span><br><span class="line">&gt; 分支并以给定的参数执行命令。这与“exec”命令类似处理。</span><br><span class="line">  不同之处在于，对于`exec_background`，init不会在该进程退出之前停止执行命令。</span><br><span class="line"></span><br><span class="line">`exec_start &lt;service&gt;`</span><br><span class="line">&gt; 启动给定的服务，并暂停处理其他init命令，直到该服务返回。该命令的功能类似于“exec”命令，但使用现有的服务定义替代exec参数向量。</span><br><span class="line"></span><br><span class="line">`export &lt;name&gt; &lt;value&gt;`</span><br><span class="line">&gt; 在全局环境中将环境变量_name_设置为_value_（该变量将被所有在执行此命令后启动的进程继承）</span><br><span class="line"></span><br><span class="line">`hostname &lt;name&gt;`</span><br><span class="line">&gt; 设置主机名。</span><br><span class="line"></span><br><span class="line">`ifup &lt;interface&gt;`</span><br><span class="line">&gt; 将网络接口_interface_上线。</span><br><span class="line"></span><br><span class="line">`insmod [-f] &lt;path&gt; [&lt;options&gt;]`</span><br><span class="line">&gt; 使用指定选项安装_path_处的模块。</span><br><span class="line">  -f: 强制安装模块，即使运行的内核版本和编译该模块的内核版本不匹配。</span><br><span class="line"></span><br><span class="line">`interface_start &lt;name&gt;`</span><br><span class="line">`interface_restart &lt;name&gt;`</span><br><span class="line">`interface_stop &lt;name&gt;`</span><br><span class="line">&gt; 查找提供接口_name_的服务（如果存在），并在其上分别运行`start`、`restart`或`stop`命令。_name_可以是完全限定的HIDL名称，</span><br><span class="line">格式为`&lt;interface&gt;/&lt;instance&gt;`，也可以是AIDL名称，格式为`aidl/&lt;interface&gt;`，例</span><br><span class="line">如`android.hardware.secure_element@1.1::ISecureElement/eSE1`或`aidl/aidl_lazy_test_1`。</span><br><span class="line"></span><br><span class="line">&gt; 注意，这些命令只作用于由`interface`服务选项指定的接口，而不作用于动态注册的接口。</span><br><span class="line"></span><br><span class="line">&gt; 这些命令的示例用法：\</span><br><span class="line">`interface_start android.hardware.secure_element@1.1::ISecureElement/eSE1`将启动</span><br><span class="line">提供`android.hardware.secure_element@1.1`和`eSI1`实例的HIDL服务。\</span><br><span class="line">`interface_start aidl/aidl_lazy_test_1`将启动提供`aidl_lazy_test_1`接口的AIDL服务。</span><br><span class="line"></span><br><span class="line">`load_exports &lt;path&gt;`</span><br><span class="line">&gt; 打开_path_处的文件，并导出其中声明的全局环境变量。每一行必须按照上述格式`export &lt;name&gt; &lt;value&gt;`。</span><br><span class="line"></span><br><span class="line">`load_system_props`</span><br><span class="line">&gt; （此操作已弃用，并且不会执行任何操作。）</span><br><span class="line"></span><br><span class="line">`load_persist_props`</span><br><span class="line">&gt; 在/data被解密后加载持久属性。</span><br><span class="line">  这在默认的init.rc中包含。</span><br><span class="line"></span><br><span class="line">`loglevel &lt;level&gt;`</span><br><span class="line">&gt; 将init的日志级别设置为整数级别，从7（所有日志）到0（仅致命日志）。数字值对应于内核日志级别，但此命令不会影响内核日志级别。</span><br><span class="line">使用`write`命令写入`/proc/sys/kernel/printk`以更改内核日志级别。属性在_level_中展开。</span><br><span class="line"></span><br><span class="line">`mark_post_data`</span><br><span class="line">&gt; 用于标记/data挂载后的点。</span><br><span class="line"></span><br><span class="line">`mkdir &lt;path&gt; [&lt;mode&gt;] [&lt;owner&gt;] [&lt;group&gt;] [encryption=&lt;action&gt;] [key=&lt;key&gt;]`</span><br><span class="line">&gt; 在_path_处创建目录，可选择使用给定的模式、所有者和组。如果未提供，目录将以权限755创建，并由root用户和root组拥有。如果提供</span><br><span class="line">了该参数，将在目录已存在时更新模式、所有者和组。</span><br><span class="line"></span><br><span class="line">&gt; _action_可以是以下之一：</span><br><span class="line">  * `None`：不采取加密操作；如果父目录已加密，则目录将被加密。</span><br><span class="line">  * `Require`：加密目录，如果加密失败，则中止引导过程。</span><br><span class="line">  * `Attempt`：尝试设置加密策略，如果失败继续执行。</span><br><span class="line">  * `DeleteIfNecessary`：递归删除必要的目录以设置加密策略。</span><br><span class="line"></span><br><span class="line">&gt; _key_可以是以下之一：</span><br><span class="line">  * `ref`：使用系统范围的DE密钥</span><br><span class="line">  * `per_boot_ref`：使用每次启动时新生成的密钥。</span><br><span class="line"></span><br><span class="line">`mount_all [ &lt;fstab&gt; ] [--&lt;option&gt;]`</span><br><span class="line">&gt; 在给定的fs\_mgr格式fstab上调用fs\_mgr\_mount\_all，可选使用选项&quot;early&quot;和&quot;late&quot;。</span><br><span class="line">  如果设置了“--early”，init可执行文件将跳过具有“latemount”标志的挂载条目，并触发fs加密状态事件。如果设置了“--late”，init</span><br><span class="line">  可执行文件将仅挂载具有“latemount”标志的条目。默认情况下，未设置选项，并且mount\_all将处理给定fstab中的所有条目。</span><br><span class="line">  如果未指定fstab参数，则在运行时将扫描fstab.$&#123;ro.boot.fstab_suffix&#125;、fstab.$&#123;ro.hardware&#125;</span><br><span class="line">  或fstab.$&#123;ro.hardware.platform&#125;，按照/odm/etc、/vendor/etc或/的顺序。</span><br><span class="line">  </span><br><span class="line">  `mount &lt;类型&gt; &lt;设备&gt; &lt;目录&gt; [ &lt;标志&gt;\*] [&lt;选项&gt;]`</span><br><span class="line">&gt; 尝试将指定的设备挂载到目录_dir_上。</span><br><span class="line">  _标志_包括&quot;ro&quot;、&quot;rw&quot;、&quot;remount&quot;、&quot;noatime&quot;，...</span><br><span class="line">  _选项_是一个逗号分隔的字符串，例如，barrier=1,noauto\_da\_alloc</span><br><span class="line"></span><br><span class="line">`perform_apex_config`</span><br><span class="line">&gt; 在APEX挂载后执行任务。例如，为已挂载的APEX创建数据目录、解析其配置文件，并更新链接器配置。仅在apexd将`apexd.status`设</span><br><span class="line">置为ready时通知挂载事件时使用。</span><br><span class="line"></span><br><span class="line">`restart [--only-if-running] &lt;服务&gt;`</span><br><span class="line">&gt; 停止并重启正在运行的服务，如果服务当前正在重新启动，则不执行任何操作，否则，仅启动服务。如果指定了&quot;--only-if-running&quot;，</span><br><span class="line">则只有在服务已经运行时才会重启服务。</span><br><span class="line"></span><br><span class="line">`restorecon &lt;路径&gt; [ &lt;路径&gt;\* ]`</span><br><span class="line">&gt; 将名为_path_的文件恢复为文件上指定的安全上下文中的状态。</span><br><span class="line">  对于由init.rc创建的目录不需要此操作，因为它们会自动进行正确的标记。</span><br><span class="line"></span><br><span class="line">`restorecon_recursive &lt;路径&gt; [ &lt;路径&gt;\* ]`</span><br><span class="line">&gt; 递归地将名为_path_的目录树恢复为文件上指定的安全上下文中的状态。</span><br><span class="line"></span><br><span class="line">`rm &lt;路径&gt;`</span><br><span class="line">&gt; 对给定路径调用unlink(2)。如果系统分区已经挂载，可能应该使用</span><br><span class="line">&quot;exec -- rm ...&quot; (provided the system partition is already mounted)。</span><br><span class="line"></span><br><span class="line">`rmdir &lt;路径&gt;`</span><br><span class="line">&gt; 对给定路径调用rmdir(2)。</span><br><span class="line"></span><br><span class="line">`readahead &lt;文件|目录&gt; [--fully]`</span><br><span class="line">&gt; 对给定的文件或指定目录中的文件调用readahead(2)。使用选项--fully以读取完整的文件内容。</span><br><span class="line"></span><br><span class="line">`setprop &lt;名称&gt; &lt;值&gt;`</span><br><span class="line">&gt; 将系统属性_name_的值设置为_value_。属性将在_value_中进行扩展。</span><br><span class="line"></span><br><span class="line">`setrlimit &lt;资源&gt; &lt;当前值&gt; &lt;最大值&gt;`</span><br><span class="line">&gt; 设置资源的rlimit。此设置将应用于在限制设置后启动的所有进程。它旨在在init早期进行设置，并应用于全局。</span><br><span class="line">  _资源_最好使用其文本表示（&#x27;cpu&#x27;、&#x27;rtio&#x27;等）或&#x27;RLIM_CPU&#x27;、&#x27;RLIM_RTIO&#x27;等表示。也可以将其指定为资源枚举对应的整数值。</span><br><span class="line">  _当前值_和_最大值_可以设置为&#x27;unlimited&#x27;或&#x27;-1&#x27;，表示无限制的rlimit。</span><br><span class="line">  </span><br><span class="line">  开始&lt;service&gt;</span><br><span class="line">通过启动服务来运行，如果服务尚未运行。</span><br><span class="line">请注意，这不是同步的，即使是同步的，也不能保证操作系统的调度程序会执行足够的次数来保证服务的状态。</span><br><span class="line">有关同步版本的&quot;start&quot;命令，请参阅&quot;exec_start&quot;命令。</span><br><span class="line"></span><br><span class="line">这带来了一个重要的结果，如果服务向其他服务提供功能，例如提供通信通道，那么仅仅在那些服务之前启动此服务是不足以保证在那些服务</span><br><span class="line">请求它之前已经建立了通道的。必须有一种单独的机制来做出任何这样的保证。</span><br><span class="line"></span><br><span class="line">停止&lt;service&gt;</span><br><span class="line">如果服务当前正在运行，则停止运行。</span><br><span class="line"></span><br><span class="line">swapon_all [&lt;fstab&gt;]</span><br><span class="line">在给定的fstab文件上调用fs_mgr_swapon_all命令。</span><br><span class="line">如果没有指定fstab参数，则会在/odm/etc、/vendor/etc或/根目录下以fstab.$&#123;ro.boot.fstab_suffix&#125;、fstab.$&#123;ro.hardware&#125;</span><br><span class="line">或fstab.$&#123;ro.hardware.platform&#125;的顺序进行扫描。</span><br><span class="line"></span><br><span class="line">symlink &lt;target&gt; &lt;path&gt;</span><br><span class="line">在路径_path_上创建一个带有值_target_的符号链接。</span><br><span class="line"></span><br><span class="line">sysclktz &lt;minutes_west_of_gmt&gt;</span><br><span class="line">设置系统时钟基准（如果系统时钟在GMT中嘀嗒，则为0）</span><br><span class="line"></span><br><span class="line">trigger &lt;event&gt;</span><br><span class="line">触发一个事件。用于将一个动作排队从另一个动作中执行。</span><br><span class="line"></span><br><span class="line">umount &lt;path&gt;</span><br><span class="line">卸载位于该路径的文件系统。</span><br><span class="line"></span><br><span class="line">umount_all [&lt;fstab&gt;]</span><br><span class="line">在给定的fstab文件上调用fs_mgr_umount_all命令。</span><br><span class="line">如果没有指定fstab参数，则会在/odm/etc、/vendor/etc或/根目录下以fstab.$&#123;ro.boot.fstab_suffix&#125;、fstab.$&#123;ro.hardware&#125;</span><br><span class="line">或fstab.$&#123;ro.hardware.platform&#125;的顺序进行扫描。</span><br><span class="line"></span><br><span class="line">verity_update_state</span><br><span class="line">用于更新dm-verity状态并设置由adb remount使用的partition._mount-point_.verified属性的内部实现细节，因为fs_mgr不能直接设</span><br><span class="line">置这些属性。这是自Android 12以来所需的，因为CtsNativeVerifiedBootTestCases将读取属性</span><br><span class="line">&quot;partition.$&#123;partition&#125;.verified.hash_alg&quot;以检查是否使用了sha1。有关更多详情，请参见https://r.android.com/1546980。</span><br><span class="line"></span><br><span class="line">wait &lt;path&gt; [&lt;timeout&gt;]</span><br><span class="line">轮询给定文件的存在，直到找到为止，或者超时已达到。如果未指定超时时间，默认为五秒。超时值可以是小数秒，以浮点数表示法指定。</span><br><span class="line"></span><br><span class="line">wait_for_prop &lt;name&gt; &lt;value&gt;</span><br><span class="line">等待系统属性_name_的值为_value_。_value_中的属性将被展开。如果属性_name_已经设置为_value_，则立即继续。</span><br><span class="line"></span><br><span class="line">write &lt;path&gt; &lt;content&gt;</span><br><span class="line">打开位于路径_path_的文件，并使用write(2)将字符串写入其中。</span><br><span class="line">如果文件不存在，则会创建文件。如果文件已存在，则会将其截断。_content_中的属性将被展开。</span><br><span class="line"></span><br><span class="line">导入</span><br><span class="line">-------</span><br><span class="line">`import &lt;路径&gt;`</span><br><span class="line">&gt; 解析一个init配置文件，扩展当前的配置。</span><br><span class="line">  如果`路径`是一个目录，则会解析目录中的每个文件作为配置文件。这是非递归的，嵌套目录不会被解析。</span><br><span class="line"></span><br><span class="line">import关键字不是一个命令，而是它自己的部分，即它不会作为一个动作的一部分发生，而是在解析文件时处理导入，并遵循以下逻辑。</span><br><span class="line"></span><br><span class="line">只有三种情况下，init可执行程序会导入.rc文件：</span><br><span class="line"></span><br><span class="line">   1. 当它在初始启动时导入`/system/etc/init/hw/init.rc`或由属性`ro.boot.init_rc`指示的脚本时。</span><br><span class="line">   2. 当它在导入`/system/etc/init/hw/init.rc`之后立即导入`/&#123;system,system_ext,vendor,odm,product&#125;/etc/init/`。</span><br><span class="line">   3. （不推荐使用）当它在mount_all期间导入/&#123;system,vendor,odm&#125;/etc/init/或.rc文件时，</span><br><span class="line">      不允许在Q之后启动的设备使用。</span><br><span class="line"></span><br><span class="line">文件的导入顺序因遗留原因而稍微复杂。以下是保证的：</span><br><span class="line"></span><br><span class="line">1. 首先，解析`/system/etc/init/hw/init.rc`，然后递归解析它的每个导入文件。</span><br><span class="line">2. `/system/etc/init/`的内容按字母顺序排序并顺序解析，每个文件解析后递归进行导入。</span><br><span class="line">3. 对`/system_ext/etc/init`，`/vendor/etc/init`，`/odm/etc/init`，`/product/etc/init`执行步骤2。</span><br><span class="line"></span><br><span class="line">下面的伪代码可以更清楚地解释这个问题：</span><br><span class="line"></span><br><span class="line">    fn Import(文件)</span><br><span class="line">      解析(文件)</span><br><span class="line">      for (导入 : 文件.导入)</span><br><span class="line">        导入(导入)</span><br><span class="line"></span><br><span class="line">    导入(/system/etc/init/hw/init.rc)</span><br><span class="line">    目录 = [/system/etc/init, /system_ext/etc/init, /vendor/etc/init, /odm/etc/init, /product/etc/init]</span><br><span class="line">    for (目录 : 目录)</span><br><span class="line">      文件 = &lt;按目录内容的字母顺序排序&gt;</span><br><span class="line">      for (文件 : 文件)</span><br><span class="line">        导入(文件)</span><br><span class="line"></span><br><span class="line">动作按照解析顺序执行。例如，在`/system/etc/init/hw/init.rc`中的`post-fs-data`动作总是按照它们在文件中出现的顺序执行。</span><br><span class="line">然后，按导入的顺序执行`/system/etc/init/hw/init.rc`的导入中的`post-fs-data`动作，依此类推。</span><br><span class="line"></span><br><span class="line">属性</span><br><span class="line">------</span><br><span class="line">Init提供以下属性的状态信息。</span><br><span class="line"></span><br><span class="line">`init.svc.&lt;名称&gt;`</span><br><span class="line">&gt; 一个命名服务的状态（&quot;stopped&quot;，&quot;stopping&quot;，&quot;running&quot;，&quot;restarting&quot;）</span><br><span class="line"></span><br><span class="line">`dev.mnt.dev.&lt;挂载点&gt;`，`dev.mnt.blk.&lt;挂载点&gt;`，`dev.mnt.rootdisk.&lt;挂载点&gt;`</span><br><span class="line">&gt; 与*挂载点*关联的块设备基本名称。</span><br><span class="line">  *挂载点*将/替换为.，如果引用根挂载点&quot;/&quot;，则使用&quot;/root&quot;。</span><br><span class="line">  `dev.mnt.dev.&lt;挂载点&gt;`表示附加到文件系统的块设备。</span><br><span class="line">    （例如，使用`$&#123;dev.mnt.dev.&lt;挂载点&gt;&#125;`/sys/fs/ext4/来访问）</span><br><span class="line"></span><br><span class="line">  `dev.mnt.blk.&lt;挂载点&gt;`表示上述块设备的磁盘分区。</span><br><span class="line">    （例如，使用`/sys/class/block/$&#123;dev.mnt.blk.&lt;挂载点&gt;&#125;`来访问）</span><br><span class="line"></span><br><span class="line">  `dev.mnt.rootdisk.&lt;挂载点&gt;`表示包含上述磁盘分区的根磁盘。</span><br><span class="line">    （例如，使用`/sys/class/block/$&#123;dev.mnt.rootdisk.&lt;挂载点&gt;&#125;/queue`来访问）</span><br><span class="line"></span><br><span class="line">Init会响应以`ctl.`开头的属性。这些属性的格式为`ctl.[&lt;target&gt;_]&lt;command&gt;`，系统属性的_value_将用作参数。</span><br><span class="line">_target_是可选的，指定_value_应与哪个服务选项匹配。_target_只有一个选项，即`interface`，表示_value_将引用服务提供的接口，</span><br><span class="line">而不是服务名称本身。</span><br><span class="line"></span><br><span class="line">例如：</span><br><span class="line"></span><br><span class="line">`SetProperty(&quot;ctl.start&quot;, &quot;logd&quot;)` 将在 `logd` 上运行 `start` 命令。</span><br><span class="line"></span><br><span class="line">`SetProperty(&quot;ctl.interface_start&quot;, &quot;aidl/aidl_lazy_test_1&quot;)` 将在公开 `aidl aidl_lazy_test_1` 接口的服务上运行</span><br><span class="line">`start` 命令。</span><br><span class="line"></span><br><span class="line">请注意，这些属性只是可设置的，当读取时它们没有值。</span><br><span class="line"></span><br><span class="line">以下是 _commands_。</span><br><span class="line"></span><br><span class="line">`start` \</span><br><span class="line">`restart` \</span><br><span class="line">`stop` \</span><br><span class="line">这等效于在由属性的 _value_ 指定的服务上使用 `start`、`restart` 和 `stop` 命令。</span><br><span class="line"></span><br><span class="line">`oneshot_on` 和 `oneshot_off` 将打开或关闭由属性的 _value_ 指定的服务的 _oneshot_ 标志。这特别适用于条件上懒加载硬件抽</span><br><span class="line">象层 (HAL) 的服务。当它们是懒加载 HAL 时，oneshot 必须开启，否则 oneshot 应该关闭。</span><br><span class="line"></span><br><span class="line">`sigstop_on` 和 `sigstop_off` 将打开或关闭由属性的 _value_ 指定的服务的 _sigstop_ 功能。有关此功能的更多详细信息，请参阅</span><br><span class="line">下面的 _Debugging init_ 部分。</span><br><span class="line"></span><br><span class="line">引导时间</span><br><span class="line">-----------</span><br><span class="line">Init 在系统属性中记录了一些引导时间信息。</span><br><span class="line"></span><br><span class="line">`ro.boottime.init`</span><br><span class="line">&gt; 使用 CLOCK_BOOTTIME 时钟以纳秒为单位记录的启动后阶段 init 开始的时间。</span><br><span class="line"></span><br><span class="line">`ro.boottime.init.first_stage`</span><br><span class="line">&gt; 运行第一阶段所需的时间，以纳秒为单位。</span><br><span class="line"></span><br><span class="line">`ro.boottime.init.selinux`</span><br><span class="line">&gt; 运行 SELinux 阶段所需的时间，以纳秒为单位。</span><br><span class="line"></span><br><span class="line">`ro.boottime.init.modules`</span><br><span class="line">&gt; 加载内核模块所需的时间，以毫秒为单位。</span><br><span class="line"></span><br><span class="line">`ro.boottime.init.cold_boot_wait`</span><br><span class="line">&gt; init 等待 ueventd 的冷启动阶段结束的时间，以毫秒为单位。</span><br><span class="line"></span><br><span class="line">`ro.boottime.&lt;service-name&gt;`</span><br><span class="line">&gt; 服务首次启动后的时间，以 CLOCK_BOOTTIME 时钟为单位，以纳秒表示。</span><br><span class="line"></span><br><span class="line">Bootcharting</span><br><span class="line">------------</span><br><span class="line">这个版本的init包含有执行“bootcharting”的代码：生成日志文件，可以在之后使用&lt;http://www.bootchart.org/&gt;提供的工具进行处理。</span><br><span class="line"></span><br><span class="line">在模拟器上，使用-bootchart _timeout_选项激活bootcharting功能，持续_timeout_秒。</span><br><span class="line"></span><br><span class="line">在设备上：</span><br><span class="line"></span><br><span class="line">    adb shell &#x27;touch /data/bootchart/enabled&#x27;</span><br><span class="line"></span><br><span class="line">完成数据收集后，请不要忘记删除此文件！</span><br><span class="line"></span><br><span class="line">日志文件将被写入到/data/bootchart/。提供了一个脚本来检索这些文件并创建一个可以与bootchart命令行工具一起使用的bootchart.tgz</span><br><span class="line">文件：</span><br><span class="line"></span><br><span class="line">    sudo apt-get install pybootchartgui</span><br><span class="line">    # grab-bootchart.sh使用$ANDROID_SERIAL。</span><br><span class="line">    $ANDROID_BUILD_TOP/system/core/init/grab-bootchart.sh</span><br><span class="line"></span><br><span class="line">需要注意的一点是，bootchart将显示init从0秒开始运行。您需要查看dmesg来确定内核实际上何时启动init。</span><br><span class="line"></span><br><span class="line">比较两个bootchart</span><br><span class="line">------------------------</span><br><span class="line">一个方便的脚本名为compare-bootcharts.py用于比较所选进程的开始/结束时间。上述的grab-bootchart.sh将</span><br><span class="line">在/tmp/android-bootchart下留下一个名为bootchart.tgz的bootchart tarball。如果在主机上的不同目录下保存了两个这</span><br><span class="line">样的tarballs，脚本可以列出时间戳的差异。例如：</span><br><span class="line"></span><br><span class="line">用法：system/core/init/compare-bootcharts.py _base-bootchart-dir_ _exp-bootchart-dir_</span><br><span class="line"></span><br><span class="line">    进程：基准 实验 (增量) - 单位为ms（系统上的jiffy是10ms）</span><br><span class="line">    ------------------------------------</span><br><span class="line">    /init: 50 40 (-10)</span><br><span class="line">    /system/bin/surfaceflinger: 4320 4470 (+150)</span><br><span class="line">    /system/bin/bootanimation: 6980 6990 (+10)</span><br><span class="line">    zygote64: 10410 10640 (+230)</span><br><span class="line">    zygote: 10410 10640 (+230)</span><br><span class="line">    system_server: 15350 15150 (-200)</span><br><span class="line">    bootanimation ends at: 33790 31230 (-2560)</span><br><span class="line"></span><br><span class="line">Systrace</span><br><span class="line">--------</span><br><span class="line">在userdebug或eng构建上，可以使用Systrace (&lt;http://developer.android.com/tools/help/systrace.html&gt;) 获取在启动过程中</span><br><span class="line">的性能分析报告。</span><br><span class="line"></span><br><span class="line">以下是“wm”和“am”类别的示例跟踪事件：</span><br><span class="line"></span><br><span class="line">    $ANDROID_BUILD_TOP/external/chromium-trace/systrace.py \</span><br><span class="line">          wm am --boot</span><br><span class="line"></span><br><span class="line">该命令将导致设备重新启动。设备重新启动并完成启动顺序后，通过按Ctrl+C从设备获取跟踪报告，并将其作为trace.html写入主机。</span><br><span class="line"></span><br><span class="line">限制：记录跟踪事件是在加载持久属性之后开始的，因此不记录在那之前发出的跟踪事件。一些服务，如vold、surfaceflinger和</span><br><span class="line">servicemanager受到此限制的影响，因为它们在加载持久属性之前启动。Zygote初始化和从Zygote派生的进程不受影响。</span><br><span class="line"></span><br><span class="line">调试初始化</span><br><span class="line">--------------</span><br><span class="line">当一个服务从init启动时，可能会无法`execv()`该服务。这种情况并不常见，可能是由于新服务启动时链接器发生错误引起的。Android中的</span><br><span class="line">链接器将其日志打印到`logd`和`stderr`中，因此它们可以在`logcat`中看到。如果在访问`logcat`之前遇到错误，可以使</span><br><span class="line">用`stdio_to_kmsg`服务选项将链接器打印到`stderr`中的日志导向到`kmsg`，然后可以通过串口读取这些日志。</span><br><span class="line"></span><br><span class="line">不建议在没有init的情况下启动init服务，因为init设置了大量环境（用户、组、安全标签、能力等），很难手动复制。</span><br><span class="line"></span><br><span class="line">如果需要从服务的起始位置开始调试，可以添加`sigstop`服务选项。该选项将在调用exec之前立即发送SIGSTOP给服务。在继续使用SIGCONT</span><br><span class="line">继续服务之前，开发者可以通过附加调试器、strace等进行调试。</span><br><span class="line"></span><br><span class="line">该标志也可以通过ctl.sigstop_on和ctl.sigstop_off属性动态控制。</span><br><span class="line"></span><br><span class="line">以下是通过上述方法动态调试logd的示例：</span><br><span class="line"></span><br><span class="line">    stop logd</span><br><span class="line">    setprop ctl.sigstop_on logd</span><br><span class="line">    start logd</span><br><span class="line">    ps -e | grep logd</span><br><span class="line">    &gt; logd          4343     1   18156   1684 do_signal_stop 538280 T init</span><br><span class="line">    gdbclient.py -p 4343</span><br><span class="line">    b main</span><br><span class="line">    c</span><br><span class="line">    c</span><br><span class="line">    c</span><br><span class="line">    &gt; Breakpoint 1, main (argc=1, argv=0x7ff8c9a488) at system/core/logd/main.cpp:427</span><br><span class="line"></span><br><span class="line">以下是使用strace进行相同操作的示例：</span><br><span class="line"></span><br><span class="line">    stop logd</span><br><span class="line">    setprop ctl.sigstop_on logd</span><br><span class="line">    start logd</span><br><span class="line">    ps -e | grep logd</span><br><span class="line">    &gt; logd          4343     1   18156   1684 do_signal_stop 538280 T init</span><br><span class="line">    strace -p 4343</span><br><span class="line"></span><br><span class="line">    （从另一个Shell执行）</span><br><span class="line">    kill -SIGCONT 4343</span><br><span class="line"></span><br><span class="line">    &gt; strace运行</span><br><span class="line"></span><br><span class="line">主机Init脚本验证</span><br><span class="line">-----------------------------</span><br><span class="line">在构建时会检查Init脚本的正确性。具体检查如下所示。</span><br><span class="line"></span><br><span class="line">1) 格式良好的action、service和import部分，例如没有在&#x27;import&#x27;语句之后多余的行，没有在&#x27;on&#x27;行之前的动作。</span><br><span class="line">2) 所有命令都映射到有效的关键词，并且参数计数在正确范围内。</span><br><span class="line">3) 所有服务选项都是有效的。这比命令检查更严格，因为服务选项的参数会完全解析，例如需要解析UID和GID。</span><br><span class="line"></span><br><span class="line">还有一些Init脚本的其他部分是仅在运行时解析的，因此在构建时不会进行检查，其中包括以下内容。</span><br><span class="line"></span><br><span class="line">1) 命令的参数的有效性，例如不会检查文件路径是否存在，SELinux是否允许操作，以及UID和GID是否可解析。</span><br><span class="line">2) 不会检查服务是否存在或是否定义了有效的SELinux域。</span><br><span class="line">3) 不会检查服务是否在其他Init脚本中已经定义。</span><br><span class="line"></span><br><span class="line">早期Init引导顺序</span><br><span class="line">------------------------</span><br><span class="line">早期Init引导顺序分为三个阶段：第一阶段init、SELinux设置、第二阶段init。</span><br><span class="line"></span><br><span class="line">第一阶段init负责设置加载系统的最低要求。具体包括挂载/dev、/proc，挂载&#x27;early mount&#x27;分区（需要包括包含系统代码的所有分区，</span><br><span class="line">例如system和vendor），并将system.img挂载到/（对于使用ramdisk的设备）。</span><br><span class="line"></span><br><span class="line">需要注意的是，在Android Q中，system.img始终包含TARGET_ROOT_OUT，并且总是在第一阶段init完成时挂载到/。Android Q还需要动态</span><br><span class="line">分区，因此需要使用ramdisk引导Android。还可以使用恢复ramdisk来引导到Android，而不是使用专用的ramdisk。</span><br><span class="line"></span><br><span class="line">根据设备配置的不同，第一阶段init有三个变种：</span><br><span class="line">1) 对于system-as-root设备，第一阶段init是/system/bin/init的一部分，而/init是一个指向/system/bin/init的符号链接，以向后兼</span><br><span class="line">容。这些设备不需要执行任何操作来挂载system.img，因为根据定义，它已经被内核作为根文件系统挂载。</span><br><span class="line"></span><br><span class="line">2) 对于具有ramdisk的设备，第一阶段init是位于/init的静态可执行文件。这些设备将system.img挂载为/system，然后通过切换根操作将</span><br><span class="line">挂载点从/system移动到/。挂载完成后，ramdisk的内容被释放。</span><br><span class="line"></span><br><span class="line">3) 对于使用恢复模式作为ramdisk的设备，在恢复ramdisk中的/shared init中包含了第一阶段init。这些设备首先切换根目录到</span><br><span class="line">/first_stage_ramdisk，以从环境中删除恢复组件，然后像第二种情况一样继续处理。注意，决定正常启动到Android而不是启动到恢复模</span><br><span class="line">式时，是通过内核命令行中是否存在androidboot.force_normal_boot=1或在Android S及更高版本中的bootconfig中指定。</span><br><span class="line"></span><br><span class="line">第一阶段init完成后，它会使用&quot;selinux_setup&quot;参数执行/system/bin/init。此阶段是可选地编译和加载SELinux到系统上。有关此过程</span><br><span class="line">的详细信息，请参阅selinux.cpp。</span><br><span class="line"></span><br><span class="line">最后，一旦该阶段完成，它会再次使用&quot;second_stage&quot;参数执行/system/bin/init。此时，主要的init阶段运行，并通过init.rc脚本继续</span><br><span class="line">引导过程。</span><br><span class="line"></span><br></pre></td></tr></table></figure>


            </div>
        
        <footer class="article-footer">
        </footer>
    </div>
</article>


    
<nav id="article-nav">
   
</nav>





    
    




<!-- baidu url auto push script -->
<script type="text/javascript">
    !function(){var e=/([http|https]:\/\/[a-zA-Z0-9\_\.]+\.baidu\.com)/gi,r=window.location.href,o=document.referrer;if(!e.test(r)){var n="//api.share.baidu.com/s.gif";o?(n+="?r="+encodeURIComponent(document.referrer),r&&(n+="&l="+r)):r&&(n+="?l="+r);var t=new Image;t.src=n}}(window);
</script>     
</section>
        </div>
        <footer id="footer">
    <div class="outer">
       
    </div>
</footer>

        

    
        
<script src="/libs/lightgallery/js/lightgallery.min.js"></script>

        
<script src="/libs/lightgallery/js/lg-thumbnail.min.js"></script>

        
<script src="/libs/lightgallery/js/lg-pager.min.js"></script>

        
<script src="/libs/lightgallery/js/lg-autoplay.min.js"></script>

        
<script src="/libs/lightgallery/js/lg-fullscreen.min.js"></script>

        
<script src="/libs/lightgallery/js/lg-zoom.min.js"></script>

        
<script src="/libs/lightgallery/js/lg-hash.min.js"></script>

        
<script src="/libs/lightgallery/js/lg-share.min.js"></script>

        
<script src="/libs/lightgallery/js/lg-video.min.js"></script>

    
    
        
<script src="/libs/justified-gallery/jquery.justifiedGallery.min.js"></script>

    
    



<!-- Custom Scripts -->

<script src="/js/main.js"></script>


    </div>
</body>
</html>